{"version":3,"file":"lowcode-lib.cjs.production.min.js","sources":["../src/core/utils/special.ts","../src/core/utils/index.ts","../src/hooks/index.ts","../src/core/innerDrag/state.ts","../src/core/selectRange/sat.ts","../src/core/selectRange/index.ts","../src/core/contextMenu/index.tsx","../src/core/focusHandler/index.tsx","../src/core/components/createBlock.ts","../src/core/crossDrag/index.ts","../src/core/markline/marklineConfig.ts","../src/core/resizeHandler/state.ts","../src/core/resizeHandler/calcWithRotate.ts","../src/core/resizeHandler/cursor.ts","../src/core/resizeHandler/index.tsx","../src/components/control/state.ts","../src/core/resizeHandler/containerResizer.ts","../src/components/wrapperMove/event.ts","../src/components/IframeWrapperMove/event.ts","../src/core/rotateHandler/index.tsx","../src/core/markline/state.ts","../src/components/timeLine/timelineItem.tsx","../node_modules/regenerator-runtime/runtime.js","../src/locale/en.ts","../src/locale/zh-CN.ts","../src/locale/index.tsx","../src/components/timeLine/timeline.tsx","../src/core/innerDrag/index.ts","../src/core/markline/normalMode.ts","../src/core/markline/calcRender.ts","../src/core/markline/index.tsx","../src/core/transfer/index.ts","../src/components/blocks.tsx","../src/core/utils/animate.ts","../src/components/container.tsx","../src/components/colorPicker/index.tsx","../src/components/rightConfig.tsx","../src/core/scale/cancel.ts","../src/core/scale/index.ts","../src/components/wrapperMove/ticker.tsx","../src/components/control/settings.tsx","../src/components/modalRender.tsx","../src/components/leftDataPannel.tsx","../src/core/components/formComponentRegister.ts","../src/core/functionCenter/index.ts","../src/core/eventCenter/eventQuene.ts","../src/core/eventCenter/index.ts","../src/core/dataCenter/index.ts","../src/core/scale/state.ts","../src/core/components/abstract.ts","../src/core/components/defaultFormComponents/modalMask.tsx","../src/core/command/keycode.ts","../src/core/command/index.ts","../src/core/focusHandler/state.ts","../src/core/components/index.ts","../src/core/store/index.ts","../src/core/store/createModal.ts","../src/core/AnimateFactory/index.ts","../src/config/index.tsx","../src/components/IframeWrapperMove/ticker.tsx","../src/core/command/abstract.ts","../src/components/wrapperMove/index.tsx","../src/components/control/control.tsx","../src/components/iframeContainer.tsx","../src/components/IframeWrapperMove/index.tsx","../src/components/iframeTarget.tsx","../src/components/leftConfig.tsx","../src/components/preview.tsx","../src/core/components/formTypes.ts","../src/hooks/useRegistFunc.ts","../src/core/command/runtime.ts"],"sourcesContent":["/*\n\n * @Date: 2021-07-09 00:05:51\n * @LastEditors: \n * @LastEditTime: 2022-04-23 23:01:25\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\utils\\special.ts\n */\nexport const specialCoList = [\"modalMask\"];\nexport const specialFnList = [\"_inner\"];\n","import { message } from \"antd\";\nimport { RGBColor } from \"react-color\";\nimport { nanoid } from \"nanoid\";\nimport Store from \"../store\";\nimport { IBlockType, IStoreData } from \"../store/storetype\";\nimport { specialCoList } from \"./special\";\nimport deepCopys from \"deepcopy\";\nimport { FunctionDataMap } from \"../functionCenter/config\";\nimport UserConfig from \"../../config\";\n\nexport function deepCopy<T = any>(obj: T): T {\n  return deepCopys(obj);\n}\n\nexport function swap(indexa: number, indexb: number, arr: Array<any>) {\n  arr[indexa] = arr.splice(indexb, 1, arr[indexa])[0];\n  return arr;\n}\n\nexport function randomColor() {\n  return (\n    \"#\" + (\"00000\" + ((Math.random() * 0x1000000) << 0).toString(16)).slice(-6)\n  );\n}\n\n// 将rgba字符串对象转化为rgba对象\nexport function rgba2Obj(rgba = \"\") {\n  let reg = /rgba\\(\\s*?(\\d+)\\s*?,\\s*?(\\d+)\\s*?,\\s*?(\\d+)\\s*?,\\s*?(\\d+)\\s*?\\)/g;\n  let rgbaObj: RGBColor = { r: 0, g: 0, b: 0, a: 0 };\n\n  rgba.replace(reg, (_m, r, g, b, a) => {\n    rgbaObj = { r, g, b, a };\n    return rgba;\n  });\n  return rgbaObj;\n}\n\nexport function createUid(name?: string) {\n  if (name) {\n    return name + \"-\" + nanoid();\n  } else {\n    return nanoid();\n  }\n}\n\nexport const isMac = () => {\n  const isMac = /macintosh|mac os x/i.test(navigator.userAgent);\n  if (isMac) {\n    return true;\n  }\n  return false;\n};\n\nexport const changeItem = (\n  store: Store,\n  id: string,\n  property: keyof IBlockType,\n  value: IBlockType[keyof IBlockType]\n) => {\n  const clonedata: IStoreData = deepCopy(store.getData());\n  let canchange = true;\n  clonedata.block.forEach((v) => {\n    if (v.id === id) {\n      if (specialCoList.includes(v.name)) {\n        message.error(\"该组件不可调整\");\n        canchange = false;\n      }\n      v[property] = value as never;\n    }\n  });\n  if (canchange) {\n    store.setData(clonedata);\n  }\n};\n\n/**\n *\n * 清除所有聚焦，选中某个元素\n * @param {Store} store\n * @param {string} id\n */\nexport const focusEle = (store: Store, id: string) => {\n  const clonedata: IStoreData = deepCopy(store.getData());\n  clonedata.block.forEach((v) => {\n    if (v.id === id) {\n      v.focus = true;\n    } else {\n      v.focus = false;\n    }\n  });\n  store.setData(clonedata);\n};\n\nexport const changeLayer = (\n  store: Store,\n  id: string,\n  action: \"up\" | \"down\" | \"delete\",\n  msg = {\n    adjust: \"该组件不可调整\",\n    remove: \"该组件无法删除\",\n  }\n) => {\n  const clonedata: IStoreData = deepCopy(store.getData());\n  let index = -1;\n  switch (action) {\n    case \"up\":\n      clonedata.block.forEach((v, i) => {\n        if (v.id === id) {\n          if (specialCoList.includes(v.name)) {\n            message.error(msg.adjust);\n            return;\n          } else {\n            index = i;\n          }\n        }\n      });\n      if (index > 0) {\n        // 查看上一个元素\n        const item = clonedata.block[index - 1];\n        if (specialCoList.includes(item.name)) {\n          return;\n        }\n        swap(index, index - 1, clonedata.block);\n        store.setData(clonedata);\n      }\n      return;\n    case \"down\":\n      clonedata.block.forEach((v, i) => {\n        if (v.id === id) {\n          if (specialCoList.includes(v.name)) {\n            message.error(msg.adjust);\n            return;\n          } else {\n            index = i;\n          }\n        }\n      });\n      if (index > -1 && index + 1 < clonedata.block.length) {\n        const item = clonedata.block[index + 1];\n        if (specialCoList.includes(item.name)) {\n          return;\n        }\n        swap(index, index + 1, clonedata.block);\n        store.setData(clonedata);\n      }\n      return;\n    case \"delete\":\n      let candelete = true;\n      clonedata.block = clonedata.block.filter((v) => {\n        if (v.id === id) {\n          if (specialCoList.includes(v.name)) {\n            candelete = false;\n          }\n          return false;\n        }\n        return true;\n      });\n      if (candelete) {\n        store.setData(clonedata);\n      } else {\n        message.error(msg.remove);\n      }\n      return;\n  }\n};\n\n/**\n *\n * @param {*} array\n * @param {*} from\n * @param {*} to\n */\nexport const arrayMove = (array: Array<any>, from: number, to: number) => {\n  array = [...array];\n  arrayMoveMutate(array, from, to);\n  return array;\n};\n\n/**\n *\n * @param {*} length\n * @param {*} index\n */\nconst indexSub = (arrLength: number, toIndex: number) => {\n  return toIndex < 0 ? arrLength + toIndex : toIndex;\n  // return resIndex;\n};\n\n/**\n * 数组换位\n * @param {Array} array The array with the item to move. / [1,2,3]\n * @param {Number} from Index of item to move. If negative, it will begin that many elements from the end / 0 / -1 / 2\n * @param {Number} to Index of where to move the item. If negative, it will begin that many elements from the end / 0 / -1 / 2\n * returns A new array with the item moved to the new position [1,2,3] -> [1,3,2]\n */\nconst arrayMoveMutate = (array: Array<any>, from: number, to: number) => {\n  const arrLength = array.length;\n  const startIndex = indexSub(arrLength, from);\n  if (startIndex >= 0 && startIndex < arrLength) {\n    const endIndex = indexSub(arrLength, to);\n    const [item] = array.splice(from, 1);\n    array.splice(endIndex, 0, item);\n  }\n};\n\n/**\n *\n * 这个函数将返回值全部统一成数组// modal的不走此方法\n * @param {keyof FunctionDataMap} v\n * @param {Record<string, any>} args\n * @param {string} name\n * @param {UserConfig} config\n * @param {Record<string, any>} ctx\n * @return {Array<string, any>}\n */\nexport const changeUserValue = (\n  v: keyof FunctionDataMap,\n  args: Record<string, any>,\n  name: string,\n  config: UserConfig,\n  ctx: Record<string, any>\n) => {\n  const userChoose = args[name];\n  switch (v) {\n    case \"ctx\":\n      if (Array.isArray(userChoose)) {\n        return userChoose.reduce((pr: Array<string>, ne: string) => {\n          const val = ctx[ne];\n          pr.push(val);\n          return pr;\n        }, []);\n      }\n      return [];\n    case \"dataSource\":\n      const dataCenter = config.getDataCenter().getDataMap();\n      if (Array.isArray(userChoose)) {\n        return userChoose.reduce((pr: Array<string>, ne: string) => {\n          const val = dataCenter[ne];\n          pr.push(val);\n          return pr;\n        }, []);\n      }\n      return [];\n    default:\n      if (Array.isArray(userChoose)) {\n        return userChoose;\n      }\n      return [];\n  }\n};\n/**\n *\n * 这个函数将返回值全部统一成对象 modal的不走此方法\n * @param {keyof FunctionDataMap} v\n * @param {Record<string, any>} args\n * @param {string} name\n * @param {UserConfig} config\n * @param {Record<string, any>} ctx\n * @return {Record<string, any>}\n */\nexport const changeUserValueRecord = (\n  v: keyof FunctionDataMap,\n  args: Record<string, any>,\n  name: string,\n  config: UserConfig,\n  ctx: Record<string, any>\n) => {\n  const userChoose = args[name];\n  switch (v) {\n    case \"ctx\":\n      if (Array.isArray(userChoose)) {\n        return userChoose.reduce((pr: Record<string, any>, ne: string) => {\n          const val = ctx[ne];\n          return Object.assign(pr, { [ne]: val });\n        }, {});\n      }\n      return {};\n    case \"dataSource\":\n      const dataCenter = config.getDataCenter().getDataMap();\n      if (Array.isArray(userChoose)) {\n        return userChoose.reduce((pr: Record<string, any>, ne: string) => {\n          const val = dataCenter[ne];\n          return Object.assign(pr, { [ne]: val });\n        }, {});\n      }\n      return {};\n    default:\n      if (Array.isArray(userChoose)) {\n        return userChoose.reduce((pr: Record<string, any>, ne: string) => {\n          return Object.assign(pr, { [ne]: ne });\n        }, {});\n      }\n      return {};\n  }\n};\n\nexport function postMessage(\n  value: any,\n  src: string,\n  target = \"yh-container-iframe\"\n) {\n  const search = \"#\" + target;\n  const iframe = document.querySelector(search) as HTMLIFrameElement;\n\n  if (iframe) {\n    iframe.contentWindow?.postMessage(value, src);\n  } else {\n    console.warn(`can not find iframe ${search}`);\n  }\n}\n\nexport function angleToRadian(angle: number) {\n  return (angle * Math.PI) / 180;\n}\n\nexport function getContainer() {\n  let container = document.querySelector(\"#yh-container\");\n  if (!container) {\n    container = document.querySelector(\"#yh-container-iframe\");\n  }\n  return container;\n}\n\nexport function binarySearchRemain<T extends Record<string, number>>(\n  target: number,\n  arr: Array<T>,\n  attribute: keyof T,\n  indent: number\n): null | [T, number] {\n  let start = 0;\n  let end = arr.length - 1;\n\n  while (start <= end) {\n    let mid = parseInt(start + (end - start) / 2 + \"\");\n    if (\n      target === arr[mid][attribute] ||\n      Math.abs(target - arr[mid][attribute]) < indent\n    ) {\n      return [arr[mid], Math.abs(target - arr[mid][attribute])];\n    } else if (target > arr[mid][attribute]) {\n      start = mid + 1;\n    } else {\n      end = mid - 1;\n    }\n  }\n  return null;\n}\n","/*\n\n * @Date: 2021-03-14 05:35:15\n * @LastEditors: \n * @LastEditTime: 2022-04-23 23:34:15\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\hooks\\index.ts\n */\nimport { useEffect, useMemo, useState } from \"react\";\nimport UserConfig from \"../config\";\nimport { ComponentRenderConfigProps } from \"../core/components/componentItem\";\nimport { registCommandFn, unRegistCommandFn } from \"../core/command/runtime\";\nimport { postMessage } from \"../core/utils\";\n\nexport function useStoreState(\n  config: UserConfig,\n  extraFn: Function = () => {},\n  everyFn: Function = () => {}\n) {\n  const store = config.getStore();\n  const [state, setState] = useState(store.getData());\n  const forceUpdate = useState(0)[1];\n  useEffect(() => {\n    const unRegister = store.subscribe(() => {\n      const data = store.getData();\n      setState(data);\n      config.getEventCenter().syncEventMap(store.getData(), config.getStore());\n      config.getEventCenter().getFunctionCenter().syncFunction(store);\n      extraFn();\n    });\n    store.setForceUpdate(() => forceUpdate((v) => v + 1));\n    const commandModules = config.getConfig().initCommandModule;\n    const commander = config.getCommanderRegister();\n    registCommandFn(commandModules, commander);\n    return () => {\n      unRegister();\n      unRegistCommandFn(commandModules, commander);\n    };\n  }, [config, extraFn, forceUpdate, store]);\n  useEffect(() => {\n    everyFn();\n  }, [everyFn]);\n\n  // 去除默认滚动\n  useEffect(() => {\n    const fn1 = function (event: Event) {\n      if (\n        (event as MouseEvent).ctrlKey === true ||\n        (event as MouseEvent).metaKey\n      ) {\n        event.preventDefault();\n      }\n    };\n    const fn2 = function (event: Event) {\n      if (\n        (event as MouseEvent).ctrlKey === true ||\n        (event as MouseEvent).metaKey\n      ) {\n        event.preventDefault();\n      }\n    };\n    window.addEventListener(\"mousewheel\", fn1, { passive: false });\n    //firefox\n    window.addEventListener(\"DOMMouseScroll\", fn2, { passive: false });\n    return () => {\n      window.removeEventListener(\"mousewheel\", fn1);\n      window.removeEventListener(\"mousewheel\", fn2);\n    };\n  }, []);\n\n  return [state];\n}\n\n/**\n *\n * 组件动态注册eventMap与eventCenter\n * @export\n * @param {ComponentRenderConfigProps} props render参数传来的\n * @param {string} eventName 同一个组件名称不能重复\n * @returns\n */\nexport function useDynamicAddEventCenter(\n  props: ComponentRenderConfigProps,\n  eventName: string,\n  displayName: string\n) {\n  const eventCenter = useMemo(() => {\n    return props.config.getEventCenter();\n  }, [props.config]);\n\n  useEffect(() => {\n    const data = props.store.getData();\n    const map = props.data.eventMap;\n    const storeItem = data.block.find((v) => v.id === props.data.id);\n    if (storeItem) {\n      if (!map[eventName]) {\n        //动态store加属性需要通过hook\n        storeItem.eventMap[eventName] = {\n          arr: [],\n          displayName,\n          userSelect: [],\n        };\n        eventCenter.manualUpdateMap(eventName, displayName);\n      }\n    }\n  }, [\n    displayName,\n    eventCenter,\n    eventName,\n    props.data.eventMap,\n    props.data.id,\n    props.store,\n  ]);\n  return;\n}\n\n/**\n *\n *\n * @export\n * @param {string} origin iframe地址\n * @param {UserConfig} config\n * @param {boolean} sign iframe onload\n * @param {string} [target]  iframeid 默认是yh-container-iframe\n * @return {*}\n */\nexport function useIframePostMessage(\n  origin: string,\n  config: UserConfig,\n  sign: boolean,\n  target?: string\n) {\n  const store = config.getStore();\n\n  const fn = useMemo(() => {\n    config.iframeId = target || config.iframeId;\n    config.iframeOrigin = origin;\n    return () => {\n      const data = {\n        store: store.getData(),\n        scaleState: config.getScaleState(),\n        wrapperState: config.getWrapperMove().iframe,\n      };\n      postMessage(data, origin, target);\n    };\n  }, [config, origin, store, target]);\n\n  useEffect(() => {\n    let unRegister = () => {};\n    if (sign) {\n      config.refreshIframe = fn;\n      unRegister = store.subscribe(() => {\n        // dom等无法传递\n        // config由context带去，传递store和必要state\n        fn();\n      });\n    }\n    return () => {\n      unRegister();\n    };\n  }, [config.refreshIframe, fn, sign, store]);\n\n  return [fn];\n}\n\nexport function useIframeHook(origin: string, config: UserConfig) {\n  const [iframeReady, setIframeReady] = useState(false);\n  const [fnx] = useIframePostMessage(origin, config, iframeReady);\n  useEffect(() => {\n    //@ts-ignore\n    const fn = (e: MessageEvent<any>) => {\n      if (e.data === \"ready\") {\n        setIframeReady(true);\n        fnx();\n      }\n      if (typeof e.data === \"object\") {\n        if (e.data.type === \"update\") {\n          if (e.data.column === \"scale\") {\n            config.scaleState = e.data.data;\n            config.getStore().forceUpdate();\n            config.refreshIframe();\n          }\n        }\n      }\n    };\n\n    window.addEventListener(\"message\", fn);\n    return () => {\n      window.removeEventListener(\"message\", fn);\n    };\n  }, [config, fnx]);\n}\n","/*\n\n * @Date: 2021-03-14 12:09:11\n * @LastEditors: \n * @LastEditTime: 2021-09-28 16:57:05\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\innerDrag\\state.ts\n */\nimport { RefObject } from \"react\";\n\nimport { IBlockType } from \"../store/storetype\";\n\nexport interface innerDragStateType {\n  startX: number;\n  startY: number;\n  item: null | IBlockType;\n  isDrag: boolean;\n  ref: RefObject<HTMLDivElement> | null;\n  current: number;\n  lastClick: null | IBlockType;\n  itemX: number;\n  itemY: number;\n}\n\nexport const innerDragState: innerDragStateType = {\n  startX: 0,\n  startY: 0,\n  item: null,\n  isDrag: false,\n  ref: null,\n  current: 0,\n  lastClick: null,\n  itemX: 0,\n  itemY: 0,\n};\n","/*\n\n * @Date: 2022-04-30 23:25:05\n * @LastEditors: \n * @LastEditTime: 2022-05-01 19:31:14\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\selectRange\\sat.ts\n */\n\nimport { angleToRadian } from \"../utils\";\n\ninterface BlockItem {\n  width: number;\n  left: number;\n  top: number;\n  height: number;\n  rotate: number;\n}\nfunction getCenter(item: BlockItem) {\n  return { x: item.left + item.width / 2, y: item.top + item.height / 2 };\n}\nfunction revert({ x, y }: { x: number; y: number }) {\n  return { x: y, y: -x };\n}\nfunction substract(a: { x: number; y: number }, b: { x: number; y: number }) {\n  return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getSides(list: { x: number; y: number }[]) {\n  let len = list.length;\n  let res = [];\n  for (let j = 1, pre = list[0]; j < len; j++) {\n    let p = list[j];\n    res.push(substract(p, pre));\n    pre = p;\n  }\n  res.push(substract(list[0], list[len - 1]));\n  return res;\n}\nfunction len(axis: { x: number; y: number }) {\n  return Math.sqrt(axis.x * axis.x + axis.y * axis.y);\n}\nfunction dot(a: { x: number; y: number }, b: { x: number; y: number }) {\n  return a.x * b.x + a.y * b.y;\n}\nfunction getProjection(\n  axis: { x: number; y: number },\n  list: { x: number; y: number }[]\n) {\n  let min = null;\n  let max = null;\n  for (let i = 0, l = list.length; i < l; i++) {\n    let p = list[i];\n    let pro = dot(p, axis) / len(axis);\n    if (min === null || pro < min) {\n      min = pro;\n    }\n    if (max === null || pro > max) {\n      max = pro;\n    }\n  }\n  return { min: min, max: max };\n}\n\nfunction getOriginPoint(item: BlockItem) {\n  const center = getCenter(item);\n  let a = center.x;\n  let b = center.y;\n  const transfer = [\n    { x: item.left, y: item.top },\n    { x: item.left + item.width, y: item.top },\n    { x: item.left + item.width, y: item.top + item.height },\n    { x: item.left, y: item.top + item.height },\n  ];\n  const relativePoint: { x: number; y: number }[] = [];\n  const rootPoint = transfer.map((v) => {\n    const x0 = v.x;\n    const y0 = v.y;\n    const rx =\n      a +\n      (x0 - a) * Math.cos(angleToRadian(item.rotate)) -\n      (y0 - b) * Math.sin(angleToRadian(item.rotate));\n    const ry =\n      b +\n      (x0 - a) * Math.sin(angleToRadian(item.rotate)) +\n      (y0 - b) * Math.cos(angleToRadian(item.rotate));\n    relativePoint.push({ x: a - rx, y: b - ry });\n    return { x: rx, y: ry };\n  });\n\n  return { rootPoint, relativePoint };\n}\n\nfunction polygonsCollisionTest(A: BlockItem, B: BlockItem) {\n  const resa = getOriginPoint(A);\n  const resb = getOriginPoint(B);\n  const sidesa = getSides(resa.relativePoint);\n  const sidesb = getSides(resb.relativePoint);\n  const sides = sidesa.concat(sidesb);\n  for (let j = 0, l = sides.length; j < l; j++) {\n    let axis = revert(sides[j]);\n    let proA = getProjection(axis, resa.rootPoint),\n      proB = getProjection(axis, resb.rootPoint);\n    if (isOverlay(proA, proB)) {\n      return false;\n    }\n  }\n\n  return true;\n}\nfunction isOverlay(proA: any, proB: any) {\n  let min, max;\n  if (proA.min < proB.min) {\n    min = proA.min;\n  } else {\n    min = proB.min;\n  }\n  if (proA.max > proB.max) {\n    max = proA.max;\n  } else {\n    max = proB.max;\n  }\n  return proA.max - proA.min + (proB.max - proB.min) < max - min;\n}\n\nexport function Sat(v: BlockItem, select: BlockItem) {\n  return polygonsCollisionTest(v, select);\n}\n","import { IStoreData } from \"../store/storetype\";\nimport { deepCopy } from \"../utils\";\nimport style from \"../../index.less\";\nimport UserConfig from \"../../config\";\nimport { Sat } from \"./sat\";\nexport interface SelectDataProps {\n  selectDiv: HTMLDivElement | null;\n  posx: number;\n  posy: number;\n  startX: number;\n  startY: number;\n}\n\nexport const selectData: SelectDataProps = {\n  selectDiv: null,\n  posx: 0,\n  posy: 0,\n  startX: 0,\n  startY: 0,\n};\n\nexport function selectRangeMouseDown(e: React.MouseEvent, config: UserConfig) {\n  if (!selectData.selectDiv) {\n    selectData.selectDiv = document.createElement(\"div\");\n  }\n  if (selectData.selectDiv) {\n    selectData.startX = e.nativeEvent.offsetX;\n    selectData.startY = e.nativeEvent.offsetY;\n    selectData.posx = e.clientX;\n    selectData.posy = e.clientY;\n    selectData.selectDiv.className = style.yhTempDiv;\n    selectData.selectDiv.style.left = e.clientX + \"px\";\n    selectData.selectDiv.style.top = e.clientY + \"px\";\n    selectData.selectDiv.style.position = \"fixed\";\n    document.body.appendChild(selectData.selectDiv);\n    selectData.selectDiv.onmouseup = (e) => selectRangeMouseUp(e, config);\n    selectData.selectDiv.onmousemove = (e) => selectRangeMouseMove(e);\n  }\n}\n\nexport function selectRangeMouseMove(ev: React.MouseEvent | MouseEvent) {\n  if (selectData.selectDiv) {\n    selectData.selectDiv.style.left =\n      Math.min(ev.clientX, selectData.posx) + \"px\";\n    selectData.selectDiv.style.top =\n      Math.min(ev.clientY, selectData.posy) + \"px\";\n    selectData.selectDiv.style.width =\n      Math.abs(selectData.posx - ev.clientX) + \"px\";\n    selectData.selectDiv.style.height =\n      Math.abs(selectData.posy - ev.clientY) + \"px\";\n  }\n}\n\nfunction typeGuard(e: React.MouseEvent | MouseEvent): e is React.MouseEvent {\n  return !(e instanceof Event);\n}\n\nfunction selectFocus(\n  left: number,\n  top: number,\n  width: number,\n  height: number,\n  config: UserConfig\n) {\n  if (width === 0 || height === 0) {\n    return;\n  }\n  const store = config.getStore();\n  const clonedata: IStoreData = deepCopy(store.getData());\n  const focusState = config.getFocusState();\n  const blocks = clonedata.block;\n  let change = false;\n  blocks.forEach((v) => {\n    const l = v.left;\n    const t = v.top;\n    const w = v.width;\n    const h = v.height;\n    if (\n      typeof l === \"number\" &&\n      typeof t === \"number\" &&\n      typeof w === \"number\" &&\n      typeof h === \"number\" &&\n      v.canDrag === true\n    ) {\n      const curItem = {\n        left: l,\n        top: t,\n        width: w,\n        height: h,\n        rotate: v.rotate.value,\n      };\n      const res = Sat(curItem, {\n        left,\n        width,\n        height,\n        top,\n        rotate: 0,\n      });\n      if (res) {\n        change = true;\n        v.focus = true;\n        focusState.blocks.push(v);\n      }\n    }\n  });\n  if (change) {\n    store.setData(clonedata);\n  }\n}\n\nexport function selectRangeMouseUp(\n  e: React.MouseEvent | MouseEvent,\n  config: UserConfig\n) {\n  if (selectData.selectDiv) {\n    // 这里需要判定区域\n    // 如果是react触发 ，left和top就是起始值和终止值的最小值\n    // 如果是原生触发，left和top是起始点减去其宽高\n    let left = 0;\n    let top = 0;\n    const scaleState = config.getScaleState();\n    const { width, height } = selectData.selectDiv.getBoundingClientRect();\n    const scale = scaleState.value;\n    const wwidth = width / scale;\n    const wheight = height / scale;\n    if (typeGuard(e)) {\n      left = Math.min(e.nativeEvent.offsetX, selectData.startX);\n      top = Math.min(e.nativeEvent.offsetY, selectData.startY);\n    } else {\n      left = selectData.startX - wwidth;\n      top = selectData.startY - wheight;\n    }\n    selectFocus(left, top, wwidth, wheight, config);\n    selectData.selectDiv.parentNode!.removeChild(selectData.selectDiv);\n    selectData.selectDiv = null;\n  }\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-07-13 19:57:45\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\contextMenu\\index.tsx\n */\nimport { Button } from \"antd\";\nimport React, { RefObject, useState } from \"react\";\nimport { ReactElement } from \"react\";\nimport ReactDOM, { unmountComponentAtNode } from \"react-dom\";\nimport UserConfig from \"../../config\";\nimport { isMac } from \"../utils\";\n\nconst ContextMenu = () => {\n  const handleclick = () => {\n    unmountContextMenu();\n  };\n  const forceUpdate = useState(0)[1];\n  contextMenuState.forceUpdate = () => {\n    forceUpdate((pre) => pre + 1);\n  };\n  return (\n    <div\n      style={{\n        left: contextMenuState.left,\n        top: contextMenuState.top,\n        position: \"fixed\",\n        background: \"rgb(24, 23, 23)\",\n      }}\n    >\n      <Button\n        onClick={() => {\n          handleclick();\n        }}\n      >\n        请参考文档自定义右键菜单\n      </Button>\n    </div>\n  );\n};\nexport interface ContextMenuStateProps {\n  left: number;\n  top: number;\n  menu: HTMLElement | null;\n  parent: HTMLDivElement | null;\n  contextMenu: ReactElement;\n  unmountContextMenu: () => void;\n  observer: null | MutationObserver;\n  initLeft: number;\n  initTop: number;\n  forceUpdate: Function;\n  state: boolean;\n}\nexport const contextMenuState: ContextMenuStateProps = {\n  left: 0,\n  top: 0,\n  menu: null,\n  parent: null,\n  contextMenu: <ContextMenu />,\n  unmountContextMenu: unmountContextMenu,\n  observer: null,\n  initLeft: 0,\n  initTop: 0,\n  forceUpdate: () => {},\n  state: false,\n};\n\nexport function contextMenuEvent(\n  e: React.MouseEvent<HTMLDivElement, MouseEvent>,\n  ref: RefObject<HTMLDivElement>,\n  userConfig: UserConfig\n) {\n  e.preventDefault();\n  const scaleState = userConfig.getScaleState();\n  contextMenuState.unmountContextMenu();\n  const config: MutationObserverInit = {\n    attributes: true,\n  };\n  const callback: MutationCallback = (mutationsList) => {\n    if (isMac()) {\n      //mac 有bug\n      contextMenuState.unmountContextMenu();\n    } else {\n      for (let mutation of mutationsList) {\n        if (mutation.type === \"attributes\") {\n          const scale = scaleState.value;\n          const curLeft = parseFloat(\n            (mutation.target as HTMLDivElement).style.left\n          );\n          const curTop = parseFloat(\n            (mutation.target as HTMLDivElement).style.top\n          );\n          const diffL = (curLeft - contextMenuState.initLeft) * scale;\n          const diffT = (curTop - contextMenuState.initTop) * scale;\n          contextMenuState.initLeft = curLeft;\n          contextMenuState.initTop = curTop;\n          contextMenuState.left = contextMenuState.left + diffL;\n          contextMenuState.top = contextMenuState.top + diffT;\n          contextMenuState.forceUpdate();\n        }\n      }\n    }\n  };\n  contextMenuState.state = true;\n  contextMenuState.observer = new MutationObserver(callback);\n  if (ref.current) {\n    //记录初始值\n    contextMenuState.initTop = parseFloat(ref.current.style.top);\n    contextMenuState.initLeft = parseFloat(ref.current.style.left);\n    contextMenuState.observer.observe(ref.current, config);\n  }\n  contextMenuState.left = e.clientX;\n  contextMenuState.top = e.clientY;\n  if (!contextMenuState.menu) {\n    contextMenuState.menu = document.createElement(\"div\");\n    document.body && document.body.appendChild(contextMenuState.menu);\n  }\n  if (!contextMenuState.parent) {\n    contextMenuState.parent = document.createElement(\"div\");\n  }\n  contextMenuState.menu.appendChild(contextMenuState.parent);\n  ReactDOM.render(contextMenuState.contextMenu, contextMenuState.parent);\n}\n\nexport function unmountContextMenu() {\n  contextMenuState.state = false;\n  if (contextMenuState.observer) {\n    contextMenuState.observer.disconnect();\n  }\n  if (contextMenuState.menu && contextMenuState.parent) {\n    unmountComponentAtNode(contextMenuState.parent);\n    contextMenuState.menu.removeChild(contextMenuState.parent);\n    contextMenuState.parent = null;\n  }\n}\n\nexport default ContextMenu;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-10-07 12:40:32\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\focusHandler\\index.tsx\n */\nimport { innerDragState } from \"../innerDrag/state\";\nimport { IBlockType } from \"../store/storetype\";\nimport { deepCopy } from \"../utils\";\nimport { selectRangeMouseDown } from \"../selectRange\";\nimport { unmountContextMenu } from \"../contextMenu\";\nimport UserConfig from \"../../config\";\n\nfunction resolveRemove(config: UserConfig) {\n  const store = config.getStore();\n  const focusState = config.getFocusState();\n  const clonedata = deepCopy(store.getData());\n  const newBlock = clonedata.block.map((v: IBlockType) => {\n    v.focus = false;\n    return v;\n  });\n  focusState.blocks = [];\n  store.setData({ ...clonedata, block: newBlock });\n  unmountContextMenu();\n}\n\nexport function innerRemoveFocus(config: UserConfig) {\n  resolveRemove(config);\n}\n\nexport function containerFocusRemove(config: UserConfig) {\n  const onMouseDown = (e: React.MouseEvent) => {\n    resolveRemove(config);\n    if (!innerDragState.item) {\n      selectRangeMouseDown(e, config);\n    }\n  };\n  return {\n    onMouseDown,\n  };\n}\n\nexport function blockFocus(\n  e: React.MouseEvent,\n  item: IBlockType,\n  config: UserConfig\n) {\n  const store = config.getStore();\n  const clonedata = deepCopy(store.getData());\n  const focusState = config.getFocusState();\n  if (e.shiftKey) {\n    const newBlock = clonedata.block.map((v: IBlockType) => {\n      if (v.id === item.id) {\n        v.focus = true;\n        focusState.blocks.push(item);\n      }\n      return v;\n    });\n    store.setData({ ...clonedata, block: newBlock });\n  } else {\n    let blocks: IBlockType[] = [];\n    const newBlock = clonedata.block.map((v: IBlockType) => {\n      if (v.id === item.id) {\n        blocks.push(item);\n        v.focus = true;\n      } else {\n        v.focus = false;\n      }\n      return v;\n    });\n    focusState.blocks = blocks;\n    store.setData({ ...clonedata, block: newBlock });\n  }\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-10-07 12:45:49\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\components\\createBlock.ts\n */\nimport { UserConfig } from \"../..\";\nimport { innerRemoveFocus } from \"../focusHandler\";\nimport { IBlockType } from \"../store/storetype\";\nimport { createUid } from \"../utils\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { ComponentItem } from \"./componentItem\";\n\nexport function createBlock(\n  top: number,\n  left: number,\n  ComponentItem: ComponentItem,\n  config: UserConfig\n): IBlockType {\n  innerRemoveFocus(config);\n  return {\n    id: createUid(ComponentItem.name),\n    name: ComponentItem.name,\n    top,\n    left,\n    zIndex: ComponentItem.initData.zIndex || 0,\n    props: ComponentItem.initData.props || {},\n    resize: ComponentItem.initData.resize || ComponentItem.resize,\n    focus: ComponentItem.initData.focus ?? true,\n    position: ComponentItem.initData.position || \"absolute\",\n    display: ComponentItem.initData.display || \"block\",\n    width: ComponentItem.initData.width,\n    height: ComponentItem.initData.height,\n    syncList: ComponentItem.initData.syncList || [],\n    canDrag: ComponentItem.initData.canDrag ?? true,\n    canSee: ComponentItem.initData.canSee ?? true,\n    eventMap: ComponentItem.initData.eventMap || {},\n    functionList: ComponentItem.initData.functionList || [],\n    animate: ComponentItem.initData.animate || [],\n    fixed: ComponentItem.initData.fixed || false,\n    rotate: ComponentItem.initData.rotate || {\n      value: 0,\n      canRotate: true,\n    },\n  };\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-10-07 12:45:30\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\crossDrag\\index.ts\n */\nimport React, { DragEvent, ReactNode } from \"react\";\nimport { createBlock } from \"../components/createBlock\";\nimport { IBlockType } from \"../store/storetype\";\nimport { deepCopy } from \"../utils\";\nimport UserConfig from \"../../config\";\n\n/**\n *\n * @export\n * @interface LeftRegistComponentMapItem\n * @img 图片地址\n * @urlFn 组件异步加载函数\n */\nexport interface LeftRegistComponentMapItem {\n  type: string;\n  component: string;\n  img: string;\n  imgCustom?: ReactNode;\n  displayName: string;\n  urlFn?: () => Promise<any>;\n}\n\nlet currentDrag: LeftRegistComponentMapItem | null = null;\n\nfunction resolveDrop(\n  config: UserConfig,\n  item: LeftRegistComponentMapItem,\n  e: DragEvent<HTMLDivElement> | React.MouseEvent,\n  x: number,\n  y: number,\n  dbclick: boolean = false\n) {\n  const componentRegister = config.getComponentRegister();\n  const store = config.getStore();\n  const origin = componentRegister.getComp(item.component);\n  if (!origin) {\n    console.log(item.component, \"wait the chunk pull compeletely and retry\");\n    return;\n  }\n  const target = e.target as HTMLElement;\n  let newblock: IBlockType;\n  //如果有宽高，那么让其在中间\n  let fixX = x;\n  let fixY = y;\n  if (origin.initData.width && typeof origin.initData.width === \"number\") {\n    fixX = x - origin.initData.width / 2;\n  }\n  if (origin.initData.height && typeof origin.initData.height === \"number\") {\n    fixY = y - origin.initData.height / 2;\n  }\n\n  if (!origin.needPosition) {\n    newblock = createBlock(\n      origin.initData.top ?? fixY,\n      origin.initData.left ?? fixX,\n      origin,\n      config\n    );\n  } else {\n    if (dbclick) {\n      newblock = createBlock(fixY, fixX, origin, config);\n    } else {\n      if (target.id !== \"yh-container\") {\n        newblock = createBlock(\n          fixY + target.offsetTop,\n          fixX + target.offsetLeft,\n          origin,\n          config\n        );\n      } else {\n        newblock = createBlock(fixY, fixX, origin, config);\n      }\n    }\n  }\n  const data = deepCopy(store.getData());\n  data.block.push(newblock);\n  store.setData({ ...data });\n}\n\nexport const dragEventResolve = function (\n  item: LeftRegistComponentMapItem,\n  config: UserConfig\n) {\n  return {\n    draggable: true,\n    onDragStart: () => {\n      currentDrag = item;\n    },\n    onDragOver: (e: DragEvent<HTMLDivElement>) => {\n      e.preventDefault();\n    },\n    onDrop: () => {},\n    onDragEnd: () => {},\n    onDoubleClick: (e: React.MouseEvent) => {\n      const container = config.getStore().getData().container;\n      const x = container.width / 2;\n      const y = container.height / 2;\n      resolveDrop(config, item, e, x, y, true);\n    },\n  };\n};\n\nexport const containerDragResolve = (config: UserConfig) => {\n  return {\n    onDragStart: () => {},\n    onDragOver: (e: DragEvent<HTMLDivElement>) => {\n      e.preventDefault();\n    },\n    onDrop: (e: DragEvent<HTMLDivElement>) => {\n      const offsetX = Math.round(e.nativeEvent.offsetX);\n      const offestY = Math.round(e.nativeEvent.offsetY);\n      //drop后修改store，\n      if (currentDrag) {\n        resolveDrop(config, currentDrag, e, offsetX, offestY);\n      }\n      currentDrag = null;\n    },\n    onDragEnd: () => {},\n  };\n};\n","/*\n\n * @Date: 2021-03-14 11:49:13\n * @LastEditors: \n * @LastEditTime: 2022-01-21 10:44:50\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\markline\\marklineConfig.ts\n */\nimport { IBlockType } from \"../store/storetype\";\n\nexport interface MarklineConfigType {\n  indent: number;\n  isAbsorb: boolean;\n  mode: \"normal\" | \"grid\";\n  gridIndent: number;\n  resizeIndent: number;\n  marklineUnfocus: null | IBlockType[];\n  borderColor: string;\n  borderStyle: \"dotted\" | \"solid\" | \"dashed\";\n}\n\n// 间隔距离执行吸附\nexport const marklineConfig: MarklineConfigType = {\n  indent: 5,\n  isAbsorb: true,\n  mode: \"normal\",\n  gridIndent: 50,\n  resizeIndent: 0,\n  marklineUnfocus: null,\n  borderColor: \"rgba( 33 , 150 , 243, 1 )\",\n  borderStyle: \"dotted\",\n};\n","/*\n\n * @Date: 2021-07-23 20:31:30\n * @LastEditors: \n * @LastEditTime: 2021-07-26 11:12:02\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\resizeHandler\\state.ts\n */\n\nimport { RefObject } from \"react\";\nimport { IBlockType } from \"../store/storetype\";\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\ninterface resizeStateType {\n  startX: number;\n  startY: number;\n  item: null | IBlockType;\n  isResize: boolean;\n  direction: DirectionType;\n  ref: RefObject<HTMLDivElement> | null;\n  current: number;\n  currentTarget: HTMLDivElement | null;\n  symmetricPoint: Point;\n  curPosition: Point;\n}\nexport type DirectionType = \"lt\" | \"t\" | \"rt\" | \"r\" | \"rb\" | \"b\" | \"lb\" | \"l\";\nexport const directionArr: DirectionType[] = [\n  \"lt\",\n  \"t\",\n  \"rt\",\n  \"r\",\n  \"rb\",\n  \"b\",\n  \"lb\",\n  \"l\",\n];\n\nexport const resizeState: resizeStateType = {\n  startX: 0,\n  startY: 0,\n  item: null,\n  isResize: false,\n  direction: \"b\",\n  ref: null,\n  current: 0,\n  currentTarget: null,\n  symmetricPoint: {\n    x: 0,\n    y: 0,\n  },\n  curPosition: {\n    x: 0,\n    y: 0,\n  },\n};\n","/*\n\n * @Date: 2021-07-22 16:55:10\n * @LastEditors: \n * @LastEditTime: 2021-07-26 14:01:14\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\resizeHandler\\calcWithRotate.ts\n */\n\nimport { DirectionType, Point, resizeState } from \"./state\";\nimport { IBlockType } from \"../store/storetype\";\nimport { angleToRadian } from \"../utils\";\n\nfunction getCenterPoint(p1: Point, p2: Point) {\n  return {\n    x: p1.x + (p2.x - p1.x) / 2,\n    y: p1.y + (p2.y - p1.y) / 2,\n  };\n}\nfunction calculateRotatedPointCoordinate(\n  point: Point,\n  center: Point,\n  rotate: number\n) {\n  return {\n    x:\n      (point.x - center.x) * Math.cos(angleToRadian(rotate)) -\n      (point.y - center.y) * Math.sin(angleToRadian(rotate)) +\n      center.x,\n    y:\n      (point.x - center.x) * Math.sin(angleToRadian(rotate)) +\n      (point.y - center.y) * Math.cos(angleToRadian(rotate)) +\n      center.y,\n  };\n}\n\nexport function getRect(\n  direction: DirectionType,\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point,\n  itemWH: {\n    width: number;\n    height: number;\n  }\n) {\n  switch (direction) {\n    case \"lt\":\n      calculateTopLeft(item, rotate, curPositon, symmetricPoint);\n      break;\n    case \"r\":\n      calculateRight(item, rotate, curPositon, symmetricPoint, itemWH);\n      break;\n    case \"b\":\n      calculateBottom(item, rotate, curPositon, symmetricPoint, itemWH);\n      break;\n    case \"l\":\n      calculateLeft(item, rotate, curPositon, symmetricPoint, itemWH);\n      break;\n    case \"t\":\n      calculateTop(item, rotate, curPositon, symmetricPoint, itemWH);\n      break;\n    case \"rb\":\n      calculateBottomRight(item, rotate, curPositon, symmetricPoint);\n      break;\n    case \"rt\":\n      calculateTopRight(item, rotate, curPositon, symmetricPoint);\n      break;\n    case \"lb\":\n      calculateBottomLeft(item, rotate, curPositon, symmetricPoint);\n      break;\n    default:\n      break;\n  }\n}\n\nfunction calculateTopLeft(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point\n) {\n  const newCenterPoint = getCenterPoint(curPositon, symmetricPoint);\n  const newTopLeftPoint = calculateRotatedPointCoordinate(\n    curPositon,\n    newCenterPoint,\n    -rotate\n  );\n  const newBottomRightPoint = calculateRotatedPointCoordinate(\n    symmetricPoint,\n    newCenterPoint,\n    -rotate\n  );\n  const newWidth = newBottomRightPoint.x - newTopLeftPoint.x;\n  const newHeight = newBottomRightPoint.y - newTopLeftPoint.y;\n  if (newWidth > 0 && newHeight > 0) {\n    item.width = Math.round(newWidth);\n    item.height = Math.round(newHeight);\n    item.left = Math.round(newTopLeftPoint.x);\n    item.top = Math.round(newTopLeftPoint.y);\n  }\n}\n\nfunction calculateTopRight(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point\n) {\n  const newCenterPoint = getCenterPoint(curPositon, symmetricPoint);\n  const newTopRightPoint = calculateRotatedPointCoordinate(\n    curPositon,\n    newCenterPoint,\n    -rotate\n  );\n  const newBottomLeftPoint = calculateRotatedPointCoordinate(\n    symmetricPoint,\n    newCenterPoint,\n    -rotate\n  );\n\n  const newWidth = newTopRightPoint.x - newBottomLeftPoint.x;\n  const newHeight = newBottomLeftPoint.y - newTopRightPoint.y;\n\n  if (newWidth > 0 && newHeight > 0) {\n    item.width = Math.round(newWidth);\n    item.height = Math.round(newHeight);\n    item.left = Math.round(newBottomLeftPoint.x);\n    item.top = Math.round(newTopRightPoint.y);\n  }\n}\n\nfunction calculateBottomRight(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point\n) {\n  const newCenterPoint = getCenterPoint(curPositon, symmetricPoint);\n  const newTopLeftPoint = calculateRotatedPointCoordinate(\n    symmetricPoint,\n    newCenterPoint,\n    -rotate\n  );\n  const newBottomRightPoint = calculateRotatedPointCoordinate(\n    curPositon,\n    newCenterPoint,\n    -rotate\n  );\n\n  const newWidth = newBottomRightPoint.x - newTopLeftPoint.x;\n  const newHeight = newBottomRightPoint.y - newTopLeftPoint.y;\n\n  if (newWidth > 0 && newHeight > 0) {\n    item.width = Math.round(newWidth);\n    item.height = Math.round(newHeight);\n    item.left = Math.round(newTopLeftPoint.x);\n    item.top = Math.round(newTopLeftPoint.y);\n  }\n}\n\nfunction calculateBottomLeft(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point\n) {\n  const newCenterPoint = getCenterPoint(curPositon, symmetricPoint);\n  const newTopRightPoint = calculateRotatedPointCoordinate(\n    symmetricPoint,\n    newCenterPoint,\n    -rotate\n  );\n  const newBottomLeftPoint = calculateRotatedPointCoordinate(\n    curPositon,\n    newCenterPoint,\n    -rotate\n  );\n\n  const newWidth = newTopRightPoint.x - newBottomLeftPoint.x;\n  const newHeight = newBottomLeftPoint.y - newTopRightPoint.y;\n\n  if (newWidth > 0 && newHeight > 0) {\n    item.width = Math.round(newWidth);\n    item.height = Math.round(newHeight);\n    item.left = Math.round(newBottomLeftPoint.x);\n    item.top = Math.round(newTopRightPoint.y);\n  }\n}\n\nfunction calculateTop(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point,\n  itemWH: {\n    width: number;\n    height: number;\n  }\n) {\n  const curPoint = resizeState.curPosition;\n  const rotatedcurPositon = calculateRotatedPointCoordinate(\n    curPositon,\n    curPoint,\n    -rotate\n  );\n  const rotatedTopMiddlePoint = calculateRotatedPointCoordinate(\n    {\n      x: curPoint.x,\n      y: rotatedcurPositon.y,\n    },\n    curPoint,\n    rotate\n  );\n\n  const newHeight = Math.sqrt(\n    (rotatedTopMiddlePoint.x - symmetricPoint.x) ** 2 +\n      (rotatedTopMiddlePoint.y - symmetricPoint.y) ** 2\n  );\n  if (newHeight > 0) {\n    const newCenter = {\n      x:\n        rotatedTopMiddlePoint.x -\n        (rotatedTopMiddlePoint.x - symmetricPoint.x) / 2,\n      y:\n        rotatedTopMiddlePoint.y +\n        (symmetricPoint.y - rotatedTopMiddlePoint.y) / 2,\n    };\n    const width = typeof item.width === \"number\" ? item.width : itemWH.width;\n    item.width = width;\n    item.height = Math.round(newHeight);\n    item.top = Math.round(newCenter.y - newHeight / 2);\n    item.left = Math.round(newCenter.x - width / 2);\n  }\n}\n\nfunction calculateRight(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point,\n  itemWH: {\n    width: number;\n    height: number;\n  }\n) {\n  const curPoint = resizeState.curPosition;\n  const rotatedcurPositon = calculateRotatedPointCoordinate(\n    curPositon,\n    curPoint,\n    -rotate\n  );\n  const rotatedRightMiddlePoint = calculateRotatedPointCoordinate(\n    {\n      x: rotatedcurPositon.x,\n      y: curPoint.y,\n    },\n    curPoint,\n    rotate\n  );\n\n  const newWidth = Math.sqrt(\n    (rotatedRightMiddlePoint.x - symmetricPoint.x) ** 2 +\n      (rotatedRightMiddlePoint.y - symmetricPoint.y) ** 2\n  );\n  if (newWidth > 0) {\n    const newCenter = {\n      x:\n        rotatedRightMiddlePoint.x -\n        (rotatedRightMiddlePoint.x - symmetricPoint.x) / 2,\n      y:\n        rotatedRightMiddlePoint.y +\n        (symmetricPoint.y - rotatedRightMiddlePoint.y) / 2,\n    };\n    const height =\n      typeof item.height === \"number\" ? item.height : itemWH.height;\n    item.height = height;\n    item.width = Math.round(newWidth);\n    item.top = Math.round(newCenter.y - height / 2);\n    item.left = Math.round(newCenter.x - newWidth / 2);\n  }\n}\n\nfunction calculateBottom(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point,\n  itemWH: {\n    width: number;\n    height: number;\n  }\n) {\n  const curPoint = resizeState.curPosition;\n  const rotatedcurPositon = calculateRotatedPointCoordinate(\n    curPositon,\n    curPoint,\n    -rotate\n  );\n  const rotatedBottomMiddlePoint = calculateRotatedPointCoordinate(\n    {\n      x: curPoint.x,\n      y: rotatedcurPositon.y,\n    },\n    curPoint,\n    rotate\n  );\n\n  const newHeight = Math.sqrt(\n    (rotatedBottomMiddlePoint.x - symmetricPoint.x) ** 2 +\n      (rotatedBottomMiddlePoint.y - symmetricPoint.y) ** 2\n  );\n  if (newHeight > 0) {\n    const newCenter = {\n      x:\n        rotatedBottomMiddlePoint.x -\n        (rotatedBottomMiddlePoint.x - symmetricPoint.x) / 2,\n      y:\n        rotatedBottomMiddlePoint.y +\n        (symmetricPoint.y - rotatedBottomMiddlePoint.y) / 2,\n    };\n    const width = typeof item.width === \"number\" ? item.width : itemWH.width;\n    item.width = width;\n    item.height = Math.round(newHeight);\n    item.top = Math.round(newCenter.y - newHeight / 2);\n    item.left = Math.round(newCenter.x - width / 2);\n  }\n}\n\nfunction calculateLeft(\n  item: IBlockType,\n  rotate: number,\n  curPositon: Point,\n  symmetricPoint: Point,\n  itemWH: {\n    width: number;\n    height: number;\n  }\n) {\n  const curPoint = resizeState.curPosition;\n  const rotatedcurPositon = calculateRotatedPointCoordinate(\n    curPositon,\n    curPoint,\n    -rotate\n  );\n  const rotatedLeftMiddlePoint = calculateRotatedPointCoordinate(\n    {\n      x: rotatedcurPositon.x,\n      y: curPoint.y,\n    },\n    curPoint,\n    rotate\n  );\n\n  const newWidth = Math.sqrt(\n    (rotatedLeftMiddlePoint.x - symmetricPoint.x) ** 2 +\n      (rotatedLeftMiddlePoint.y - symmetricPoint.y) ** 2\n  );\n  if (newWidth > 0) {\n    const newCenter = {\n      x:\n        rotatedLeftMiddlePoint.x -\n        (rotatedLeftMiddlePoint.x - symmetricPoint.x) / 2,\n      y:\n        rotatedLeftMiddlePoint.y +\n        (symmetricPoint.y - rotatedLeftMiddlePoint.y) / 2,\n    };\n    const height =\n      typeof item.height === \"number\" ? item.height : itemWH.height;\n    item.height = height;\n    item.width = Math.round(newWidth);\n    item.top = Math.round(newCenter.y - height / 2);\n    item.left = Math.round(newCenter.x - newWidth / 2);\n  }\n}\n","/*\n\n * @Date: 2021-07-26 10:55:23\n * @LastEditors: \n * @LastEditTime: 2021-07-26 11:12:23\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\resizeHandler\\cursor.ts\n */\n\nimport { directionArr } from \"./state\";\n\nconst initialAngle: Record<string, number> = {\n  lt: 0,\n  t: 45,\n  rt: 90,\n  r: 135,\n  rb: 180,\n  b: 225,\n  lb: 270,\n  l: 315,\n};\n\nconst angleToCursor = [\n  { start: 338, end: 23, cursor: \"nw\" },\n  { start: 23, end: 68, cursor: \"n\" },\n  { start: 68, end: 113, cursor: \"ne\" },\n  { start: 113, end: 158, cursor: \"e\" },\n  { start: 158, end: 203, cursor: \"se\" },\n  { start: 203, end: 248, cursor: \"s\" },\n  { start: 248, end: 293, cursor: \"sw\" },\n  { start: 293, end: 338, cursor: \"w\" },\n];\n\nfunction mod360(deg: number) {\n  return (deg + 360) % 360;\n}\n\nexport function getCursor(curRotate: number) {\n  const rotate = mod360(curRotate);\n  const result: Record<string, string> = {};\n  let lastMatchIndex = -1;\n  directionArr.forEach((point) => {\n    const angle = mod360(initialAngle[point] + rotate);\n    const len = angleToCursor.length;\n    while (true) {\n      lastMatchIndex = (lastMatchIndex + 1) % len;\n      const angleLimit = angleToCursor[lastMatchIndex];\n      if (angle < 23 || angle >= 338) {\n        result[point] = \"nw-resize\";\n        return;\n      }\n      if (angleLimit.start <= angle && angle < angleLimit.end) {\n        result[point] = angleLimit.cursor + \"-resize\";\n        return;\n      }\n    }\n  });\n\n  return result;\n}\n","import { RefObject, useMemo } from \"react\";\nimport { IBlockType } from \"../store/storetype\";\nimport { deepCopy, getContainer } from \"../utils\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport styles from \"../../index.less\";\nimport UserConfig from \"../../config\";\nimport { getRect } from \"./calcWithRotate\";\nimport { directionArr, DirectionType, resizeState } from \"./state\";\nimport { getCursor } from \"./cursor\";\ninterface BlockResizerProps {\n  data: IBlockType;\n  rect: RefObject<HTMLDivElement>;\n  config: UserConfig;\n}\n\nconst onMouseDown = (\n  e: React.MouseEvent,\n  direction: DirectionType,\n  item: IBlockType,\n  ref: RefObject<HTMLDivElement>,\n  config: UserConfig\n) => {\n  e.stopPropagation();\n  const store = config.getStore();\n  resizeState.isResize = true;\n  resizeState.item = item;\n  resizeState.startX = e.clientX;\n  resizeState.startY = e.clientY;\n  resizeState.direction = direction;\n  resizeState.ref = ref;\n  resizeState.current = store.getIndex();\n  resizeState.currentTarget = e.nativeEvent.target as HTMLDivElement;\n  const curDiv = resizeState.ref.current;\n  const container = getContainer();\n  if (!container) {\n    return;\n  }\n  if (curDiv && ref.current) {\n    const containerRect = container.getBoundingClientRect();\n    const scale = config.getScaleState().value;\n    const centerX = curDiv.offsetLeft + curDiv.offsetWidth / 2;\n    const centerY = curDiv.offsetTop + curDiv.offsetHeight / 2;\n    const poffsetLeft =\n      resizeState.currentTarget.getBoundingClientRect().left -\n      containerRect.left;\n    const poffsetTop =\n      resizeState.currentTarget.getBoundingClientRect().top - containerRect.top;\n    //点相对于画布位置 未缩放\n    const curPosition = {\n      x: poffsetLeft / scale,\n      y: poffsetTop / scale,\n    };\n    resizeState.symmetricPoint = {\n      x: centerX - (curPosition.x - centerX),\n      y: centerY - (curPosition.y - centerY),\n    };\n    resizeState.curPosition = curPosition;\n  }\n};\n\nexport const resizerMouseUp = (config: UserConfig) => {\n  resizeState.isResize = false;\n  resizeState.item = null;\n  const store = config.getStore();\n  if (resizeState.current) {\n    const endindex = store.getIndex();\n    store\n      .getStoreList()\n      .splice(resizeState.current, endindex - resizeState.current);\n    store.setIndex(resizeState.current);\n  }\n  resizeState.current = 0;\n};\n\n/**\n *\n * 无旋转时计算函数\n * @param {IBlockType} v\n * @param {number} durX\n * @param {number} durY\n * @param {{\n * \t\tvalue: number;\n * \t\tmaxValue: number;\n * \t\tminValue: number;\n * \t}} scaleState\n */\nexport const changePosition = (\n  v: IBlockType,\n  durX: number,\n  durY: number,\n  scaleState: {\n    value: number;\n    maxValue: number;\n    minValue: number;\n  }\n) => {\n  const direction = resizeState.direction;\n  const { width, height } = resizeState.ref!.current!.getBoundingClientRect();\n  const scale = scaleState.value;\n  let tmpy = height / scale - durY;\n  let tmpx = width / scale - durX;\n  switch (direction) {\n    case \"r\":\n      v.width = width / scale + durX;\n      break;\n    case \"b\":\n      v.height = height / scale + durY;\n      break;\n    case \"l\":\n      v.left = width / scale > 0 ? v.left + durX : v.left;\n      v.width = tmpx > 0 ? tmpx : 0;\n      break;\n    case \"t\":\n      v.top = height / scale > 0 ? v.top + durY : v.top;\n      v.height = tmpy > 0 ? tmpy : 0;\n      break;\n    case \"rb\":\n      v.width = width / scale + durX;\n      v.height = height / scale + durY;\n      break;\n    case \"rt\":\n      v.width = width / scale + durX;\n      v.top = height / scale > 0 ? v.top + durY : v.top;\n      v.height = tmpy > 0 ? tmpy : 0;\n      break;\n    case \"lt\":\n      v.top = height / scale > 0 ? v.top + durY : v.top;\n      v.height = tmpy > 0 ? tmpy : 0;\n      v.left = width / scale > 0 ? v.left + durX : v.left;\n      v.width = tmpx > 0 ? tmpx : 0;\n      break;\n    case \"lb\":\n      v.left = width / scale > 0 ? v.left + durX : v.left;\n      v.width = tmpx > 0 ? tmpx : 0;\n      v.height = height / scale + durY;\n      break;\n    default:\n      break;\n  }\n};\n\nexport const resizerMouseMove = (e: React.MouseEvent, config: UserConfig) => {\n  //根据direction修改位置\n  const scaleState = config.getScaleState();\n  const store = config.getStore();\n  if (\n    resizeState.isResize &&\n    resizeState.item &&\n    resizeState.ref?.current &&\n    resizeState.currentTarget\n  ) {\n    const { clientX: moveX, clientY: moveY } = e;\n    const scale = scaleState.value;\n\n    const container = getContainer();\n    if (!container) {\n      return;\n    }\n    const containerRect = container.getBoundingClientRect();\n\n    const rotate = resizeState.item.rotate.value;\n\n    const movePoint = {\n      x: (moveX - containerRect.left) / scale,\n      y: (moveY - containerRect.top) / scale,\n    };\n\n    const itemRef = resizeState.ref.current.getBoundingClientRect();\n    const itemWH = {\n      width: itemRef.width,\n      height: itemRef.height,\n    };\n\n    const symmetricPoint = resizeState.symmetricPoint;\n    const clonedata = deepCopy(store.getData());\n    const id = resizeState.item.id;\n    const newblock: IBlockType[] = clonedata.block.map((v: IBlockType) => {\n      if (v.id === id) {\n        getRect(\n          resizeState.direction,\n          v,\n          rotate,\n          movePoint,\n          symmetricPoint,\n          itemWH\n        );\n      }\n      return v;\n    });\n    resizeState.startX = moveX;\n    resizeState.startY = moveY;\n    store.setData({ ...clonedata, block: newblock });\n  }\n};\nexport function BlockResizer(props: BlockResizerProps) {\n  const rotate = props.data.rotate.value;\n  const cursorMap = getCursor(rotate);\n  const render = useMemo(() => {\n    if (props.data.focus && props.data.resize && props.data.canDrag) {\n      return (\n        <>\n          {directionArr.map((v) => {\n            return (\n              <div\n                style={{\n                  cursor: cursorMap[v],\n                }}\n                key={v}\n                className={classnames(styles.resizepoint, styles[v])}\n                onMouseDown={(e) => {\n                  onMouseDown(e, v, props.data, props.rect, props.config);\n                }}\n                onMouseUp={() => {\n                  resizerMouseUp(props.config);\n                }}\n              ></div>\n            );\n          })}\n        </>\n      );\n    } else {\n      return null;\n    }\n  }, [cursorMap, props.config, props.data, props.rect]);\n\n  return <>{render}</>;\n}\n","/*\n\n * @Date: 2021-09-27 20:56:21\n * @LastEditors: \n * @LastEditTime: 2021-09-27 20:57:01\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\control\\state.ts\n */\n\ninterface MoveStateType {\n  startX: number;\n  startY: number;\n  fn: Function;\n  isMove: boolean;\n}\n\nexport const moveState: MoveStateType = {\n  startX: 0,\n  startY: 0,\n  fn: () => {},\n  isMove: false,\n};\n\nexport const mouseUp = () => {\n  if (moveState.isMove) {\n    moveState.isMove = false;\n  }\n};\n\nexport const controlMouseMove = (e: React.MouseEvent) => {\n  if (moveState.isMove) {\n    const diffx = e.clientX - moveState.startX;\n    const diffy = e.clientY - moveState.startY;\n    const setXy = moveState.fn;\n    if (setXy)\n      setXy((pre: { x: number; y: number }) => ({\n        x: pre.x + diffx,\n        y: pre.y + diffy,\n      }));\n    moveState.startX = e.clientX;\n    moveState.startY = e.clientY;\n  }\n};\n","/*\n\n * @Date: 2021-03-09 15:19:36\n * @LastEditors: \n * @LastEditTime: 2021-09-27 20:58:13\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\resizeHandler\\containerResizer.ts\n */\n\nimport { controlMouseMove } from \"../../components/control/state\";\nimport UserConfig from \"../../config\";\nimport { IStoreData } from \"../store/storetype\";\nimport { deepCopy } from \"../utils\";\n\nexport const containerState = {\n  isDrag: false,\n  startY: 0,\n  startIndex: 0,\n  minHeight: 0,\n};\n\nexport const containerResizer = {\n  onMousedown: (e: React.MouseEvent, config: UserConfig) => {\n    const store = config.getStore();\n    containerState.isDrag = true;\n    containerState.startY = e.clientY;\n    containerState.startIndex = store.getIndex();\n  },\n  onMouseMove: (e: React.MouseEvent, config: UserConfig) => {\n    if (containerState.isDrag) {\n      const scaleState = config.getScaleState();\n      const store = config.getStore();\n      const scale = scaleState.value;\n      const diff = ((e.clientY - containerState.startY) / scale) * 2; //可以直接使用movementy\n      const clonedata: IStoreData = deepCopy(store.getData());\n      const height = clonedata.container.height;\n      let tmpHeight = Math.round(\n        height + diff < containerState.minHeight\n          ? containerState.minHeight\n          : height + diff\n      );\n      clonedata.container.height = tmpHeight;\n      store.setData(clonedata);\n      containerState.startY = e.clientY;\n    }\n    controlMouseMove(e);\n  },\n  onMouseUp: (config: UserConfig) => {\n    if (containerState.isDrag) {\n      const store = config.getStore();\n      containerState.isDrag = false;\n      const endIndex = store.getIndex();\n      store\n        .getStoreList()\n        .splice(\n          containerState.startIndex,\n          endIndex - containerState.startIndex\n        );\n      store.setIndex(containerState.startIndex);\n    }\n  },\n};\n","/*\n\n * @Date: 2021-02-21 22:17:29\n * @LastEditors: \n * @LastEditTime: 2021-07-13 14:29:36\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\wrapperMove\\event.ts\n */\nimport { RefObject } from \"react\";\nimport { containerResizer } from \"../../core/resizeHandler/containerResizer\";\nimport { contextMenuState } from \"../../core/contextMenu\";\nimport UserConfig from \"../../config\";\n\nexport interface WrapperMoveStateProps {\n  isDrag: boolean;\n  startX: number;\n  startY: number;\n  needX: number;\n  needY: number;\n  ref: null | RefObject<HTMLDivElement>;\n}\n\nexport const wrapperMoveState: WrapperMoveStateProps = {\n  isDrag: false,\n  startX: 0,\n  startY: 0,\n  needX: 0,\n  needY: 0,\n  ref: null,\n};\n\nexport const wrapperEvent = (\n  ref: RefObject<HTMLDivElement>,\n  config: UserConfig\n) => {\n  const scale = config.getScaleState().value;\n  const store = config.getStore();\n  return {\n    onMouseDown: (e: React.MouseEvent) => {\n      // e.preventDefault();// 不能使用preventDefault 否则弹窗输入框焦点无法触发\n      contextMenuState.unmountContextMenu();\n      if (e.target !== ref.current) {\n      } else {\n        wrapperMoveState.isDrag = true;\n        wrapperMoveState.startX = e.clientX;\n        wrapperMoveState.startY = e.clientY;\n        if (ref.current) {\n          ref.current.style.cursor = \"grab\";\n          wrapperMoveState.ref = ref;\n        }\n      }\n    },\n    onMouseMove: (e: React.MouseEvent) => {\n      //e.preventDefault();\n      if (wrapperMoveState.isDrag) {\n        const diffX = e.clientX - wrapperMoveState.startX;\n        const diffY = e.clientY - wrapperMoveState.startY;\n        wrapperMoveState.needX = wrapperMoveState.needX + diffX / scale;\n        wrapperMoveState.needY = wrapperMoveState.needY + diffY / scale;\n        wrapperMoveState.startX = e.clientX;\n        wrapperMoveState.startY = e.clientY;\n\n        store.forceUpdate();\n      }\n      containerResizer.onMouseMove(e, config);\n    },\n  };\n};\nexport const wrapperMoveMouseUp = (config: UserConfig) => {\n  if (wrapperMoveState.ref && wrapperMoveState.ref.current) {\n  }\n  containerResizer.onMouseUp(config);\n  wrapperMoveState.isDrag = false;\n};\n","/*\n\n * @Date: 2021-02-21 22:17:29\n * @LastEditors: \n * @LastEditTime: 2021-07-20 11:33:12\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\IframeWrapperMove\\event.ts\n */\nimport { RefObject } from \"react\";\nimport { containerResizer } from \"../../core/resizeHandler/containerResizer\";\nimport { contextMenuState } from \"../../core/contextMenu\";\nimport UserConfig from \"../../config\";\n\nexport interface WrapperMoveStateProps {\n  isDrag: boolean;\n  startX: number;\n  startY: number;\n  needX: number;\n  needY: number;\n}\n\nexport interface WrapperMoveRef {\n  ref: null | RefObject<HTMLDivElement>;\n}\n\nexport const wrapperMoveState: WrapperMoveStateProps = {\n  isDrag: false,\n  startX: 0,\n  startY: 0,\n  needX: 0,\n  needY: 0,\n};\n\nexport const wrapperRefState: WrapperMoveRef = {\n  ref: null,\n};\n\nexport const wrapperEvent = (\n  ref: RefObject<HTMLDivElement>,\n  config: UserConfig\n) => {\n  const store = config.getStore();\n  return {\n    onMouseDown: (e: React.MouseEvent) => {\n      // e.preventDefault();// 不能使用preventDefault 否则弹窗输入框焦点无法触发\n      contextMenuState.unmountContextMenu();\n      if (e.target !== ref.current) {\n      } else {\n        wrapperMoveState.isDrag = true;\n        wrapperMoveState.startX = e.clientX;\n        wrapperMoveState.startY = e.clientY;\n        if (ref.current) {\n          ref.current.style.cursor = \"grab\";\n          wrapperRefState.ref = ref;\n        }\n      }\n    },\n    onMouseMove: (e: React.MouseEvent) => {\n      //e.preventDefault();\n      if (wrapperMoveState.isDrag) {\n        const diffX = e.clientX - wrapperMoveState.startX;\n        const diffY = e.clientY - wrapperMoveState.startY;\n        wrapperMoveState.needX = wrapperMoveState.needX + diffX;\n        wrapperMoveState.needY = wrapperMoveState.needY + diffY;\n        wrapperMoveState.startX = e.clientX;\n        wrapperMoveState.startY = e.clientY;\n\n        store.forceUpdate();\n      }\n      containerResizer.onMouseMove(e, config);\n    },\n  };\n};\nexport const wrapperMoveMouseUp = (config: UserConfig) => {\n  if (wrapperRefState.ref && wrapperRefState.ref.current) {\n    wrapperRefState.ref.current.style.cursor = \"default\";\n  }\n  containerResizer.onMouseUp(config);\n  wrapperMoveState.isDrag = false;\n};\n","/*\n\n * @Date: 2021-07-21 20:51:58\n * @LastEditors: \n * @LastEditTime: 2021-07-27 16:32:30\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\rotateHandler\\index.tsx\n */\nimport React from \"react\";\nimport { RefObject, useMemo } from \"react\";\nimport UserConfig from \"../../config\";\nimport { IBlockType, IStoreData } from \"../store/storetype\";\nimport styles from \"../../index.less\";\nimport { deepCopy } from \"../utils\";\nimport { ReloadOutlined, RotateLeftOutlined } from \"@ant-design/icons\";\n\ninterface rotateStateType {\n  startX: number;\n  startY: number;\n  item: null | IBlockType;\n  isRotate: boolean;\n  ref: RefObject<HTMLDivElement> | null;\n  current: number;\n}\n\nexport const rotateState: rotateStateType = {\n  startX: 0,\n  startY: 0,\n  item: null,\n  isRotate: false,\n  ref: null,\n  current: 0,\n};\n\nconst onMouseDown = (\n  e: React.MouseEvent,\n  item: IBlockType,\n  ref: RefObject<HTMLDivElement>,\n  config: UserConfig\n) => {\n  e.stopPropagation();\n  const store = config.getStore();\n  rotateState.isRotate = true;\n  rotateState.item = item;\n  rotateState.startX = e.clientX;\n  rotateState.startY = e.clientY;\n  rotateState.ref = ref;\n  rotateState.current = store.getIndex();\n};\n\nexport const rotateMouseMove = (e: React.MouseEvent, config: UserConfig) => {\n  const store = config.getStore();\n  if (rotateState.isRotate && rotateState.item && rotateState.ref?.current) {\n    let { clientX: moveX, clientY: moveY } = e;\n    const { startX, startY } = rotateState;\n    const rect = rotateState.ref.current.getBoundingClientRect();\n    const centerX = rect.left + rect.width / 2;\n    const centerY = rect.top + rect.height / 2;\n    const rotateDegreeBefore =\n      Math.atan2(startY - centerY, startX - centerX) / (Math.PI / 180);\n    const rotateDegreeAfter =\n      Math.atan2(moveY - centerY, moveX - centerX) / (Math.PI / 180);\n    const startRotate = rotateState.item.rotate.value;\n    const frotate = startRotate + rotateDegreeAfter - rotateDegreeBefore;\n    const clonedata = deepCopy(store.getData());\n    const id = rotateState.item.id;\n    const newblock: IBlockType[] = clonedata.block.map((v: IBlockType) => {\n      if (v.id === id) {\n        v.rotate.value = frotate;\n      }\n      return v;\n    });\n    store.setData({ ...clonedata, block: newblock });\n  }\n};\n\nexport const rotateMouseUp = (config: UserConfig) => {\n  rotateState.isRotate = false;\n  rotateState.item = null;\n  const store = config.getStore();\n  if (rotateState.current) {\n    const endindex = store.getIndex();\n    store\n      .getStoreList()\n      .splice(rotateState.current, endindex - rotateState.current);\n    store.setIndex(rotateState.current);\n  }\n  rotateState.current = 0;\n};\n\ninterface RotateResizerProps {\n  data: IBlockType;\n  rect: RefObject<HTMLDivElement>;\n  config: UserConfig;\n}\nexport function RotateResizer(props: RotateResizerProps) {\n  const render = useMemo(() => {\n    if (props.data.focus && props.data.rotate.canRotate && props.data.canDrag) {\n      return (\n        <div\n          onMouseDown={(e) => {\n            onMouseDown(e, props.data, props.rect, props.config);\n          }}\n          className={styles.rotate}\n          title={\"rotate\"}\n        >\n          <ReloadOutlined\n            style={{\n              color: \"#2196f3\",\n            }}\n          />\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }, [props.config, props.data, props.rect]);\n\n  return <>{render}</>;\n}\n\nconst resetResolve = (\n  e: React.MouseEvent,\n  item: IBlockType,\n  config: UserConfig\n) => {\n  e.stopPropagation();\n  const store = config.getStore();\n  const clonedata: IStoreData = deepCopy(store.getData());\n  clonedata.block.forEach((v) => {\n    if (v.id === item.id) {\n      v.rotate.value = 0;\n    }\n  });\n  store.setData(clonedata);\n};\n\nexport function RotateReset(props: RotateResizerProps) {\n  const render = useMemo(() => {\n    if (props.data.focus && props.data.rotate.canRotate && props.data.canDrag) {\n      return (\n        <div\n          onMouseDown={(e) => {\n            resetResolve(e, props.data, props.config);\n          }}\n          className={styles.rotatereset}\n          title={\"rotate reset\"}\n        >\n          <RotateLeftOutlined />\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }, [props.config, props.data]);\n\n  return <>{render}</>;\n}\n","/*\n\n * @Date: 2021-12-30 23:02:30\n * @LastEditors: \n * @LastEditTime: 2021-12-31 00:13:09\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\markline\\state.ts\n */\nexport interface RealStyleType {\n  [x: string]: number;\n  left: number;\n  width: number;\n  height: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\ninterface MarklineStateType {\n  cache: null | Record<string, RealStyleType>;\n  sortLeft: null | Array<RealStyleType>;\n  sortTop: null | Array<RealStyleType>;\n  sortRight: null | Array<RealStyleType>;\n  sortBottom: null | Array<RealStyleType>;\n}\nexport const marklineState: MarklineStateType = {\n  cache: null,\n  sortLeft: null,\n  sortTop: null,\n  sortRight: null,\n  sortBottom: null,\n};\n","/*\n\n * @Date: 2021-08-10 20:26:44\n * @LastEditors: \n * @LastEditTime: 2021-08-16 20:29:58\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\timeLine\\timelineItem.tsx\n */\nimport React, { CSSProperties } from \"react\";\nimport { AnimateItem } from \"../../core/store/storetype\";\nimport { randomColor } from \"../../core/utils\";\n\nexport const iter = 500;\nexport const itemHeight = 25;\nexport const interval = 19;\nconst diff = 6;\nconst square = 2.5;\nconst times = interval + 1;\n\n// 需要根据animate属性渲染div\n\nexport interface TimeLineItemProps {\n  animate: AnimateItem[];\n}\ninterface MoveStateTypes {\n  startX: number;\n  isMove: boolean;\n  uid: string;\n}\n\nconst moveState: MoveStateTypes = {\n  startX: 0,\n  isMove: false,\n  uid: \"\",\n};\ninterface resizeStateTypes extends MoveStateTypes {\n  left: boolean;\n}\nlet currentMoveItemId = \"\";\n\nconst resizeState: resizeStateTypes = {\n  startX: 0,\n  isMove: false,\n  uid: \"\",\n  left: true,\n};\nconst resizeMouseDown = (\n  e: React.MouseEvent<HTMLDivElement, MouseEvent>,\n  v: AnimateItem,\n  left: boolean\n) => {\n  e.stopPropagation();\n  resizeState.startX = e.clientX;\n  resizeState.uid = v.uid;\n  resizeState.isMove = true;\n  resizeState.left = left;\n};\n\nexport const TimeLineItemMouseMove = function (\n  e: React.MouseEvent<HTMLDivElement, MouseEvent>,\n  animate: AnimateItem[],\n  forceUpdate: React.Dispatch<React.SetStateAction<number>>\n) {\n  if (moveState.isMove) {\n    //修改源属性\n    const diff = e.clientX - moveState.startX;\n    animate.forEach((v) => {\n      if (v.uid === moveState.uid) {\n        const f = parseFloat((v.animationDelay + diff / times).toFixed(1));\n        v.animationDelay = f < 0 ? 0 : f;\n        forceUpdate((p) => p + 1);\n      }\n    });\n    moveState.startX = e.clientX;\n  } else if (resizeState.isMove) {\n    const diff = e.clientX - resizeState.startX;\n    if (resizeState.left) {\n      animate.forEach((v) => {\n        if (v.uid === resizeState.uid) {\n          const count =\n            v.animationIterationCount === \"infinite\"\n              ? 500\n              : parseInt(v.animationIterationCount);\n          const f2 = parseFloat((v.animationDelay + diff / times).toFixed(1));\n          const f = parseFloat(\n            (v.animationDuration - (f2 - v.animationDelay) / count).toFixed(1)\n          );\n          v.animationDuration = f2 < 0 ? v.animationDuration : f < 0 ? 0 : f;\n          v.animationDelay = f2 < 0 ? 0 : f2;\n          forceUpdate((p) => p + 1);\n        }\n      });\n    } else {\n      animate.forEach((v) => {\n        if (v.uid === resizeState.uid) {\n          const count =\n            v.animationIterationCount === \"infinite\"\n              ? 500\n              : parseInt(v.animationIterationCount);\n          const f = parseFloat(\n            (v.animationDuration + diff / count / times).toFixed(1)\n          );\n          v.animationDuration = f < 0 ? 0 : f;\n          forceUpdate((p) => p + 1);\n        }\n      });\n    }\n    resizeState.startX = e.clientX;\n  }\n};\nexport const TimeLineItemMouseOver = function () {\n  moveState.isMove = false;\n  moveState.startX = 0;\n  moveState.uid = \"\";\n  resizeState.isMove = false;\n  resizeState.startX = 0;\n  resizeState.uid = \"\";\n};\nexport const resetCurrentMoveItemId = () => {\n  currentMoveItemId = \"\";\n};\n\nconst commonCss: CSSProperties = {\n  transform: `rotate(45deg)`,\n  height: square * 2,\n  width: square * 2,\n  position: \"absolute\",\n  background: \"rgba(0, 0, 0, 0.85)\",\n  top: (itemHeight - diff) / 2 - square,\n  cursor: \"e-resize\",\n};\n\nconst bgColorCache: Record<string, string> = {};\n\nexport function TimeLineItem(props: TimeLineItemProps) {\n  return (\n    <>\n      {props.animate.map((v) => {\n        const left = v.animationDelay * times + interval;\n        const repeat =\n          v.animationIterationCount === \"infinite\"\n            ? iter\n            : parseInt(v.animationIterationCount);\n        const width = v.animationDuration * times * repeat;\n\n        if (!bgColorCache[v.uid]) {\n          bgColorCache[v.uid] = randomColor();\n        }\n        return (\n          <div\n            key={v.uid}\n            onMouseDown={(e) => {\n              moveState.startX = e.clientX;\n              moveState.uid = v.uid;\n              moveState.isMove = true;\n              currentMoveItemId = v.uid;\n            }}\n            className=\"yh-timeline-item-mainblock\"\n            style={{\n              position: \"absolute\",\n              top: diff / 2,\n              left: left,\n              width: width,\n              height: itemHeight - diff,\n              background: bgColorCache[v.uid],\n              zIndex: 1,\n              cursor: \"move\",\n              borderRadius: \"4px\",\n              opacity: v.uid === currentMoveItemId ? 1 : 0.7,\n            }}\n          >\n            {v.uid === currentMoveItemId && (\n              <>\n                <div\n                  className=\"yh-timeline-item-left\"\n                  style={{ ...commonCss, left: -square }}\n                  onMouseDown={(e) => {\n                    resizeMouseDown(e, v, true);\n                  }}\n                ></div>\n                <div\n                  className=\"yh-timeline-item-right\"\n                  style={{ ...commonCss, right: -square }}\n                  onMouseDown={(e) => {\n                    resizeMouseDown(e, v, false);\n                  }}\n                ></div>\n              </>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/*\n\n * @Date: 2021-08-27 10:20:23\n * @LastEditors: \n * @LastEditTime: 2022-04-29 23:23:13\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\locale\\en.ts\n */\n\nimport { zhCN } from \"./zh-CN\";\n\nexport const en: typeof zhCN = {\n  \"timeline.name\": \"Component name\",\n  \"contorl.popup.absolute\":\n    \"Are you sure to change to absolutely positioned element\",\n  \"contorl.popup.static\": \"Are you sure to change to static positioned element\",\n  \"contorl.absolute\": \"Change to absolute\",\n  \"contorl.static\": \"Change to static\",\n  \"control.popup.delete\": \"Are you sure to delete\",\n  \"control.delete\": \"Delete\",\n  \"control.focus\": \"Focus\",\n  \"control.no-component\": \"No components\",\n  \"modal.new\": \"New modal\",\n  \"modal.control\": \"Control modal\",\n  \"modal.popup.exit\":\n    \"Please exit the edit modal and open the configuration again\",\n  \"modal.popup.edit\": \"Switch to this modal and edit it?\",\n  \"modal.popup.save\": \"Please save the modal and edit another modal\",\n  \"modal.popup.notfond\": \"Can not found {name} modal\",\n  \"modal.popup.repeat\": \"Duplicate name {name} already exists\",\n  \"modal.popup.remove\": \"Please save the modal before deleting\",\n  \"modal.popup.nomodal\": \"No modal\",\n  \"modal.popup.name\": \"Please enter modal name\",\n  \"modal.name\": \"Modal name\",\n  \"modal.control.remove\": \"Delete click to delete the effect of the modal\",\n  edit: \"Edit\",\n  yes: \"Ok\",\n  no: \"Cancel\",\n  \"right.noprops\": \"No properties have been configured\",\n  \"right.global\": \"Global config\",\n  \"right.containerheight\": \"Container height\",\n  \"right.containerwidth\": \"Container width\",\n  \"right.containerColor\": \"Container background color\",\n  \"right.bodyColor\": \"Body background color\",\n  \"right.fontSize\": \"Container font size\",\n  \"right.lineHeight\": \"Container line height\",\n  title: \"Title\",\n  description: \"Description\",\n  \"system.setting\": \"System Settings\",\n  \"settings.openabsorb\": \"Turn on adsorption\",\n  on: \"on\",\n  off: \"off\",\n  \"settings.absorbindent\": \"Adsorption spacing\",\n  \"settings.min\": \"Canvas zoom min\",\n  \"settings.max\": \"Canvas zoom max\",\n  \"settings.autofocus\": \"Auto scroll focus on the animation panel\",\n  \"error.minmax\":\n    \"The maximum value should be greater than or equal to the minimum value\",\n  \"settings.marklineColor\": \"Markline color\",\n  \"settings.marklineStyle\": \"Markline style\",\n  \"settings.containerOverflow\": \"Container Overflow\",\n  \"settings.Layout\": \"Layout config\",\n};\n","/*\n\n * @Date: 2021-08-27 10:20:15\n * @LastEditors: \n * @LastEditTime: 2022-04-29 23:19:30\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\locale\\zh-CN.ts\n */\nexport const zhCN = {\n  \"timeline.name\": \"组件名称\",\n  \"contorl.popup.absolute\": \"确认变更为绝对定位吗\",\n  \"contorl.popup.static\": \"确认变更为静态定位吗\",\n  \"contorl.absolute\": \"切换绝对定位\",\n  \"contorl.static\": \"切换静态定位\",\n  \"control.popup.delete\": \"确认删除吗\",\n  \"control.delete\": \"删除\",\n  \"control.focus\": \"选中聚焦\",\n  \"control.no-component\": \"暂无组件\",\n  \"modal.new\": \"新增弹窗\",\n  \"modal.control\": \"弹窗配置\",\n  \"modal.popup.exit\": \"请退出编辑弹窗后再打开该配置\",\n  \"modal.popup.edit\": \"是否切换至该弹窗并进行编辑?\",\n  \"modal.popup.save\": \"请保存弹窗后编辑其他弹窗\",\n  \"modal.popup.notfond\": \"未找到该弹窗 {name}\",\n  \"modal.popup.repeat\": \"已有重名弹窗 {name}\",\n  \"modal.popup.remove\": \"请保存弹窗后再删除\",\n  \"modal.popup.nomodal\": \"暂时没有弹窗\",\n  \"modal.popup.name\": \"请输入弹窗名称\",\n  \"modal.name\": \"弹窗名称\",\n  \"modal.control.remove\": \"取消点击删除弹窗\",\n  edit: \"编辑\",\n  yes: \"确定\",\n  no: \"取消\",\n  \"right.noprops\": \"还没有配置属性\",\n  \"right.global\": \"全局设置\",\n  \"right.containerheight\": \"容器高度\",\n  \"right.containerwidth\": \"容器宽度\",\n  \"right.containerColor\": \"容器底色\",\n  \"right.bodyColor\": \"body底色\",\n  \"right.fontSize\": \"容器字号\",\n  \"right.lineHeight\": \"容器行高\",\n  title: \"标题\",\n  description: \"描述\",\n  \"system.setting\": \"系统设置\",\n  \"settings.openabsorb\": \"开启吸附\",\n  on: \"开\",\n  off: \"关\",\n  \"settings.absorbindent\": \"吸附间距\",\n  \"settings.min\": \"画布缩放最小值\",\n  \"settings.max\": \"画布缩放最大值\",\n  \"settings.autofocus\": \"动画面板点击自动滚动聚焦\",\n  \"error.minmax\": \"最大值应大于等于最小值\",\n  \"settings.marklineColor\": \"辅助线颜色\",\n  \"settings.marklineStyle\": \"辅助线样式\",\n  \"settings.containerOverflow\": \"容器边界外不显示元素\",\n  \"settings.Layout\": \"外观设置\",\n};\n","/*\n\n * @Date: 2021-08-27 10:20:38\n * @LastEditors: \n * @LastEditTime: 2021-09-27 18:08:49\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\locale\\index.tsx\n */\n\nimport React from \"react\";\n\nimport { FormattedMessage } from \"react-intl\";\nimport { UserConfig } from \"..\";\nimport { en } from \"./en\";\nimport { zhCN } from \"./zh-CN\";\n\nexport const localeMap = {\n  \"zh-CN\": zhCN,\n  en,\n};\nexport type localeKey = keyof typeof localeMap;\n\nexport { en } from \"./en\";\nexport { zhCN } from \"./zh-CN\";\n\nexport const replaceLocale = (\n  id: string,\n  msg: string,\n  config: UserConfig,\n  param?: any,\n  paramString?: string\n) => {\n  if (config.i18n) {\n    // console.log('====================================');\n    // console.log(id, msg, config, param, paramString);\n    // console.log('====================================');\n    if (paramString) {\n      return (\n        <FormattedMessage\n          id={id}\n          defaultMessage={paramString}\n          values={param}\n        ></FormattedMessage>\n      );\n    }\n    return <FormattedMessage id={id} defaultMessage={msg}></FormattedMessage>;\n  }\n  return msg;\n};\n","/*\n\n * @Date: 2021-08-09 15:15:25\n * @LastEditors: \n * @LastEditTime: 2022-04-23 18:34:46\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\timeLine\\timeline.tsx\n */\nimport deepcopy from \"deepcopy\";\nimport React, {\n  CSSProperties,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  SortableContainer,\n  SortableElement,\n  SortableHandle,\n  SortEnd,\n} from \"react-sortable-hoc\";\nimport UserConfig from \"../../config\";\nimport { IBlockType, IStoreData } from \"../../core/store/storetype\";\nimport { arrayMove } from \"../../core/utils\";\nimport {\n  DeleteOutlined,\n  EyeInvisibleOutlined,\n  EyeOutlined,\n  MenuOutlined,\n  PauseCircleOutlined,\n  PlayCircleOutlined,\n  ReloadOutlined,\n} from \"@ant-design/icons\";\nimport {\n  TimeLineItem,\n  itemHeight,\n  TimeLineItemMouseMove,\n  TimeLineItemMouseOver,\n  interval,\n  iter,\n  resetCurrentMoveItemId,\n} from \"./timelineItem\";\nimport { specialCoList } from \"../../core/utils/special\";\nimport { replaceLocale } from \"../../locale\";\nimport { Popconfirm } from \"antd\";\n\nexport interface TimeLineProps {\n  style?: CSSProperties;\n  classes?: string;\n  config: UserConfig;\n}\nexport interface TimeLineConfigType {\n  autoFocus: boolean;\n  scrollDom: null | HTMLDivElement;\n}\nexport interface TimeLineNeedleConfigType {\n  status: \"stop\" | \"start\" | \"pause\";\n  runFunc: Function;\n  resetFunc: Function;\n  pauseFunc: Function;\n  current: number;\n  isRefresh: boolean;\n  setNeedle: Function;\n}\n\nconst animateTicker = new Array(iter).fill(1).map((_, y) => y);\n\nconst DragHandle = SortableHandle(() => <MenuOutlined />);\n\nconst leftWidth = 200;\nlet WAIT = false;\nconst widthInterval = interval * 10 + 9;\nconst ruleWidth = (widthInterval * iter) / 10 + 10;\nconst borderColor = \"1px solid rgb(204, 204, 204)\";\n\nconst SortableItem = SortableElement(\n  ({\n    value,\n  }: {\n    value: {\n      value: IBlockType;\n      config: UserConfig;\n    };\n  }) => (\n    <div\n      style={{\n        userSelect: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n        zIndex: 101,\n      }}\n    >\n      <div\n        className=\"yh-timeline-item\"\n        onClick={() => {\n          const store = value.config.getStore();\n          const clone = deepcopy(store.getData());\n          clone.block.forEach((v) => {\n            if (\n              v.id === value.value.id &&\n              !specialCoList.includes(value.value.name)\n            ) {\n              v.focus = true;\n            } else {\n              v.focus = false;\n            }\n          });\n          store.setData(clone);\n        }}\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          width: leftWidth,\n          overflow: \"auto\",\n          minWidth: leftWidth,\n          borderRight: borderColor,\n          borderBottom: borderColor,\n          backgroundColor: value.value.focus ? \"#76767680\" : \"initial\",\n          cursor: \"pointer\",\n        }}\n      >\n        <div style={{ width: 30, cursor: \"move\" }}>\n          {/*  @ts-ignore */}\n          <DragHandle></DragHandle>\n        </div>\n        <div>\n          {\n            value.config.getComponentRegister().getMap()[value.value.name]\n              .display\n          }\n        </div>\n        <div>{value.value.id.slice(-6)}</div>\n        <div\n          style={{\n            marginLeft: 5,\n            flex: 1,\n            textAlign: \"right\",\n            paddingRight: 5,\n          }}\n        >\n          <span\n            style={{ marginRight: 5 }}\n            onClick={() => {\n              const store = value.config.getStore();\n              const clone = deepcopy(store.getData());\n              clone.block = clone.block.map((v) => {\n                if (\n                  v.id === value.value.id &&\n                  !specialCoList.includes(value.value.name)\n                ) {\n                  v.canSee = !v.canSee;\n                  return v;\n                }\n                return v;\n              });\n              store.setData(clone);\n            }}\n          >\n            {value.value.canSee ? <EyeOutlined /> : <EyeInvisibleOutlined />}\n          </span>\n          <Popconfirm\n            title={replaceLocale(\n              \"control.popup.delete\",\n              \"确认删除么\",\n              value.config\n            )}\n            onConfirm={() => {\n              const store = value.config.getStore();\n              const clone = deepcopy(store.getData());\n              clone.block = clone.block.filter((v) => {\n                return !(\n                  v.id === value.value.id &&\n                  !specialCoList.includes(value.value.name)\n                );\n              });\n              store.setData(clone);\n            }}\n            okText={replaceLocale(\"yes\", \"确定\", value.config)}\n            cancelText={replaceLocale(\"no\", \"取消\", value.config)}\n          >\n            <DeleteOutlined />\n          </Popconfirm>\n        </div>\n      </div>\n    </div>\n  )\n);\n\nconst SortableList = SortableContainer(\n  ({\n    items,\n  }: {\n    items: {\n      data: IBlockType[];\n      config: UserConfig;\n    };\n  }) => {\n    return (\n      <div>\n        {items.data.map((value, index: number) => (\n          // @ts-ignore\n          <SortableItem\n            key={value.id}\n            index={index}\n            value={{ value, config: items.config }}\n          />\n        ))}\n      </div>\n    );\n  }\n);\n\nlet cacheBlock: IBlockType[] = [];\n\nconst needleWidth = 2;\nconst initialLeft = 20 - needleWidth / 2;\nconst needleHeadWidth = 15;\nconst needleHeadHeight = 22;\n\nlet timer: number | null = null;\n\nconst needleState = {\n  isDrag: false,\n  startX: 0,\n  origin: 0,\n};\n\nconst needleHeadEvent = (\n  setNeedle: React.Dispatch<React.SetStateAction<number>>,\n  config: UserConfig\n) => {\n  return {\n    onMouseDown: async (e: React.MouseEvent) => {\n      e.persist();\n      e.stopPropagation();\n      if (\n        config.timelineNeedleConfig.status === \"start\" ||\n        !config.timelineNeedleConfig.isRefresh\n      ) {\n        let init = initialLeft;\n        setNeedle((p) => {\n          init = p;\n          return p;\n        });\n        await config.timelineNeedleConfig.resetFunc();\n        // 重置后需要再回正\n        setNeedle(init);\n      }\n      setNeedle((p) => {\n        needleState.origin = p;\n        return p;\n      });\n      needleState.isDrag = true;\n      needleState.startX = e.clientX;\n      config.blockForceUpdate.forEach((v) => {\n        v();\n      });\n      if (timer) {\n        window.clearInterval(timer);\n      }\n    },\n  };\n};\nexport const needleMoveEvent = (config: UserConfig) => {\n  const setNeedle = config.timelineNeedleConfig.setNeedle;\n  return {\n    onMouseMove: async (e: React.MouseEvent) => {\n      if (needleState.isDrag) {\n        e.persist(); //不加这个很容易导致clientx为null\n        const diff = e.clientX - needleState.startX;\n        setNeedle(() => {\n          const shouldMoveX = needleState.origin + diff;\n          if (shouldMoveX < initialLeft) {\n            config.timelineNeedleConfig.current = 0;\n            return initialLeft;\n          } else if (shouldMoveX > ruleWidth) {\n            config.timelineNeedleConfig.current =\n              (ruleWidth - initialLeft) / 20;\n            return ruleWidth;\n          } else {\n            config.timelineNeedleConfig.current =\n              (shouldMoveX - initialLeft) / 20;\n            return shouldMoveX;\n          }\n        });\n        config.timelineNeedleConfig.status = \"stop\";\n        config.blockForceUpdate.forEach((v) => {\n          v();\n        });\n      }\n    },\n    onMouseUp: () => {\n      needleState.isDrag = false;\n      needleState.startX = 0;\n    },\n  };\n};\n\nconst needleDoubleClick = (config: UserConfig) => {\n  return {\n    onDoubleClick: async (e: React.MouseEvent) => {\n      const dom = config.timelineConfig.scrollDom;\n      if (dom) {\n        const setNeedle = config.timelineNeedleConfig.setNeedle;\n        const left = dom.getBoundingClientRect().left;\n        const mouseLeft = e.clientX + dom.scrollLeft;\n        e.persist();\n        e.stopPropagation();\n        await config.timelineNeedleConfig.resetFunc();\n        config.timelineNeedleConfig.status = \"stop\";\n        let diff = mouseLeft - left;\n        if (diff <= initialLeft) {\n          config.timelineNeedleConfig.current = 0;\n          diff = initialLeft;\n        } else if (diff > ruleWidth) {\n          config.timelineNeedleConfig.current = (ruleWidth - initialLeft) / 20;\n          diff = ruleWidth;\n        } else {\n          config.timelineNeedleConfig.current = (diff - initialLeft) / 20;\n        }\n        setNeedle(diff);\n        config.blockForceUpdate.forEach((v) => {\n          v();\n        });\n        if (timer) {\n          window.clearInterval(timer);\n        }\n      }\n    },\n  };\n};\n\nexport function TimeLine(props: TimeLineProps) {\n  const store = props.config.getStore();\n  const data = store.getData().block;\n  const forceUpdate = useState(0)[1];\n  const onSortEnd = (sort: SortEnd) => {\n    const { oldIndex, newIndex } = sort;\n    const newblocks: IBlockType[] = arrayMove(data, oldIndex, newIndex);\n    const isEdit = props.config.getStore().isEdit();\n    if (isEdit) {\n      const firstType = newblocks[0].name;\n      if (firstType !== \"modalMask\") {\n        return;\n      }\n    }\n    const store = props.config.getStore();\n    const cloneData: IStoreData = deepcopy(store.getData());\n    cloneData.block = newblocks;\n    store.setData(cloneData);\n  };\n\n  const [state, setState] = useState(0);\n  const [scrollx, setScrollx] = useState(0);\n\n  const content = (\n    <div style={{ width: \"100%\", height: \"100%\", overflow: \"hidden\" }}>\n      <div style={{ transform: `translate(0, -${state}px)` }}>\n        {/*  @ts-ignore */}\n        <SortableList\n          distance={2}\n          useDragHandle\n          items={{\n            data,\n            config: props.config,\n          }}\n          onSortEnd={onSortEnd}\n          axis=\"y\"\n        ></SortableList>\n      </div>\n    </div>\n  );\n\n  const renderData = useMemo(() => {\n    if (props.config.waitAnimate) {\n      return cacheBlock;\n    }\n    cacheBlock = data;\n    return cacheBlock;\n  }, [data, props.config.waitAnimate]);\n\n  const ref = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (ref.current) {\n      props.config.timelineConfig.scrollDom = ref.current;\n    }\n  }, [props.config]);\n\n  const [needle, setNeedle] = useState(initialLeft);\n\n  const resetAnimate = async () => {\n    // 重置动画后才能调整delay\n    return new Promise<void>((res) => {\n      if (!WAIT) {\n        WAIT = true;\n        props.config.waitAnimate = true;\n        const cache = data.map((v) => {\n          return v.animate;\n        });\n        const cloneData: IStoreData = deepcopy(store.getData());\n        cloneData.block.forEach((v) => {\n          v.animate = [];\n        });\n        store.setData(cloneData);\n        setTimeout(() => {\n          props.config.timelineNeedleConfig.status = \"pause\";\n          const cloneData: IStoreData = deepcopy(store.getData());\n          cloneData.block.forEach((v, i) => {\n            v.animate = cache[i];\n          });\n          WAIT = false;\n          props.config.waitAnimate = false;\n          store.setData(cloneData);\n          store.cleanLast();\n          res();\n        });\n      }\n    });\n  };\n\n  const refreshBlock = () => {\n    const cloneData: IStoreData = deepcopy(store.getData());\n    store.setData(cloneData);\n    store.cleanLast();\n  };\n\n  const needlePlay = async () => {\n    if (timer) {\n      window.clearInterval(timer);\n    }\n    //判断如果status不是pause，则要执行reset\n    if (props.config.timelineNeedleConfig.status !== \"pause\") {\n      await needleReset();\n    }\n    props.config.timelineNeedleConfig.status = \"start\";\n    props.config.timelineNeedleConfig.isRefresh = false;\n    refreshBlock();\n    setTimeout(() => {\n      timer = window.setInterval(() => {\n        setNeedle((pre) => {\n          if (pre < ruleWidth) {\n            props.config.timelineNeedleConfig.current =\n              (pre - initialLeft) / 20;\n            return pre + 2;\n          } else {\n            if (timer) {\n              window.clearInterval(timer);\n            }\n            return pre;\n          }\n        });\n        //\tprops.config.blockForceUpdate.forEach((v) => v());\n      }, 100);\n    });\n  };\n\n  const needleReset = async (needResetAnimate = true) => {\n    if (timer) {\n      window.clearInterval(timer);\n    }\n    props.config.timelineNeedleConfig.status = \"start\";\n    if (needResetAnimate) {\n      await resetAnimate();\n    }\n    return new Promise<void>((res) => {\n      setTimeout(() => {\n        props.config.timelineNeedleConfig.status = \"pause\";\n        props.config.timelineNeedleConfig.current = 0;\n        props.config.timelineNeedleConfig.isRefresh = true;\n        setNeedle(initialLeft);\n        refreshBlock();\n        res();\n      });\n    });\n  };\n\n  const needlePause = () => {\n    props.config.timelineNeedleConfig.status = \"pause\";\n    props.config.timelineNeedleConfig.isRefresh = false;\n    if (timer) {\n      window.clearInterval(timer);\n    }\n    refreshBlock();\n  };\n\n  props.config.timelineNeedleConfig.resetFunc = needleReset;\n  props.config.timelineNeedleConfig.runFunc = needlePlay;\n  props.config.timelineNeedleConfig.pauseFunc = needlePause;\n  props.config.timelineNeedleConfig.setNeedle = setNeedle;\n  return (\n    <div\n      className={`${props.classes} ant-menu yh-timeline-wrap`}\n      style={{\n        width: \"100%\",\n        position: \"absolute\",\n        height: \"150px\",\n        bottom: \"0\",\n        zIndex: 100,\n        display: \"flex\",\n        flexDirection: \"column\",\n        ...props.style,\n      }}\n      onMouseDown={(e) => {\n        const dom = e.target as HTMLDivElement;\n        if (\n          !(\n            dom.className &&\n            dom.className.indexOf &&\n            dom.className.indexOf(\"yh-timeline-item-mainblock\") > -1\n          )\n        ) {\n          resetCurrentMoveItemId();\n        }\n      }}\n    >\n      <>\n        <div\n          style={{\n            display: \"flex\",\n            lineHeight: \"24px\",\n            paddingLeft: 10,\n            height: \"100%\",\n          }}\n        >\n          <div>\n            <div\n              style={{\n                width: leftWidth,\n                borderRight: \"1px solid #dadada\",\n                minWidth: leftWidth,\n                borderBottom: \"1px solid #dadada\",\n                height: itemHeight,\n                display: \"flex\",\n              }}\n            >\n              {replaceLocale(\"timeline.name\", \"组件名称\", props.config)}\n              <div\n                style={{\n                  flex: 1,\n                  textAlign: \"right\",\n                }}\n              >\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    cursor: \"pointer\",\n                    marginRight: \"10px\",\n                  }}\n                  title=\"reset\"\n                >\n                  <ReloadOutlined\n                    onClick={() => {\n                      needleReset();\n                    }}\n                  />\n                </span>\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    cursor: \"pointer\",\n                    marginRight: \"10px\",\n                  }}\n                  title=\"pause\"\n                >\n                  <PauseCircleOutlined\n                    onClick={() => {\n                      needlePause();\n                    }}\n                  />\n                </span>\n                <span\n                  title=\"play\"\n                  style={{\n                    display: \"inline-block\",\n                    marginRight: \"20px\",\n                    cursor: \"pointer\",\n                  }}\n                  onClick={() => {\n                    needlePlay();\n                  }}\n                >\n                  <PlayCircleOutlined />\n                </span>\n              </div>\n            </div>\n            {content}\n          </div>\n\n          <div\n            className=\"yh-timeline-needle-head-wrap\"\n            style={{\n              width: `calc(100% -  ${leftWidth}px)`,\n              borderBottom: \"1px solid #dadada\",\n              overflow: \"hidden\",\n              position: \"relative\",\n              cursor: \"crosshair\",\n            }}\n            {...needleDoubleClick(props.config)}\n          >\n            <div\n              className=\"yh-timeline-needle-head\"\n              style={{\n                position: \"absolute\",\n                transform: `translate(-${scrollx}px, 0px)`,\n                width: needleHeadWidth,\n                height: needleHeadHeight,\n                backgroundColor: \"#ff5722\",\n                zIndex: 3,\n                left: needle - needleHeadWidth / 2,\n                transition: \"left linear\",\n                willChange: \"left\",\n                borderRadius: \"2px\",\n                cursor: \"col-resize\",\n              }}\n              {...needleHeadEvent(setNeedle, props.config)}\n            ></div>\n            <div\n              className=\"yh-timeline-needle\"\n              style={{\n                position: \"absolute\",\n                transform: `translate(-${scrollx}px, 0px)`,\n                width: needleWidth,\n                height: \"100%\",\n                backgroundColor: \"red\",\n                zIndex: 2,\n                left: needle,\n                transition: \"left linear\",\n                willChange: \"left\",\n                pointerEvents: \"none\",\n              }}\n            ></div>\n            <div\n              style={{\n                display: \"flex\",\n                height: itemHeight,\n                alignItems: \"flex-end\",\n                borderBottom: borderColor,\n                width: ruleWidth,\n                overflow: \"hidden\",\n                transform: `translate(-${scrollx}px, 0px)`,\n              }}\n            >\n              {animateTicker.map((v) => {\n                if (v % 10 === 0) {\n                  return (\n                    <div\n                      key={v}\n                      style={{\n                        marginLeft: interval,\n                        height: \"8px\",\n                        borderLeft: borderColor,\n                        position: \"relative\",\n                      }}\n                    >\n                      <div\n                        style={{\n                          position: \"absolute\",\n                          top: \"-20px\",\n                          transform: \"translate(-50%, 0px)\",\n                        }}\n                      >\n                        {v}\n                      </div>\n                    </div>\n                  );\n                } else {\n                  return (\n                    <div\n                      key={v}\n                      style={{\n                        marginLeft: interval,\n                        height: \"6px\",\n                        borderLeft: borderColor,\n                      }}\n                    ></div>\n                  );\n                }\n              })}\n            </div>\n            <div\n              onScroll={(e) => {\n                const target = e.target as HTMLDivElement;\n                setState(target.scrollTop);\n                setScrollx(target.scrollLeft);\n              }}\n              ref={ref}\n              style={{\n                overflow: \"auto\",\n                height: `calc(100% - ${itemHeight}px)`,\n              }}\n            >\n              {renderData.map((v) => {\n                return (\n                  <div\n                    key={v.id}\n                    style={{\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      paddingLeft: interval,\n                      borderBottom: borderColor,\n                      width: ruleWidth,\n                      position: \"relative\",\n                      overflow: \"hidden\",\n                    }}\n                    onMouseMove={(e) => {\n                      TimeLineItemMouseMove(e, v.animate, forceUpdate);\n                    }}\n                    onMouseLeave={() => TimeLineItemMouseOver()}\n                    onMouseUp={() => TimeLineItemMouseOver()}\n                  >\n                    <TimeLineItem animate={v.animate}></TimeLineItem>\n                    {animateTicker.map((v) => {\n                      if (v % 10 === 0) {\n                        return (\n                          <div\n                            key={v}\n                            style={{\n                              marginRight: widthInterval, // 左右2根线\n                              borderLeft: borderColor,\n                              position: \"relative\",\n                              height: itemHeight - 1,\n                            }}\n                          ></div>\n                        );\n                      } else {\n                        return null;\n                      }\n                    })}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </>\n    </div>\n  );\n}\n\nexport default TimeLine;\n","import React, { RefObject } from \"react\";\nimport { blockFocus, containerFocusRemove } from \"../focusHandler\";\nimport { marklineConfig } from \"../markline/marklineConfig\";\nimport { resizerMouseMove, resizerMouseUp } from \"../resizeHandler\";\nimport {\n  selectRangeMouseMove,\n  selectData,\n  selectRangeMouseUp,\n} from \"../selectRange\";\nimport { IBlockType } from \"../store/storetype\";\nimport { deepCopy, isMac } from \"../utils\";\nimport { wrapperMoveMouseUp } from \"../../components/wrapperMove/event\";\nimport { wrapperMoveMouseUp as iframeWrapperMove } from \"../../components/IframeWrapperMove/event\";\nimport { contextMenuState } from \"../contextMenu\";\nimport { innerDragState } from \"./state\";\nimport UserConfig from \"../../config\";\nimport { rotateMouseMove, rotateMouseUp } from \"../rotateHandler\";\nimport { specialCoList } from \"../utils/special\";\nimport { marklineState } from \"../markline/state\";\nimport { itemHeight } from \"../../components/timeLine/timelineItem\";\nimport { needleMoveEvent } from \"../../components/timeLine/timeline\";\n\nexport const innerDrag = function (\n  item: IBlockType,\n  ref: RefObject<HTMLDivElement>,\n  config: UserConfig\n) {\n  const store = config.getStore();\n  return {\n    onMouseDown: (e: React.MouseEvent) => {\n      //e.preventDefault();\n      e.stopPropagation();\n      //特殊元素不可操作\n      if (specialCoList.includes(item.name)) {\n        containerFocusRemove(config).onMouseDown(e);\n        return;\n      }\n\n      if (\n        item.id &&\n        innerDragState.lastClick &&\n        item.id !== innerDragState.lastClick.id\n      ) {\n        contextMenuState.unmountContextMenu();\n      }\n      //candrag给选中，不给拖\n      blockFocus(e, item, config);\n      // 计算scrollTop值，更新dom\n      if (config.timelineConfig.autoFocus && config.timelineConfig.scrollDom) {\n        // 根据其为第几个block计算滚动高度\n        const index = store.getData().block.findIndex((v) => v.id === item.id);\n        if (index >= 0) {\n          config.timelineConfig.scrollDom.scrollTop = itemHeight * index;\n        }\n      }\n\n      if (!item.canDrag) {\n        //containerFocusRemove(config).onMouseDown(e);\n        return;\n      }\n      innerDragState.lastClick = item;\n\n      if (item.position === \"static\") {\n        return;\n      }\n      if (ref.current) {\n        ref.current.style.cursor = \"move\";\n        ref.current.style.willChange = \"left,right,width,height\";\n      }\n      innerDragState.startX = Math.round(e.clientX);\n      innerDragState.startY = Math.round(e.clientY);\n      innerDragState.item = item;\n      innerDragState.itemX = item.left; // 会导致框选后移动问题 进行分类判断 否则体验不是很好\n      innerDragState.itemY = item.top;\n      innerDragState.isDrag = true;\n      innerDragState.ref = ref;\n      innerDragState.current = store.getIndex();\n    },\n  };\n};\n\nexport const innerContainerDrag = function (config: UserConfig) {\n  let lastblock: null | IBlockType;\n  const store = config.getStore();\n  const scaleState = config.getScaleState();\n  const onMouseMove = (e: React.MouseEvent) => {\n    //e.preventDefault();\n    if (isMac() && contextMenuState.state) {\n      //mac有bug\n      return;\n    }\n\n    const id = innerDragState.item?.id;\n    if (id && innerDragState.isDrag) {\n      const current = store.getData().block.find((v) => v.id === id);\n      if (current?.position === \"static\") {\n        return;\n      }\n      const focus = config.getFocusState();\n      const isMulti = focus.blocks.length > 1;\n      let { clientX: moveX, clientY: moveY } = e;\n      const { startX, startY } = innerDragState;\n      const scale = scaleState.value;\n      let durX = Math.round((moveX - startX) / scale);\n      let durY = Math.round((moveY - startY) / scale);\n      let newblock: IBlockType[];\n      if (lastblock !== innerDragState.item) {\n        const cloneblock: IBlockType[] = deepCopy(store.getData().block);\n        lastblock = innerDragState.item;\n        newblock = cloneblock.map((v) => {\n          if (v.focus && v.position !== \"static\") {\n            if (isMulti) {\n              v.left = Math.round(v.left + durX);\n              v.top = Math.round(v.top + durY);\n            } else {\n              v.left = Math.round(innerDragState.itemX + durX);\n              v.top = Math.round(innerDragState.itemY + durY);\n            }\n          }\n          return v;\n        });\n      } else {\n        newblock = store.getData().block.map((v) => {\n          if (v.focus && v.position !== \"static\") {\n            if (isMulti) {\n              v.left = Math.round(v.left + durX);\n              v.top = Math.round(v.top + durY);\n            } else {\n              v.left = Math.round(innerDragState.itemX + durX);\n              v.top = Math.round(innerDragState.itemY + durY);\n            }\n          }\n          return v;\n        });\n      }\n      store.setData({ ...store.getData(), block: newblock });\n      if (isMulti) {\n        innerDragState.startX = moveX;\n        innerDragState.startY = moveY;\n      }\n    }\n    resizerMouseMove(e, config);\n    rotateMouseMove(e, config);\n    if (selectData.selectDiv) {\n      selectRangeMouseMove(e);\n    }\n  };\n  return {\n    onMouseMove,\n  };\n};\nexport const innerContainerDragUp = function (config: UserConfig) {\n  const store = config.getStore();\n  const onMouseUp = (e: React.MouseEvent) => {\n    // e.preventDefault(); 这个会导致无法取消选中\n    marklineState.cache = null;\n    marklineState.sortLeft = null;\n    marklineState.sortTop = null;\n    marklineState.sortRight = null;\n    marklineState.sortBottom = null;\n    iframeWrapperMove(config);\n    needleMoveEvent(config).onMouseUp();\n    wrapperMoveMouseUp(config);\n    selectRangeMouseUp(e, config);\n    if (innerDragState.ref && innerDragState.ref.current) {\n      innerDragState.ref.current.style.willChange = \"auto\";\n    }\n    resizerMouseUp(config);\n    rotateMouseUp(config);\n    if (innerDragState.current) {\n      const endindex = store.getIndex();\n      store\n        .getStoreList()\n        .splice(innerDragState.current, endindex - innerDragState.current);\n      store.setIndex(innerDragState.current);\n    }\n    innerDragState.ref = null;\n    innerDragState.isDrag = false;\n    innerDragState.item = null;\n    innerDragState.current = 0;\n    marklineConfig.marklineUnfocus = null;\n    store.forceupdate();\n  };\n  return {\n    onMouseUp,\n    onMouseMove: (e: React.MouseEvent) => {\n      needleMoveEvent(config).onMouseMove(e);\n    },\n  };\n};\n","import { IBlockType } from \"../store/storetype\";\nimport { LinesTypes } from \"./calcRender\";\nimport { marklineConfig } from \"./marklineConfig\";\n\nexport interface RealStyle {\n  width: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\n/**\n *\n *\n * @export 吸附间距之前已经算出，该函数直接做处理\n * @param {RealStyle} focusStyle\n * @param {RealStyle} unFocusStyle\n * @param {LinesTypes} lines\n * @param {IBlockType} focus\n * @param {number} diff 绝对值\n * @param {('left' | 'top' | 'bottom' | 'right' | 't-b' | 'b-t' |  'l-r' |  'r-l')} direction\n */\nexport function marklineDisplay(\n  focusStyle: RealStyle,\n  unFocusStyle: RealStyle,\n  lines: LinesTypes,\n  focus: IBlockType,\n  diff: number,\n  dirty: { dirtyX: boolean; dirtyY: boolean },\n  direction: \"left\" | \"top\" | \"bottom\" | \"right\" | \"t-b\" | \"b-t\" | \"l-r\" | \"r-l\"\n) {\n  const { top, height, left, width } = focusStyle;\n  const { top: t, height: h, left: l, width: w } = unFocusStyle;\n  let diffY = 0;\n  let diffX = 0;\n  switch (direction) {\n    case \"left\":\n      if (dirty.dirtyY) {\n        if (diff <= 1) {\n          lines.y.push(l);\n        }\n      } else {\n        lines.y.push(l);\n        diffX = l - left;\n        dirty.dirtyY = true;\n      }\n      break;\n    case \"right\":\n      if (dirty.dirtyY) {\n        if (diff <= 1) {\n          lines.y.push(l + w);\n        }\n      } else {\n        lines.y.push(l + w);\n        diffX = l + w - left - width;\n        dirty.dirtyY = true;\n      }\n      break;\n    case \"l-r\":\n      if (dirty.dirtyY) {\n        if (diff <= 1) {\n          lines.y.push(l + w);\n        }\n      } else {\n        lines.y.push(l + w);\n        diffX = l + w - left;\n        dirty.dirtyY = true;\n      }\n      break;\n    case \"r-l\":\n      if (dirty.dirtyY) {\n        if (diff <= 1) {\n          lines.y.push(l);\n        }\n      } else {\n        lines.y.push(l);\n        diffX = l - (left + width);\n        dirty.dirtyY = true;\n      }\n      break;\n    case \"top\":\n      if (dirty.dirtyX) {\n        if (diff <= 1) {\n          lines.x.push(t);\n        }\n      } else {\n        lines.x.push(t);\n        diffY = t - top;\n        dirty.dirtyX = true;\n      }\n      break;\n    case \"bottom\":\n      if (dirty.dirtyX) {\n        if (diff <= 1) {\n          lines.x.push(t + h);\n        }\n      } else {\n        lines.x.push(t + h);\n        diffY = t + h - top - height;\n        dirty.dirtyX = true;\n      }\n      break;\n    case \"t-b\":\n      if (dirty.dirtyX) {\n        if (diff <= 1) {\n          lines.x.push(t + h);\n        }\n      } else {\n        lines.x.push(t + h);\n        diffY = t + h - top;\n        dirty.dirtyX = true;\n      }\n      break;\n    case \"b-t\":\n      if (dirty.dirtyX) {\n        if (diff <= 1) {\n          lines.x.push(t);\n        }\n      } else {\n        lines.x.push(t);\n        diffY = t - (top + height);\n        dirty.dirtyX = true;\n      }\n      break;\n  }\n  if (marklineConfig.isAbsorb) {\n    focus.top = Math.round(focus.top + diffY);\n    focus.left = Math.round(focus.left + diffX);\n  }\n}\n\n/**\n *\n * 第一次运算时需要\n * @export\n * @param {RealStyle} focusStyle\n * @param {RealStyle} unFocusStyle\n * @param {LinesTypes} lines\n * @param {IBlockType} focus\n */\nexport function newMarklineDisplay(\n  focusStyle: RealStyle,\n  unFocusStyle: RealStyle,\n  lines: LinesTypes\n) {\n  const { top, height, left, width } = focusStyle;\n  const { top: t, height: h, left: l, width: w } = unFocusStyle;\n  // 头对头\n  if (Math.abs(t - top) <= 1) {\n    lines.x.push(t);\n  }\n  // 尾对头\n  else if (Math.abs(t - (top + height)) <= 1) {\n    lines.x.push(t);\n  }\n  // 头对尾\n  else if (Math.abs((t + h - top) / 2) <= 1) {\n    lines.x.push(t + h);\n  }\n  // 尾对尾\n  else if (Math.abs((t + h - top - height) / 2) <= 1) {\n    lines.x.push(t + h);\n  }\n  // 纵线\n  // 头对头\n  if (Math.abs(l - left) <= 1) {\n    lines.y.push(l);\n  }\n  // 尾对头\n  else if (Math.abs(l - (left + width)) <= 1) {\n    lines.y.push(l);\n  }\n  // 头对尾\n  else if (Math.abs(l + w - left) <= 1) {\n    lines.y.push(l + w);\n  }\n  // 尾对尾\n  else if (Math.abs(l + w - left - width) <= 1) {\n    lines.y.push(l + w);\n  }\n}\n\n/**\n *\n * @deprecated\n */\nexport function switchMarklineDisplay(\n  l: number,\n  t: number,\n  w: number | string | undefined,\n  h: number | string | undefined,\n  left: number,\n  top: number,\n  width: number,\n  height: number,\n  lines: LinesTypes,\n  focus: IBlockType\n) {\n  // 做吸附只能选择一个接近的吸，所以只匹配一个即可。\n  // 头对头\n  if (marklineConfig.isAbsorb) {\n    if (Math.abs(top - t) < marklineConfig.indent) {\n      lines.x.push(t);\n      focus.top = t;\n    }\n    // 中对头\n    else if (Math.abs(top + height / 2 - t) < marklineConfig.indent) {\n      lines.x.push(t);\n      focus.top = t - height / 2;\n    }\n    // 尾对头\n    else if (Math.abs(top + height - t) < marklineConfig.indent) {\n      lines.x.push(t);\n      focus.top = t - height;\n    } else if (h && typeof h === \"number\") {\n      // 头对中\n      if (Math.abs(t + h / 2 - top) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n        focus.top = t + h / 2;\n      }\n      // 中对中\n      else if (Math.abs(t + h / 2 - top - height / 2) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n        focus.top = t + h / 2 - height / 2;\n      }\n      // 尾对中\n      else if (Math.abs(t + h / 2 - top - height) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n        focus.top = t + h / 2 - height;\n      }\n      // 头对尾\n      else if (Math.abs((t + h - top) / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n        focus.top = t + h;\n      }\n      // 中对尾\n      else if (Math.abs(t + h - top - height / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n        focus.top = t + h - height / 2;\n      }\n      // 尾对尾\n      else if (Math.abs((t + h - top - height) / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n        focus.top = t + h - height;\n      }\n    }\n    // x轴方向\n    // 头对头\n    if (Math.abs(left - l) < marklineConfig.indent) {\n      lines.y.push(l);\n      focus.left = l;\n    }\n    // 中对头\n    else if (Math.abs(left + width / 2 - l) < marklineConfig.indent) {\n      lines.y.push(l);\n      focus.left = l - width / 2;\n    }\n    // 尾对头\n    else if (Math.abs(left + width - l) < marklineConfig.indent) {\n      lines.y.push(l);\n      focus.left = l - width;\n    } else if (w && typeof w === \"number\") {\n      // 头对中\n      if (Math.abs(l + w / 2 - left) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n        focus.left = l + w / 2;\n      }\n      // 中对中\n      else if (Math.abs(l + w / 2 - left - width / 2) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n        focus.left = l + w / 2 - width / 2;\n      }\n      // 尾对中\n      else if (Math.abs(l + w / 2 - left - width) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n        focus.left = l + w / 2 - width;\n      }\n      // 头对尾\n      else if (Math.abs((l + w - left) / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n        focus.left = l + w;\n      }\n      // 中对尾\n      else if (Math.abs(l + w - left - width / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n        focus.left = l + w - width / 2;\n      }\n      // 尾对尾\n      else if (Math.abs((l + w - left - width) / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n        focus.left = l + w - width;\n      }\n    }\n  } else {\n    if (Math.abs(top - t) < marklineConfig.indent) {\n      lines.x.push(t);\n    }\n    // 中对头\n    if (Math.abs(top + height / 2 - t) < marklineConfig.indent) {\n      lines.x.push(t);\n    }\n    // 尾对头\n    if (Math.abs(top + height - t) < marklineConfig.indent) {\n      lines.x.push(t);\n    }\n    if (h && typeof h === \"number\") {\n      // 头对中\n      if (Math.abs(t + h / 2 - top) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n      }\n      // 中对中\n      if (Math.abs(t + h / 2 - top - height / 2) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n      }\n      // 尾对中\n      if (Math.abs(t + h / 2 - top - height) < marklineConfig.indent) {\n        lines.x.push(t + h / 2);\n      }\n      // 头对尾\n      if (Math.abs((t + h - top) / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n      }\n      // 中对尾\n      if (Math.abs(t + h - top - height / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n      }\n      // 尾对尾\n      if (Math.abs((t + h - top - height) / 2) < marklineConfig.indent) {\n        lines.x.push(t + h);\n      }\n    }\n    // x轴方向\n    // 头对头\n    if (Math.abs(left - l) < marklineConfig.indent) {\n      lines.y.push(l);\n    }\n    // 中对头\n    if (Math.abs(left + width / 2 - l) < marklineConfig.indent) {\n      lines.y.push(l);\n    }\n    // 尾对头\n    if (Math.abs(left + width - l) < marklineConfig.indent) {\n      lines.y.push(l);\n    }\n    if (w && typeof w === \"number\") {\n      // 头对中\n      if (Math.abs(l + w / 2 - left) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n      }\n      // 中对中\n      if (Math.abs(l + w / 2 - left - width / 2) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n      }\n      // 尾对中\n      if (Math.abs(l + w / 2 - left - width) < marklineConfig.indent) {\n        lines.y.push(l + w / 2);\n      }\n      // 头对尾\n      if (Math.abs((l + w - left) / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n      }\n      // 中对尾\n      if (Math.abs(l + w - left - width / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n      }\n      // 尾对尾\n      if (Math.abs((l + w - left - width) / 2) < marklineConfig.indent) {\n        lines.y.push(l + w);\n      }\n    }\n  }\n}\n\n/**\n * @todo 暂时无效\n */\nexport function switchMarklineResizeDisplay(\n  l: number,\n  t: number,\n  w: number | string | undefined,\n  h: number | string | undefined,\n  left: number,\n  top: number,\n  width: number,\n  height: number,\n  lines: LinesTypes\n) {\n  // 头对头\n  if (Math.abs(top - t) <= marklineConfig.resizeIndent) {\n    lines.x.push(t);\n  }\n  // 中对头\n  if (Math.abs(top + height / 2 - t) <= marklineConfig.resizeIndent) {\n    lines.x.push(t);\n  }\n  // 尾对头\n  if (Math.abs(top + height - t) <= marklineConfig.resizeIndent) {\n    lines.x.push(t);\n  }\n  if (h && typeof h === \"number\") {\n    // 头对中\n    if (Math.abs(t + h / 2 - top) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h / 2);\n    }\n    // 中对中\n    if (Math.abs(t + h / 2 - top - height / 2) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h / 2);\n    }\n    // 尾对中\n    if (Math.abs(t + h / 2 - top - height) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h / 2);\n    }\n    // 头对尾\n    if (Math.abs((t + h - top) / 2) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h);\n    }\n    // 中对尾\n    if (Math.abs(t + h - top - height / 2) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h);\n    }\n    // 尾对尾\n    if (Math.abs((t + h - top - height) / 2) <= marklineConfig.resizeIndent) {\n      lines.x.push(t + h);\n    }\n  }\n  // x轴方向\n  // 头对头\n  if (Math.abs(left - l) <= marklineConfig.resizeIndent) {\n    lines.y.push(l);\n  }\n  // 中对头\n  if (Math.abs(left + width / 2 - l) <= marklineConfig.resizeIndent) {\n    lines.y.push(l);\n  }\n  // 尾对头\n  if (Math.abs(left + width - l) <= marklineConfig.resizeIndent) {\n    lines.y.push(l);\n  }\n  if (w && typeof w === \"number\") {\n    // 头对中\n    if (Math.abs(l + w / 2 - left) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w / 2);\n    }\n    // 中对中\n    if (Math.abs(l + w / 2 - left - width / 2) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w / 2);\n    }\n    // 尾对中\n    if (Math.abs(l + w / 2 - left - width) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w / 2);\n    }\n    // 头对尾\n    if (Math.abs((l + w - left) / 2) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w);\n    }\n    // 中对尾\n    if (Math.abs(l + w - left - width / 2) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w);\n    }\n    // 尾对尾\n    if (Math.abs((l + w - left - width) / 2) <= marklineConfig.resizeIndent) {\n      lines.y.push(l + w);\n    }\n  }\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2022-01-12 09:15:44\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\markline\\calcRender.ts\n */\nimport { innerDragState } from \"../innerDrag/state\";\nimport { marklineDisplay, newMarklineDisplay } from \"./normalMode\";\nimport { marklineConfig } from \"./marklineConfig\";\nimport UserConfig from \"../../config\";\nimport { angleToRadian, binarySearchRemain, getContainer } from \"../utils\";\nimport { marklineState, RealStyleType } from \"./state\";\nexport interface LinesTypes {\n  x: number[];\n  y: number[];\n}\n\nexport function cos(rotate: number) {\n  return Math.abs(Math.cos(angleToRadian(rotate)));\n}\nexport function sin(rotate: number) {\n  return Math.abs(Math.sin(angleToRadian(rotate)));\n}\n\nexport function getComponentRotatedStyle(\n  rotate: number,\n  width: number,\n  height: number,\n  left: number,\n  top: number\n) {\n  const style = {\n    left,\n    width,\n    height,\n    right: left + width,\n    top,\n    bottom: top + height,\n  };\n  if (rotate !== 0) {\n    const newWidth = style.width * cos(rotate) + style.height * sin(rotate);\n    const diffX = (style.width - newWidth) / 2; // 旋转后范围变小是正值，变大是负值\n    style.left += diffX;\n    style.right = style.left + newWidth;\n    const newHeight = style.height * cos(rotate) + style.width * sin(rotate);\n    const diffY = (newHeight - style.height) / 2; // 始终是正\n    style.top -= diffY;\n    style.bottom = style.top + newHeight;\n    style.width = newWidth;\n    style.height = newHeight;\n  } else {\n    style.bottom = style.top + style.height;\n    style.right = style.left + style.width;\n  }\n\n  return style;\n}\n\nexport function marklineCalRender(\n  config: UserConfig,\n  iframe: boolean\n): LinesTypes {\n  const store = config.getStore();\n  //focus可能好几个，做对比的是拖拽那个\n  const lines: LinesTypes = { x: [], y: [] };\n  if (\n    innerDragState.item?.position === \"static\" ||\n    innerDragState.item?.position === \"relative\"\n  ) {\n    return lines;\n  }\n\n  const item = innerDragState.item;\n  const ref = innerDragState.ref;\n\n  if (item && ref && ref.current && innerDragState.isDrag) {\n    // 这个被拷贝过，所以必须重新获取\n    const focus = store.getData().block.find((v) => v.id === item.id)!;\n    if (!focus) {\n      return lines;\n    }\n    const container = getContainer();\n    if (!container) {\n      return lines;\n    }\n    if (typeof focus.width !== \"number\" || typeof focus.height !== \"number\") {\n      return lines;\n    }\n\n    if (!marklineConfig.marklineUnfocus) {\n      marklineConfig.marklineUnfocus = store\n        .getData()\n        .block.filter(\n          (v) =>\n            v.focus === false &&\n            v.position !== \"static\" &&\n            v.position !== \"relative\"\n        );\n    }\n\n    const left = focus.left;\n    const top = focus.top;\n    const rotate = focus.rotate.value;\n    const width = focus.width;\n    const height = focus.height;\n    const realStyle = getComponentRotatedStyle(\n      rotate,\n      width,\n      height,\n      left,\n      top\n    );\n\n    if (typeof left !== \"number\" || typeof top !== \"number\") {\n      return lines; //可能没有这2值\n    }\n    const unfocus = marklineConfig.marklineUnfocus;\n    const len = unfocus.length;\n\n    // 只要cache里有东西，说明有缓存\n    if (marklineState.cache) {\n      const focusItem = config.getFocusState();\n      const isMulti = focusItem.blocks.length > 1;\n      if (!isMulti) {\n        if (!marklineState.sortLeft) {\n          marklineState.sortLeft = Object.values(marklineState.cache).sort(\n            (a, b) => {\n              return a.left - b.left;\n            }\n          );\n        }\n        if (!marklineState.sortTop) {\n          marklineState.sortTop = Object.values(marklineState.cache).sort(\n            (a, b) => {\n              return a.top - b.top;\n            }\n          );\n        }\n        if (!marklineState.sortBottom) {\n          marklineState.sortBottom = Object.values(marklineState.cache).sort(\n            (a, b) => {\n              return a.bottom - b.bottom;\n            }\n          );\n        }\n        if (!marklineState.sortRight) {\n          marklineState.sortRight = Object.values(marklineState.cache).sort(\n            (a, b) => {\n              return a.right - b.right;\n            }\n          );\n        }\n        // 划线的元素不应该冲突\n        // 当横向或者纵向已经吸附过，则后续不进行吸附，差值为0则划线。\n        // 未吸附过时的第一次划线会带吸附，后续按上述走\n        const dirty = {\n          dirtyX: false,\n          dirtyY: false,\n        };\n        const indexLeft = binarySearchRemain<RealStyleType>(\n          realStyle.left,\n          marklineState.sortLeft,\n          \"left\",\n          marklineConfig.indent\n        );\n        if (indexLeft) {\n          marklineDisplay(\n            realStyle,\n            indexLeft[0],\n            lines,\n            focus,\n            indexLeft[1],\n            dirty,\n            \"left\"\n          );\n        }\n        const indexLeftRight = binarySearchRemain<RealStyleType>(\n          realStyle.left,\n          marklineState.sortRight,\n          \"right\",\n          marklineConfig.indent\n        );\n        if (indexLeftRight) {\n          marklineDisplay(\n            realStyle,\n            indexLeftRight[0],\n            lines,\n            focus,\n            indexLeftRight[1],\n            dirty,\n            \"l-r\"\n          );\n        }\n        const indexRightLeft = binarySearchRemain<RealStyleType>(\n          realStyle.right,\n          marklineState.sortLeft,\n          \"left\",\n          marklineConfig.indent\n        );\n        if (indexRightLeft) {\n          marklineDisplay(\n            realStyle,\n            indexRightLeft[0],\n            lines,\n            focus,\n            indexRightLeft[1],\n            dirty,\n            \"r-l\"\n          );\n        }\n        const indexTopBottom = binarySearchRemain<RealStyleType>(\n          realStyle.top,\n          marklineState.sortBottom,\n          \"bottom\",\n          marklineConfig.indent\n        );\n        if (indexTopBottom) {\n          marklineDisplay(\n            realStyle,\n            indexTopBottom[0],\n            lines,\n            focus,\n            indexTopBottom[1],\n            dirty,\n            \"t-b\"\n          );\n        }\n        const indexBottomTop = binarySearchRemain<RealStyleType>(\n          realStyle.bottom,\n          marklineState.sortTop,\n          \"top\",\n          marklineConfig.indent\n        );\n        if (indexBottomTop) {\n          marklineDisplay(\n            realStyle,\n            indexBottomTop[0],\n            lines,\n            focus,\n            indexBottomTop[1],\n            dirty,\n            \"b-t\"\n          );\n        }\n        const indexTop = binarySearchRemain<RealStyleType>(\n          realStyle.top,\n          marklineState.sortTop,\n          \"top\",\n          marklineConfig.indent\n        );\n        if (indexTop) {\n          marklineDisplay(\n            realStyle,\n            indexTop[0],\n            lines,\n            focus,\n            indexTop[1],\n            dirty,\n            \"top\"\n          );\n        }\n        const indexRight = binarySearchRemain<RealStyleType>(\n          realStyle.right,\n          marklineState.sortRight,\n          \"right\",\n          marklineConfig.indent\n        );\n        if (indexRight) {\n          marklineDisplay(\n            realStyle,\n            indexRight[0],\n            lines,\n            focus,\n            indexRight[1],\n            dirty,\n            \"right\"\n          );\n        }\n        const indexBottom = binarySearchRemain<RealStyleType>(\n          realStyle.bottom,\n          marklineState.sortBottom,\n          \"bottom\",\n          marklineConfig.indent\n        );\n        if (indexBottom) {\n          marklineDisplay(\n            realStyle,\n            indexBottom[0],\n            lines,\n            focus,\n            indexBottom[1],\n            dirty,\n            \"bottom\"\n          );\n        }\n      }\n    } else {\n      for (let i = 0; i < len; i++) {\n        const v = unfocus[i];\n        const l = v?.left;\n        const t = v?.top;\n        const w = v?.width;\n        const h = v?.height;\n        if (\n          typeof l === \"number\" &&\n          typeof t === \"number\" &&\n          typeof w === \"number\" &&\n          typeof h === \"number\"\n        ) {\n          const ro = v.rotate.value;\n          const rstyle = getComponentRotatedStyle(ro, w, h, l, t);\n          if (!marklineState.cache) {\n            marklineState.cache = {\n              [v.id]: rstyle,\n            };\n          } else {\n            marklineState.cache[v.id] = rstyle;\n          }\n          newMarklineDisplay(realStyle, rstyle, lines);\n          // if (lines.x.length !== 0 || lines.y.length !== 0) {\n          // \tbreak; 这里不能break要算完所有值\n          // }\n        }\n      }\n    }\n\n    // 如果是iframe 需要刷给iframe\n    if (iframe) {\n      config.refreshIframe();\n    }\n  }\n\n  return lines;\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2022-01-21 09:28:53\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\markline\\index.tsx\n */\nimport React from \"react\";\nimport { useMemo } from \"react\";\nimport UserConfig from \"../../config\";\nimport { marklineCalRender } from \"./calcRender\";\nimport { marklineConfig } from \"./marklineConfig\";\n\nexport function MarklineX(props: any) {\n  return (\n    <div\n      className=\"yh-markline\"\n      style={{\n        borderTop: `1px ${marklineConfig.borderStyle} ${marklineConfig.borderColor}`,\n        position: \"absolute\",\n        width: \"100%\",\n        top: props.top,\n        display: props.display,\n        zIndex: 9999,\n      }}\n    ></div>\n  );\n}\nexport function MarklineY(props: any) {\n  return (\n    <div\n      className=\"yh-markline\"\n      style={{\n        borderLeft: `1px ${marklineConfig.borderStyle} ${marklineConfig.borderColor}`,\n        position: \"absolute\",\n        height: \"100%\",\n        left: props.left,\n        display: props.display,\n        zIndex: 9999,\n      }}\n    ></div>\n  );\n}\n\nexport function NormalMarkLineRender(props: {\n  config: UserConfig;\n  iframe: boolean;\n}) {\n  const lines = marklineCalRender(props.config, props.iframe);\n  const render = useMemo(() => {\n    return (\n      <>\n        {lines.x.map((v, i) => {\n          return <MarklineX key={i} top={v}></MarklineX>;\n        })}\n        {lines.y.map((v, i) => {\n          return <MarklineY key={i} left={v}></MarklineY>;\n        })}\n      </>\n    );\n  }, [lines]);\n  return <>{render}</>;\n}\n","/*\n\n * @Date: 2021-04-21 22:59:57\n * @LastEditors: \n * @LastEditTime: 2021-07-26 11:47:19\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\transfer\\index.ts\n */\n\n/**\n *\n *\n * @export\n * @param {number} top\n * @param {number} left\n * @param {(string | number | undefined)} height\n * @param {(string | number | undefined)} width\n * @param {boolean} isFixed\n * @returns\n */\nexport function transfer(\n  top: number,\n  left: number,\n  height: string | number | undefined,\n  width: string | number | undefined,\n  isFixed: boolean\n) {\n  if (isFixed) {\n    // 由于是375x667基准，所以top大于667的，那么top为底部高度\n    let newtop = 0;\n\n    const newleft = getRealWidth(left);\n    let newheight: string | number | undefined;\n    let newwidth: string | number | undefined;\n    if (typeof height === \"string\" || typeof height === \"undefined\") {\n      newheight = height;\n    } else {\n      newheight = getRealHeight(height);\n    }\n    if (typeof width === \"string\" || typeof width === \"undefined\") {\n      newwidth = width;\n    } else {\n      newwidth = getRealWidth(width);\n    }\n\n    if (top >= 667) {\n      if (typeof newheight === \"number\") {\n        newtop = getRealHeight() - newheight;\n      } else {\n        // 如果没有高度或者高度是百分比，则定位会有问题\n        newtop = getRealHeight();\n      }\n    } else {\n      if (\n        typeof height === \"number\" &&\n        top >= 667 - height &&\n        typeof newheight === \"number\"\n      ) {\n        // 这种是距离底部比高多 按底部计算\n        newtop = getRealHeight() - newheight;\n      } else {\n        newtop = getRealHeight(top);\n      }\n    }\n    return {\n      top: newtop,\n      left: newleft,\n      height: newheight,\n      width: newwidth,\n    };\n  } else {\n    const newtop = getRealHeight(top);\n    const newleft = getRealWidth(left);\n    let newheight: string | number | undefined;\n    let newwidth: string | number | undefined;\n    if (typeof height === \"string\" || typeof height === \"undefined\") {\n      newheight = height;\n    } else {\n      newheight = getRealHeight(height);\n    }\n    if (typeof width === \"string\" || typeof width === \"undefined\") {\n      newwidth = width;\n    } else {\n      newwidth = getRealWidth(width);\n    }\n\n    return {\n      top: newtop,\n      left: newleft,\n      height: newheight,\n      width: newwidth,\n    };\n  }\n}\n\nexport function getCurrentMobileInfo() {\n  let userAgentMatched = window.navigator.userAgent.match(\n    /(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i\n  );\n  const width = userAgentMatched\n    ? window.innerWidth\n    : window.innerWidth < 500\n    ? window.innerWidth\n    : 375;\n\n  const height = userAgentMatched\n    ? window.screen.availHeight\n    : window.screen.availHeight < 667\n    ? window.screen.availHeight\n    : 667;\n  return [width, height];\n}\n\nexport function getRealWidth(w: number | string = 375) {\n  const width = typeof w === \"string\" ? parseFloat(w) : w;\n  return (getCurrentMobileInfo()[0] / 375) * width;\n}\n\nexport function getRealHeight(H: number | string = 667) {\n  const height = typeof H === \"string\" ? parseFloat(H) : H;\n  return (getCurrentMobileInfo()[0] / 375) * height;\n}\n","import { IBlockType } from \"../core/store/storetype\";\nimport {\n  CSSProperties,\n  PropsWithChildren,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { innerDrag } from \"../core/innerDrag\";\nimport { BlockResizer } from \"../core/resizeHandler\";\nimport { contextMenuEvent } from \"../core/contextMenu\";\nimport React from \"react\";\nimport { transfer } from \"../core/transfer\";\nimport { UserConfig } from \"../config\";\nimport styles from \"../index.less\";\nimport { RotateReset, RotateResizer } from \"../core/rotateHandler\";\nimport { mergeAnimate } from \"../core/utils/animate\";\n\ninterface BlockProps {\n  data: IBlockType;\n  context: \"edit\" | \"preview\";\n  config: UserConfig;\n  iframe?: boolean;\n}\n\n/**\n * block在modal中也要使用，所以该组件不应该接收容器ref\n * 用来从component里拿到渲染进行渲染,由于异步拉代码，所以需要等待代码拉取完毕\n * @param {*} props\n * @returns\n */\nfunction Blocks(props: PropsWithChildren<BlockProps>) {\n  const [state, setState] = useState<JSX.Element | null>(null);\n\n  const [previewState, setPreviewState] = useState({\n    top: props.data.top,\n    left: props.data.left,\n    height: props.data.height,\n    width: props.data.width,\n  });\n\n  useEffect(() => {\n    const fn = () =>\n      props.config.getComponentRegister().getComp(props.data.name);\n    const data = fn();\n    let unregist = () => {};\n    let newdata = { ...props.data };\n    if (props.context === \"preview\") {\n      newdata = {\n        ...props.data,\n        top: previewState.top,\n        left: previewState.left,\n        height: previewState.height,\n        width: previewState.width,\n      };\n    }\n\n    if (data) {\n      setState(\n        data.render(\n          newdata,\n          props.context,\n          props.config.getStore(),\n          props.config\n        )\n      );\n    } else {\n      const callback = () => {\n        const tmp = fn();\n        setState(\n          tmp.render(\n            newdata,\n            props.context,\n            props.config.getStore(),\n            props.config\n          )\n        );\n        unregist();\n      };\n      unregist = props.config\n        .getComponentRegister()\n        .on(props.data.name, callback);\n    }\n    return () => {\n      unregist();\n    };\n  }, [props.data, props.context, props.config, previewState]);\n\n  const ref = useRef<HTMLDivElement>(null);\n  const innerDragData = useMemo(() => {\n    return { ...innerDrag(props.data, ref, props.config) };\n  }, [props.data, props.config]);\n\n  useEffect(() => {\n    const fn = () => {\n      const { top, left, width, height } = transfer(\n        props.data.top,\n        props.data.left,\n        props.data.height,\n        props.data.width,\n        props.data.fixed\n      );\n\n      setPreviewState({ top, left, width, height });\n    };\n    fn();\n    window.addEventListener(\"resize\", fn);\n    return () => {\n      window.removeEventListener(\"resize\", fn);\n    };\n  }, [\n    previewState.height,\n    previewState.left,\n    previewState.top,\n    previewState.width,\n    props.data.height,\n    props.data.left,\n    props.data.top,\n    props.data.width,\n    props.data.fixed,\n  ]);\n\n  const [force, animateForce] = useState(0);\n\n  useEffect(() => {\n    const fn = () => {\n      animateForce((p) => p + 1);\n    };\n    props.config.blockForceUpdate.push(fn);\n    const unload = () => {\n      props.config.blockForceUpdate = props.config.blockForceUpdate.filter(\n        (v) => v !== fn\n      );\n    };\n    return () => {\n      unload();\n    };\n  }, [animateForce, props.config]);\n\n  const [animateProps, animationEdit]: [CSSProperties, CSSProperties] =\n    useMemo(() => {\n      const [normal, editProps] = mergeAnimate(props.data.animate, {\n        isPause:\n          props.config.timelineNeedleConfig.status !== \"start\" ? true : false,\n        delay:\n          props.config.timelineNeedleConfig.status === \"stop\"\n            ? props.config.timelineNeedleConfig.current\n            : 0,\n      });\n      return [\n        {\n          animation: normal,\n        },\n        {\n          animation: editProps,\n        },\n      ];\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.data.animate, props.config.timelineNeedleConfig, force]);\n\n  const render = useMemo(() => {\n    // 如果是编辑模式下，则需要包裹不能选中层，位移层，缩放控制层，平面移动层。\n    if (state && props.context === \"edit\") {\n      const style: CSSProperties = props.data.canDrag\n        ? { pointerEvents: \"none\" }\n        : {};\n      return (\n        <div\n          ref={ref}\n          className={\n            props.data.focus && props.data.position !== \"static\"\n              ? styles.yh_block_focus\n              : \"\"\n          }\n          style={{\n            position: props.data.position,\n            top: props.data.top,\n            left: props.data.left,\n            width: props.data.width,\n            height: props.data.height,\n            zIndex: props.data.zIndex,\n            display:\n              typeof props.data.canSee === \"boolean\"\n                ? props.data.canSee\n                  ? props.data.display\n                  : \"none\"\n                : props.data.display,\n            opacity: props.iframe ? 0 : 1,\n            transform: `rotate(${props.data.rotate.value}deg)`,\n          }}\n          {...innerDragData}\n          onContextMenu={(e) => {\n            if (props.data.name !== \"modalMask\") {\n              contextMenuEvent(e, ref, props.config);\n            }\n          }}\n        >\n          {/* 绝对定位元素 */}\n          {props.data.position !== \"static\" && (\n            <div\n              style={{\n                ...style,\n                ...animationEdit,\n              }}\n            >\n              {state}\n            </div>\n          )}\n          {/* 静态定位 非行内 这里暂不考虑布局影响 */}\n          {props.data.position === \"static\" && props.data.display !== \"inline\" && (\n            <div\n              style={{\n                pointerEvents: \"none\",\n                ...animationEdit,\n              }}\n            >\n              {state}\n            </div>\n          )}\n          {/* 静态定位 行内 这里暂不考虑布局影响 */}\n          {props.data.position === \"static\" && props.data.display === \"inline\" && (\n            <span\n              style={{\n                pointerEvents: \"none\",\n                ...animationEdit,\n              }}\n            >\n              {state}\n            </span>\n          )}\n          <BlockResizer\n            data={props.data}\n            config={props.config}\n            rect={ref}\n          ></BlockResizer>\n          <RotateResizer\n            data={props.data}\n            config={props.config}\n            rect={ref}\n          ></RotateResizer>\n          <RotateReset\n            data={props.data}\n            config={props.config}\n            rect={ref}\n          ></RotateReset>\n        </div>\n      );\n    } else {\n      const style = {\n        position: props.data.fixed ? \"fixed\" : props.data.position,\n        top: previewState.top,\n        left: previewState.left,\n        width: previewState.width,\n        height: previewState.height,\n        zIndex: props.data.zIndex,\n        display: props.data.display,\n        transform: `rotate(${props.data.rotate.value}deg)`,\n      };\n      return (\n        <>\n          {/* 绝对定位元素 */}\n          {props.data.position !== \"static\" && (\n            <div style={style}>\n              <div style={{ ...animateProps }}>{state}</div>\n            </div>\n          )}\n          {/* 静态定位 非行内 这里暂不考虑布局影响 */}\n          {props.data.position === \"static\" && props.data.display !== \"inline\" && (\n            <div style={style}>\n              <div style={{ ...animateProps }}>{state}</div>\n            </div>\n          )}\n          {/* 静态定位 行内 这里暂不考虑布局影响 */}\n          {props.data.position === \"static\" && props.data.display === \"inline\" && (\n            <span style={style}>\n              <span style={{ ...animateProps }}>{state}</span>\n            </span>\n          )}\n        </>\n      );\n    }\n  }, [\n    state,\n    props.context,\n    props.data,\n    props.iframe,\n    props.config,\n    innerDragData,\n    animationEdit,\n    previewState.top,\n    previewState.left,\n    previewState.width,\n    previewState.height,\n    animateProps,\n  ]);\n  return render;\n}\nexport default Blocks;\n","import { AnimateItem } from \"../store/storetype\";\n// duration\n// 1s ease 1s 1 forwards paused bounce ,\nexport function mergeAnimate(\n  animate: AnimateItem[],\n  config = {\n    delay: 0,\n    isPause: false,\n  }\n) {\n  let configstr = \"\";\n  let str = \"\";\n  animate.forEach((v) => {\n    configstr =\n      (configstr === \"\" ? configstr : configstr + \",\") +\n      `${v.animationDuration}s ${v.animationTimingFunction} ${(\n        v.animationDelay - config.delay\n      ).toFixed(1)}s ${v.animationIterationCount} forwards ${\n        config.isPause ? \"paused\" : \"running\"\n      } ${v.animationName}`;\n    str =\n      (str === \"\" ? str : str + \",\") +\n      `${v.animationDuration}s ${v.animationTimingFunction} ${\n        v.animationDelay\n      }s ${v.animationIterationCount} forwards ${\"running\"} ${v.animationName}`;\n  });\n  return [str, configstr];\n}\n","import { containerDragResolve } from \"../core/crossDrag\";\nimport { containerFocusRemove } from \"../core/focusHandler\";\nimport { innerContainerDrag } from \"../core/innerDrag\";\nimport { NormalMarkLineRender } from \"../core/markline\";\nimport { IStoreData } from \"../core/store/storetype\";\nimport { wrapperMoveState } from \"./wrapperMove/event\";\nimport {\n  CSSProperties,\n  PropsWithChildren,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport Blocks from \"./blocks\";\nimport { containerResizer } from \"../core/resizeHandler/containerResizer\";\nimport React from \"react\";\nimport UserConfig from \"../config\";\nimport styles from \"../index.less\";\nimport { getRealHeight } from \"../core/transfer\";\n\ninterface ContainerProps {\n  state: IStoreData;\n  context: \"edit\" | \"preview\";\n  config: UserConfig;\n  editContainerStyle?: CSSProperties;\n  previewContainerStyle?: CSSProperties;\n}\nfunction Container(props: PropsWithChildren<ContainerProps>) {\n  const { editContainerStyle, previewContainerStyle } = props;\n  const scaleState = props.config.getScaleState();\n  const transform = useMemo(() => {\n    if (props.context === \"edit\") {\n      return `scale(${scaleState.value}) translate(${wrapperMoveState.needX}px, ${wrapperMoveState.needY}px)`;\n    } else {\n      return undefined;\n    }\n  }, [props.context, scaleState]);\n\n  const bgColor = () => {\n    const isEdit = props.config.getStore().isEdit();\n    if (isEdit) {\n      return \"rgba(255,255,255,1)\";\n    } else {\n      return props.state.globalState.containerColor;\n    }\n  };\n  const forceUpdate = useState(0)[1];\n  props.config.containerForceUpdate = () => {\n    forceUpdate((p) => p + 1);\n  };\n\n  useEffect(() => {\n    if (props.context === \"preview\") {\n      props.config.onMounted();\n      props.config.onMountedFn.forEach((v) => v());\n    }\n    return () => {\n      if (props.context === \"preview\") {\n        props.config.destroyed();\n        props.config.destroyedFn.forEach((v) => v());\n      }\n    };\n  }, [props.config, props.context]);\n\n  const minWxEle = () => (\n    <div className={styles.minwx}>\n      <div>\n        <svg\n          // @ts-ignore\n          t=\"1652778150874\"\n          class=\"icon\"\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          p-id=\"2782\"\n          width=\"8\"\n          height=\"8\"\n        >\n          <path\n            d=\"M480 480m-288 0a4.5 4.5 0 1 0 576 0 4.5 4.5 0 1 0-576 0Z\"\n            p-id=\"2783\"\n            fill=\"#ffffff\"\n          ></path>\n        </svg>\n        <svg\n          // @ts-ignore\n          t=\"1652778150874\"\n          class=\"icon\"\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          p-id=\"2782\"\n          width=\"12\"\n          height=\"12\"\n        >\n          <path\n            d=\"M480 480m-288 0a4.5 4.5 0 1 0 576 0 4.5 4.5 0 1 0-576 0Z\"\n            p-id=\"2783\"\n            fill=\"#ffffff\"\n          ></path>\n        </svg>\n        <svg\n          // @ts-ignore\n          t=\"1652778150874\"\n          class=\"icon\"\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          p-id=\"2782\"\n          width=\"8\"\n          height=\"8\"\n        >\n          <path\n            d=\"M480 480m-288 0a4.5 4.5 0 1 0 576 0 4.5 4.5 0 1 0-576 0Z\"\n            p-id=\"2783\"\n            fill=\"#ffffff\"\n          ></path>\n        </svg>\n      </div>\n\n      <div>\n        <svg\n          // @ts-ignore\n          t=\"1652775167764\"\n          class=\"icon\"\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          p-id=\"2090\"\n          width=\"20\"\n          height=\"20\"\n        >\n          <path\n            d=\"M512 64c60.5 0 119.2 11.8 174.4 35.2 53.3 22.6 101.3 54.9 142.4 96 41.2 41.2 73.5 89.1 96 142.4C948.2 392.8 960 451.5 960 512s-11.8 119.2-35.2 174.4c-22.6 53.3-54.9 101.3-96 142.4-41.2 41.2-89.1 73.5-142.4 96C631.2 948.2 572.5 960 512 960s-119.2-11.8-174.4-35.2c-53.3-22.6-101.3-54.9-142.4-96-41.2-41.2-73.5-89.1-96-142.4C75.8 631.2 64 572.5 64 512s11.8-119.2 35.2-174.4c22.6-53.3 54.9-101.3 96-142.4s89.1-73.5 142.4-96C392.8 75.8 451.5 64 512 64m0-64C229.2 0 0 229.2 0 512s229.2 512 512 512 512-229.2 512-512S794.8 0 512 0z\"\n            p-id=\"2091\"\n            fill=\"#ffffff\"\n          ></path>\n          <path\n            d=\"M512 512m-96 0a96 96 0 1 0 192 0 96 96 0 1 0-192 0Z\"\n            p-id=\"2092\"\n            fill=\"#ffffff\"\n          ></path>\n        </svg>\n      </div>\n    </div>\n  );\n  return (\n    <>\n      {props.context === \"edit\" && (\n        <>\n          <div\n            style={{\n              position: \"absolute\",\n              height: `${props.state.container.height + 60}px`,\n              width: `${props.state.container.width}px`,\n              transform: `scale(${scaleState.value}) translate(${wrapperMoveState.needX}px, ${wrapperMoveState.needY}px)`,\n            }}\n          >\n            <div style={{ display: \"flex\" }}>\n              <div\n                id=\"yh-container\"\n                className={styles.yh_container}\n                style={{\n                  height: `${props.state.container.height}px`,\n                  width: `${props.state.container.width}px`,\n                  backgroundColor: bgColor(),\n                  position: \"relative\",\n                  overflow: props.config.containerOverFlow\n                    ? \"hidden\"\n                    : \"visible\",\n                  cursor: \"default\",\n                  lineHeight: props.state.globalState?.lineHeight ?? 1.575,\n                  fontSize: props.state.globalState?.fontSize ?? 14,\n                  ...editContainerStyle,\n                }}\n                {...(props.context === \"edit\"\n                  ? containerDragResolve(props.config)\n                  : null)}\n                {...(props.context === \"edit\"\n                  ? innerContainerDrag(props.config)\n                  : null)}\n                {...(props.context === \"edit\"\n                  ? containerFocusRemove(props.config)\n                  : null)}\n              >\n                {props.state.container.isMinwx && minWxEle()}\n\n                {props.context === \"edit\" && (\n                  <NormalMarkLineRender\n                    config={props.config}\n                    iframe={false}\n                  ></NormalMarkLineRender>\n                )}\n                {props.state.block.map((v) => {\n                  return (\n                    <Blocks\n                      config={props.config}\n                      key={v.id}\n                      data={v}\n                      context={props.context}\n                    ></Blocks>\n                  );\n                })}\n              </div>\n            </div>\n            <div\n              style={{\n                height: \"50px\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                width: `${props.state.container.width}px`,\n              }}\n            >\n              <div\n                style={{ fontSize: \"20px\", cursor: \"s-resize\" }}\n                onMouseDown={(e) =>\n                  containerResizer.onMousedown(e, props.config)\n                }\n              >\n                {props.config.getConfig().containerIcon}\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n      {props.context === \"preview\" && (\n        <div\n          id=\"yh-container-preview\"\n          className={styles.yh_container_preview}\n          style={{\n            height: `${getRealHeight(props.state.container.height)}px`,\n            width: `${props.state.container.width}px`,\n            position: \"relative\" as \"absolute\" | \"relative\",\n            overflow: \"hidden\",\n            top: \"20px\",\n            border: \"2px solid #ccc\",\n            boxShadow: \"0 0 10px #ccc\",\n            backgroundColor: bgColor(),\n            transform: transform,\n            lineHeight: props.state.globalState?.lineHeight ?? 1.575,\n            fontSize: props.state.globalState?.fontSize ?? 14,\n            ...previewContainerStyle,\n          }}\n        >\n          {props.state.container.isMinwx && minWxEle()}\n          {props.state.block.map((v) => {\n            return (\n              <Blocks\n                key={v.id}\n                config={props.config}\n                data={v}\n                context={props.context}\n              ></Blocks>\n            );\n          })}\n        </div>\n      )}\n    </>\n  );\n}\nexport default Container;\n","/*\n\n * @Date: 2022-01-20 11:04:15\n * @LastEditors: \n * @LastEditTime: 2022-01-21 13:40:19\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\colorPicker\\index.tsx\n */\nimport React, { memo, useState } from \"react\";\nimport { RGBColor, SketchPicker } from \"react-color\";\n\nexport interface ColorPickerProps {\n  initColor: RGBColor;\n  onChange: (v: RGBColor) => void;\n}\n\nfunction ColorPicker(props: ColorPickerProps) {\n  const [color, setColor] = useState<RGBColor>(props.initColor);\n  const [colorPickerVisible, setColorPickerVisible] = useState(false);\n  return (\n    <>\n      <div style={{ position: \"relative\", display: \"flex\" }}>\n        <div\n          onClick={() => {\n            setColorPickerVisible((pre) => !pre);\n          }}\n          style={{\n            background: \"#fff\",\n            borderRadius: \"1px\",\n            boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n            cursor: \"pointer\",\n            display: \"inline-block\",\n          }}\n        >\n          <div\n            style={{\n              width: \"20px\",\n              height: \"20px\",\n              borderRadius: \"2px\",\n              background: `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`,\n            }}\n          />\n        </div>\n        {colorPickerVisible && (\n          <>\n            <div\n              style={{\n                position: \"absolute\",\n                zIndex: 2000,\n                transform: `translate(-100%, 0px)`,\n              }}\n            >\n              <SketchPicker\n                color={color}\n                onChange={(c) => {\n                  const newcolor = c.rgb;\n                  setColor(newcolor);\n                  props.onChange(newcolor);\n                }}\n              ></SketchPicker>\n            </div>\n            <div\n              style={{\n                position: \"fixed\",\n                top: \"0px\",\n                right: \"0px\",\n                bottom: \"0px\",\n                left: \"0px\",\n                zIndex: 1000,\n              }}\n              onClick={() => setColorPickerVisible(false)}\n            ></div>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(ColorPicker);\n","/*\n\n * @Date: 2021-03-14 05:42:13\n * @LastEditors: \n * @LastEditTime: 2022-04-30 23:07:13\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\rightConfig.tsx\n */\nimport { CreateOptionsRes } from \"../core/components/formTypes\";\nimport { IBlockType, IStoreData } from \"../core/store/storetype\";\nimport {\n  CSSProperties,\n  PropsWithChildren,\n  ReactNode,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport React from \"react\";\nimport { Tabs, Input, Row, Col, Checkbox, InputNumber, Switch } from \"antd\";\nimport UserConfig from \"../config\";\nimport { rgba2Obj } from \"../core/utils\";\nimport deepcopy from \"deepcopy\";\nimport { replaceLocale } from \"../locale\";\nimport ColorPicker from \"./colorPicker\";\n\nconst colStyle: CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"flex-end\",\n};\nconst titletStyle: CSSProperties = {\n  display: \"flex\",\n  alignItems: \"center\",\n  userSelect: \"none\",\n  height: 32,\n};\ninterface RightConfigProps {\n  state: IStoreData;\n  config: UserConfig;\n  globalExtra?: ReactNode;\n  modalExtra?: ReactNode;\n}\n\n/**\n *\n * 这里一个需要异步拿取当前注册组件的配置项，另外需要异步加载所需的配置项。\n * @param {*} props\n * @returns\n */\nfunction RightConfig(props: PropsWithChildren<RightConfigProps>) {\n  const [menuSelect, setMenuSelect] = useState(\"0\");\n  const [current, setCurrent] = useState<IBlockType | null>(null);\n  const rightMapRenderListCategory = useMemo(() => {\n    return props.config.getConfig().rightRenderListCategory;\n  }, [props.config]);\n  const store = props.config.getStore();\n\n  useEffect(() => {\n    const fn = () => {\n      let item: IBlockType | undefined;\n      store.getData().block.some((v) => {\n        if (v.focus) {\n          item = v;\n        }\n        return v.focus === true;\n      });\n      if (item) {\n        setCurrent({ ...item });\n      } else {\n        setCurrent(null);\n      }\n    };\n    const unregist = store.subscribe(fn);\n    return () => {\n      unregist();\n    };\n  }, [store]);\n  const render = useMemo(() => {\n    return (type: string, current: IBlockType) => {\n      const fn = () =>\n        props.config.getComponentRegister().getComp(current.name);\n      const data = fn();\n      // 这里不可能拿不到组件，因为点击的那个组件已经渲染出来了\n      if (data) {\n        const renderList = data.props[type];\n        if (renderList) {\n          return renderList.map((v, i) => {\n            const Component = props.config.getFormRegister().formMap[v.type];\n            if (!Component) {\n              console.error(\n                `you might forgot to regist form component ${v.type}`\n              );\n              return null;\n            }\n            return (\n              // @ts-ignore\n              <Component\n                key={i}\n                data={v as CreateOptionsRes<any, any>}\n                current={current}\n                config={props.config}\n              ></Component>\n            );\n          });\n        } else {\n          return (\n            <div className=\"yh-right-noprops\" style={{ textAlign: \"center\" }}>\n              {replaceLocale(\"right.noprops\", \"还没有配置属性\", props.config)}\n            </div>\n          );\n        }\n      }\n      return null;\n    };\n  }, [props.config]);\n  const initColor = useMemo(() => {\n    return rgba2Obj(\n      props.config.getStore().getData().globalState.containerColor\n    );\n  }, [props.config]);\n  // const initColor2 = useMemo(() => {\n  //   return rgba2Obj(props.config.getStore().getData().globalState.bodyColor);\n  // }, [props.config]);\n  const initTitle = useMemo(() => {\n    return props.config.getStore().getData().globalState.title;\n  }, [props.config]);\n  const initDescription = useMemo(() => {\n    return props.config.getStore().getData().globalState.description;\n  }, [props.config]);\n  const [title, setTitle] = useState(initTitle);\n  const [description, setDescription] = useState(initDescription);\n\n  const customGlobal = props.config.getConfig().rightGlobalCustom;\n  const isEdit = props.config.getStore().isEdit();\n  const data = props.config.getStore().getData();\n  const modalName = data.modalEditName;\n  return (\n    <div\n      className=\"ant-menu right-pannel-wrap\"\n      style={{\n        height: \"100%\",\n        width: \"400px\",\n        overflow: \"auto\",\n        padding: \"0 10px\",\n        lineHeight: 1.5715,\n      }}\n    >\n      {current && (\n        <Tabs\n          activeKey={menuSelect}\n          style={{ width: \"100%\" }}\n          onChange={(e) => {\n            setMenuSelect(e);\n          }}\n        >\n          {rightMapRenderListCategory.map((v, i) => {\n            return (\n              <Tabs.TabPane tab={v.icon} key={i + \"\"}>\n                <div\n                  className=\"scrollbar right-pannel-tabdiv\"\n                  style={{\n                    height: \"calc(100vh - 110px)\",\n                    overflow: \"auto\",\n                    position: \"fixed\",\n                    width: 380,\n                  }}\n                >\n                  {v.custom &&\n                    v.customRender &&\n                    v.customRender(v.type, current, props.config)}\n                  {!v.custom && render(v.type, current)}\n                </div>\n              </Tabs.TabPane>\n            );\n          })}\n        </Tabs>\n      )}\n      {!current && !isEdit && !customGlobal && (\n        <div style={{ padding: \"10px\" }}>\n          <Row\n            style={{\n              padding: \"10px 0 20px 0\",\n              fontWeight: \"bold\",\n              userSelect: \"none\",\n            }}\n          >\n            {replaceLocale(\"right.global\", \"全局设置\", props.config)}\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"title\", \"标题\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <Input\n                value={title}\n                onChange={(e) => {\n                  const val = e.target.value;\n                  setTitle(val);\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.title = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"description\", \"描述\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <Input\n                value={description}\n                onChange={(e) => {\n                  const val = e.target.value;\n                  setDescription(val);\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.description = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.containerwidth\", \"容器宽度\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <InputNumber\n                min={0}\n                disabled={true}\n                value={props.config.getStore().getData().container.width}\n                onChange={(e) => {\n                  const val = e;\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.container.width = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.containerheight\", \"容器高度\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <InputNumber\n                min={0}\n                value={props.config.getStore().getData().container.height}\n                onChange={(e) => {\n                  const val = e;\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.container.height = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.containerColor\", \"容器底色\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <ColorPicker\n                initColor={initColor}\n                onChange={(newcolor) => {\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.containerColor = `rgba(${newcolor.r}, ${newcolor.g}, ${newcolor.b}, ${newcolor.a})`;\n                  props.config.getStore().setData(originData);\n                }}\n              ></ColorPicker>\n            </Col>\n          </Row>\n          {/* <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.bodyColor\", \"body底色\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <ColorPicker\n                initColor={initColor2}\n                onChange={(newcolor) => {\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.bodyColor = `rgba(${newcolor.r}, ${newcolor.g}, ${newcolor.b}, ${newcolor.a})`;\n                  props.config.getStore().setData(originData);\n                }}\n              ></ColorPicker>\n            </Col>\n          </Row> */}\n          {/* <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.lineHeight\", \"容器行高\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <InputNumber\n                min={0}\n                step=\"0.1\"\n                value={\n                  props.config.getStore().getData().globalState?.lineHeight ??\n                  1.575\n                }\n                onChange={(e) => {\n                  const val = e;\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.lineHeight = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row> */}\n          {/* <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              {replaceLocale(\"right.fontSize\", \"容器字号\", props.config)}\n            </Col>\n            <Col span={18} style={colStyle}>\n              <InputNumber\n                min={0}\n                value={\n                  props.config.getStore().getData().globalState?.fontSize ?? 14\n                }\n                onChange={(e) => {\n                  const val = e;\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.globalState.fontSize = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row> */}\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={6} style={{ ...titletStyle }}>\n              小程序\n            </Col>\n            <Col span={18} style={colStyle}>\n              <Switch\n                checked={props.config.getStore().getData().container.isMinwx}\n                onChange={(checked) => {\n                  const val = checked;\n                  const originData = deepcopy(\n                    props.config.getStore().getData()\n                  );\n                  originData.container.isMinwx = val;\n                  props.config.getStore().setData(originData);\n                }}\n              />\n            </Col>\n          </Row>\n          {props.globalExtra && props.globalExtra}\n        </div>\n      )}\n      {!current && !isEdit && customGlobal && customGlobal(props.config)}\n      {!current && isEdit && (\n        <div style={{ padding: \"10px\" }} className=\"yh-tcsz\">\n          <Row style={{ padding: \"10px 0 20px 0\", fontWeight: \"bold\" }}>\n            {replaceLocale(\"modal.control\", \"弹窗配置\", props.config)}\n          </Row>\n          <Row style={{ padding: \"10px 0\" }}>\n            <Col span={8} style={{ ...titletStyle }}>\n              {replaceLocale(\n                \"modal.control.remove\",\n                \"取消点击删除弹窗\",\n                props.config\n              )}\n            </Col>\n            <Col span={16} style={{ ...colStyle }}>\n              <Checkbox\n                checked={data.modalConfig[modalName] || false}\n                onChange={(e) => {\n                  const val = e.target.checked;\n                  const cloneData = deepcopy(data);\n                  cloneData.modalConfig[modalName] = val;\n                  props.config.getStore().setData(cloneData);\n                }}\n              ></Checkbox>\n            </Col>\n          </Row>\n          {props.modalExtra && props.modalExtra}\n        </div>\n      )}\n    </div>\n  );\n}\nexport default RightConfig;\n","import { unmountContextMenu } from \"../contextMenu\";\n\nexport const scaleCancelFn = () => {\n  unmountContextMenu();\n};\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-07-17 17:05:13\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\scale\\index.ts\n */\nimport UserConfig from \"../../config\";\nimport { scaleCancelFn } from \"./cancel\";\n\nexport const onWheelEvent = (config: UserConfig) => {\n  const store = config.getStore();\n  const scale = config.getScaleState();\n  return {\n    onWheel: (e: React.WheelEvent<HTMLDivElement>) => {\n      const dom = document.querySelector(\".ant-modal-mask\");\n      if (dom) {\n        //出现弹窗禁止滚动\n        return;\n      }\n      if (e.deltaY > 0) {\n        scaleCancelFn();\n        //往下滚缩小\n        if (scale.value > scale.minValue) {\n          scale.value = scale.value - 0.1;\n          store.forceUpdate();\n          config.refreshIframe();\n        }\n      } else {\n        scaleCancelFn();\n        //往上滚放大\n        if (scale.value < scale.maxValue) {\n          scale.value = scale.value + 0.1;\n          store.forceUpdate();\n          config.refreshIframe();\n        }\n      }\n    },\n  };\n};\n\nexport const scaleFn = {\n  increase(number: number = 0.1, config: UserConfig) {\n    const store = config.getStore();\n    const scaleState = config.getScaleState();\n    if (scaleState.value < scaleState.maxValue) {\n      scaleCancelFn();\n      scaleState.value = scaleState.value + number;\n      store.forceUpdate();\n      config.refreshIframe();\n    }\n    return scaleState.value;\n  },\n  decrease(number: number = 0.1, config: UserConfig) {\n    const store = config.getStore();\n    const scaleState = config.getScaleState();\n    scaleCancelFn();\n    if (scaleState.value > scaleState.minValue) {\n      scaleState.value = scaleState.value - number;\n      store.forceUpdate();\n      config.refreshIframe();\n    }\n    return scaleState.value;\n  },\n};\n\nexport const onWheelEventIframe = (\n  config: UserConfig,\n  scale: {\n    value: number;\n    maxValue: number;\n    minValue: number;\n  }\n) => {\n  return {\n    onWheel: (e: React.WheelEvent<HTMLDivElement>) => {\n      const dom = document.querySelector(\".ant-modal-mask\");\n      if (dom) {\n        //出现弹窗禁止滚动\n        return;\n      }\n      if (e.deltaY > 0) {\n        scaleCancelFn();\n        //往下滚缩小\n        if (scale.value > scale.minValue) {\n          scale.value = scale.value - 0.1;\n          config.sendParent({\n            type: \"update\",\n            column: \"scale\",\n            data: scale,\n          });\n        }\n      } else {\n        scaleCancelFn();\n        //往上滚放大\n        if (scale.value < scale.maxValue) {\n          scale.value = scale.value + 0.1;\n          config.sendParent({\n            type: \"update\",\n            column: \"scale\",\n            data: scale,\n          });\n        }\n      }\n    },\n  };\n};\n","/*\n\n * @Date: 2021-07-12 15:54:35\n * @LastEditors: \n * @LastEditTime: 2022-01-13 13:41:48\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\wrapperMove\\ticker.tsx\n */\nimport React, { useEffect, useRef, useState } from \"react\";\nimport UserConfig from \"../../config\";\n\nconst width = \"20px\";\nconst indent = 50;\n\nfunction Ticker(props: { config: UserConfig }) {\n  const topRef = useRef<HTMLDivElement>(null);\n  const leftRef = useRef<HTMLDivElement>(null);\n  const [topRender, setTopRender] = useState(0);\n  const [leftRender, setLeftRender] = useState(0);\n\n  const scale = props.config.getScaleState().value;\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (topRef.current) {\n        const width = topRef.current.getBoundingClientRect().width;\n        const renderWidth = Math.ceil(width / 10 / scale);\n        if (renderWidth < 2 ** 32 - 1) {\n          // new array的参数最大值\n          setTopRender(renderWidth);\n        }\n      }\n      // left可以不用放，但为了更新统一\n      if (leftRef.current) {\n        const height = leftRef.current.getBoundingClientRect().height;\n        const renderHeight = Math.ceil(height / 10 / scale);\n        if (renderHeight < 2 ** 32 - 1) {\n          setLeftRender(renderHeight);\n        }\n      }\n    }, 300);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [props.config, props.config.collapsed, scale]);\n\n  return (\n    <>\n      <div\n        ref={topRef}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: indent,\n          width: \"100%\",\n          height: width,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          userSelect: \"none\",\n        }}\n      >\n        {Array(topRender)\n          .fill(1)\n          .map((_, i) => {\n            if (i % 10 === 0) {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"1px\",\n                    height: \"12px\",\n                    position: \"relative\",\n                    userSelect: \"none\",\n                  }}\n                >\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      top: \"20px\",\n                      fontSize: \"10px\",\n                      left: \"-2px\",\n                      userSelect: \"none\",\n                    }}\n                  >\n                    {i}\n                  </div>\n                </div>\n              );\n            } else {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"1px\",\n                    height: \"6px\",\n                  }}\n                ></div>\n              );\n            }\n          })}\n      </div>\n      <div\n        ref={leftRef}\n        style={{\n          position: \"absolute\",\n          top: indent,\n          left: 0,\n          width: width,\n          height: \"100%\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          flexDirection: \"column\",\n          userSelect: \"none\",\n        }}\n      >\n        {Array(leftRender)\n          .fill(1)\n          .map((_, i) => {\n            if (i % 10 === 0) {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"12px\",\n                    height: \"1px\",\n                    position: \"relative\",\n                    userSelect: \"none\",\n                  }}\n                >\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      left: \"20px\",\n                      fontSize: \"10px\",\n                      top: \"-2px\",\n                      userSelect: \"none\",\n                    }}\n                  >\n                    {i}\n                  </div>\n                </div>\n              );\n            } else {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"6px\",\n                    height: \"1px\",\n                    userSelect: \"none\",\n                  }}\n                ></div>\n              );\n            }\n          })}\n      </div>\n    </>\n  );\n}\n\nexport default Ticker;\n","/*\n\n * @Date: 2022-01-13 09:58:05\n * @LastEditors: \n * @LastEditTime: 2022-01-21 10:57:39\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\control\\settings.tsx\n */\n\nimport { Modal, Form, InputNumber, Radio, Select } from \"antd\";\nimport { MessageInstance } from \"antd/lib/message\";\nimport React, { useState } from \"react\";\nimport { memo } from \"react\";\nimport { UserConfig } from \"../../config/index\";\nimport { rgba2Obj } from \"../../core/utils/index\";\nimport { replaceLocale, zhCN } from \"../../locale\";\nimport ColorPicker from \"../colorPicker\";\n\nexport interface SettingsModalPropsType {\n  visible: boolean;\n  config: UserConfig;\n  onOk: Function;\n  onCancel: Function;\n  message: MessageInstance;\n}\nconst formItemLayout = {\n  labelCol: {\n    span: 12,\n  },\n  wrapperCol: {\n    span: 12,\n  },\n};\n\nfunction SettingsModal(props: SettingsModalPropsType) {\n  const [form] = Form.useForm();\n  const [color, setColor] = useState(\n    rgba2Obj(props.config.marklineConfig.borderColor)\n  );\n\n  return (\n    <Modal\n      width={800}\n      visible={props.visible}\n      okText={replaceLocale(\"yes\", \"确定\", props.config)}\n      cancelText={replaceLocale(\"no\", \"取消\", props.config)}\n      title={replaceLocale(\"system.setting\", \"系统设置\", props.config)}\n      onCancel={() => props.onCancel()}\n      onOk={() => {\n        const res = form.getFieldsValue();\n        const { min, max, borderStyle, containerOverFlow } = res;\n        if (max < min) {\n          props.message.error(\n            replaceLocale(\"error.minmax\", zhCN[\"error.minmax\"], props.config)\n          );\n          return;\n        }\n        // 判断当前scale大小，如果超出范围，取最低值\n        const currentScale = props.config.scaleState.value;\n        if (currentScale < min || currentScale > max) {\n          props.config.scaleState.value = min;\n        }\n        props.config.marklineConfig.borderColor = `rgba(${color.r}, ${color.g}, ${color.b}, ${color.a})`;\n        props.config.marklineConfig.borderStyle = borderStyle;\n        props.config.containerOverFlow = containerOverFlow;\n        props.onOk(res);\n        props.config.containerForceUpdate();\n        return;\n      }}\n    >\n      <Form\n        {...formItemLayout}\n        initialValues={{\n          absorb: props.config.marklineConfig.isAbsorb,\n          indent: props.config.marklineConfig.indent,\n          min: props.config.scaleState.minValue,\n          max: props.config.scaleState.maxValue,\n          autofocus: props.config.timelineConfig.autoFocus,\n          borderStyle: props.config.marklineConfig.borderStyle,\n          containerOverFlow: props.config.containerOverFlow,\n        }}\n        form={form}\n      >\n        <Form.Item\n          name=\"absorb\"\n          label={replaceLocale(\n            \"settings.openabsorb\",\n            zhCN[\"settings.openabsorb\"],\n            props.config\n          )}\n        >\n          <Radio.Group>\n            <Radio value={true}>\n              {replaceLocale(\"on\", zhCN[\"on\"], props.config)}\n            </Radio>\n            <Radio value={false}>\n              {replaceLocale(\"off\", zhCN[\"off\"], props.config)}\n            </Radio>\n          </Radio.Group>\n        </Form.Item>\n        <Form.Item\n          name=\"indent\"\n          label={replaceLocale(\n            \"settings.absorbindent\",\n            zhCN[\"settings.absorbindent\"],\n            props.config\n          )}\n        >\n          <InputNumber<number> min={0.1}></InputNumber>\n        </Form.Item>\n        <Form.Item\n          label={replaceLocale(\n            \"settings.marklineColor\",\n            zhCN[\"settings.marklineColor\"],\n            props.config\n          )}\n        >\n          <ColorPicker\n            initColor={rgba2Obj(props.config.marklineConfig.borderColor)}\n            onChange={(v) => {\n              setColor(v);\n            }}\n          ></ColorPicker>\n        </Form.Item>\n        <Form.Item\n          name=\"borderStyle\"\n          label={replaceLocale(\n            \"settings.marklineStyle\",\n            zhCN[\"settings.marklineStyle\"],\n            props.config\n          )}\n        >\n          <Select style={{ width: 88 }}>\n            <Select.Option value=\"dotted\">dotted</Select.Option>\n            <Select.Option value=\"solid\">solid</Select.Option>\n            <Select.Option value=\"dashed\">dashed</Select.Option>\n          </Select>\n        </Form.Item>\n        <Form.Item\n          name=\"min\"\n          // 最小值要大于0.1否则tiker计算有问题\n          label={replaceLocale(\n            \"settings.min\",\n            zhCN[\"settings.min\"],\n            props.config\n          )}\n        >\n          <InputNumber<number> min={0.1} step={0.1}></InputNumber>\n        </Form.Item>\n        <Form.Item\n          name=\"max\"\n          label={replaceLocale(\n            \"settings.max\",\n            zhCN[\"settings.max\"],\n            props.config\n          )}\n        >\n          <InputNumber<number> min={0.1} step={0.1}></InputNumber>\n        </Form.Item>\n        <Form.Item\n          name=\"autofocus\"\n          label={replaceLocale(\n            \"settings.autofocus\",\n            zhCN[\"settings.autofocus\"],\n            props.config\n          )}\n        >\n          <Radio.Group>\n            <Radio value={true}>\n              {replaceLocale(\"on\", zhCN[\"on\"], props.config)}\n            </Radio>\n            <Radio value={false}>\n              {replaceLocale(\"off\", zhCN[\"off\"], props.config)}\n            </Radio>\n          </Radio.Group>\n        </Form.Item>\n        <Form.Item\n          name=\"containerOverFlow\"\n          label={replaceLocale(\n            \"settings.containerOverflow\",\n            zhCN[\"settings.containerOverflow\"],\n            props.config\n          )}\n        >\n          <Radio.Group>\n            <Radio value={true}>\n              {replaceLocale(\"on\", zhCN[\"on\"], props.config)}\n            </Radio>\n            <Radio value={false}>\n              {replaceLocale(\"off\", zhCN[\"off\"], props.config)}\n            </Radio>\n          </Radio.Group>\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n}\n\nexport default memo(SettingsModal);\n","import { IStoreData } from \"../core/store/storetype\";\nimport React, { useMemo } from \"react\";\nimport Blocks from \"./blocks\";\nimport UserConfig from \"../config\";\nimport * as ReactDOM from \"react-dom\";\nimport { deepCopy } from \"../core/utils\";\n\ninterface ModalRenderProps {\n  data: IStoreData;\n  name: string; //传递的modal名字\n  config: UserConfig; //需要拿到componentRegister\n  parentDom: HTMLDivElement;\n  rootDom: HTMLDivElement;\n}\n\nexport const unmountMap: Map<string, Function> = new Map();\n\nexport function ModalRender(props: ModalRenderProps) {\n  //先获取数据\n  const storeData = useMemo(() => {\n    const z = props.data.modalMap[props.name];\n    if (z) {\n      const data = deepCopy(z);\n      //需要把第一个mask扔了手动写一个\n      data.shift();\n      return { block: data };\n    }\n    return { block: [] };\n  }, [props.data.modalMap, props.name]);\n  const { parentDom, rootDom } = props;\n\n  const modalConfig = props.data.modalConfig[props.name];\n  //这里还要添加个关闭函数，\n  const unmount = useMemo(() => {\n    return () => {\n      if (parentDom && rootDom) {\n        ReactDOM.unmountComponentAtNode(parentDom);\n        rootDom.removeChild(parentDom);\n        rootDom.parentElement?.removeChild(rootDom);\n      }\n    };\n  }, [parentDom, rootDom]);\n\n  unmountMap.set(props.name, unmount);\n\n  return (\n    <>\n      <div\n        className=\"yh-container-modal\"\n        style={{\n          height: `100%`,\n          width: `100%`,\n          position: \"fixed\",\n          overflow: \"hidden\",\n        }}\n      >\n        {storeData.block.map((v) => {\n          return (\n            <Blocks\n              key={v.id}\n              config={props.config}\n              data={v}\n              context={\"preview\"}\n            ></Blocks>\n          );\n        })}\n        <div\n          onClick={() => {\n            if (!modalConfig) {\n              unmount();\n            }\n          }}\n          style={{\n            backgroundColor: \"#716f6f9e\",\n            width: \"100%\",\n            height: \"100%\",\n          }}\n        ></div>\n      </div>\n    </>\n  );\n}\n\nlet wrap: HTMLDivElement | null;\n\nexport const createModal = (\n  name: string,\n  data: IStoreData,\n  config: UserConfig\n) => {\n  if (wrap) {\n    wrap = null;\n  }\n  if (!name) {\n    return;\n  }\n\n  if (!wrap) {\n    wrap = document.createElement(\"div\");\n    wrap.style.cssText = `line-height:\n        1.5;text-align:\n        center;color: #333;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        position: fixed;\n        z-index: 100000;\n        width: 100%;\n        height:100%;\n        top:0;\n        left: 0;`;\n    if (wrap) {\n      document.body.appendChild(wrap);\n    }\n  }\n  const divs = document.createElement(\"div\");\n  wrap.appendChild(divs);\n  ReactDOM.render(\n    <ModalRender\n      name={name}\n      data={data}\n      config={config}\n      parentDom={divs}\n      rootDom={wrap}\n    ></ModalRender>,\n    divs\n  );\n};\n","/*\n\n * @Date: 2022-04-09 21:44:55\n * @LastEditors: \n * @LastEditTime: 2022-04-24 00:34:55\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\leftDataPannel.tsx\n */\nimport {\n  Button,\n  Form,\n  Modal,\n  Row,\n  Space,\n  Table,\n  Input,\n  Typography,\n  message,\n  Popconfirm,\n} from \"antd\";\nimport { ColumnsType } from \"antd/lib/table\";\nimport React, { useState } from \"react\";\nimport UserConfig from \"../config\";\nimport { replaceLocale } from \"../locale\";\n\ninterface LeftDataPannelProps {\n  config: UserConfig;\n}\nconst formItemLayout = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 20,\n  },\n};\n\nconst { Text } = Typography;\nconst reg =\n  /[`~!@#-_$%^&*()+=|{}':;',\\[\\]<>/?~！@#￥%……&*（）——+|{}【】《》 ‘；：”“’。，、？]/g;\n\n/**\n *\n * 左侧tab页插件\n * @param {LeftDataPannelProps} props\n * @returns\n */\nfunction LeftDataPannel(props: LeftDataPannelProps) {\n  const config = props.config;\n  const dataCenter = config.getDataCenter();\n  const dataMap = dataCenter.getDataMap();\n  const keys = Object.keys(dataMap);\n  const dataSource = keys.map((v) => ({ key: v, value: dataMap[v] }));\n  const forceUpdate = useState(0)[1];\n  const [addVisible, setAddVisible] = useState(false);\n  const [editVisible, setEditVisible] = useState(false);\n  const [current, setCurrent] = useState<Record<string, any>>({});\n\n  const column: ColumnsType<any> = [\n    {\n      title: \"Key\",\n      dataIndex: \"key\",\n      key: \"key\",\n    },\n    {\n      title: \"操作\",\n      align: \"center\",\n      render: (_v, record: any) => {\n        return (\n          <Space size=\"middle\">\n            <Button\n              type=\"link\"\n              onClick={() => {\n                const value =\n                  typeof record.value === \"object\"\n                    ? JSON.stringify(record.value)\n                    : record.value;\n                const obj = { value, key: record.key };\n                editForm.setFieldsValue(obj);\n                setCurrent(record);\n                setEditVisible(true);\n              }}\n            >\n              编辑\n            </Button>\n            <Popconfirm\n              title={replaceLocale(\n                \"control.popup.delete\",\n                \"确认删除么\",\n                config\n              )}\n              onConfirm={() => {\n                const newObj = { ...dataMap };\n                delete newObj[record.key];\n                dataCenter.staticSetToMap({ ...newObj }, props.config);\n                forceUpdate((v) => v + 1);\n              }}\n              okText={replaceLocale(\"yes\", \"确定\", config)}\n              cancelText={replaceLocale(\"no\", \"取消\", config)}\n            >\n              <Button type=\"link\">删除</Button>\n            </Popconfirm>\n          </Space>\n        );\n      },\n    },\n  ];\n  const [form] = Form.useForm();\n  const [editForm] = Form.useForm();\n\n  const formSubmit = (res: any) => {\n    let value: string = res.value;\n    value = value.replace(\"/s\", \"\").replace(\"↵\", \"\");\n    if (value.startsWith(\"{\")) {\n      try {\n        const json = JSON.parse(value);\n        const newObj = { [res.key]: json };\n        dataCenter.staticSetToMap({ ...dataMap, ...newObj }, props.config);\n        setAddVisible(false);\n        form.resetFields();\n      } catch (error) {\n        message.error(\"json格式转换失败\");\n      }\n    } else {\n      const newObj = { [res.key]: value };\n      dataCenter.staticSetToMap({ ...dataMap, ...newObj }, props.config);\n      setAddVisible(false);\n      form.resetFields();\n    }\n  };\n\n  return (\n    <div style={{ width: \"100%\" }}>\n      <Row style={{ marginBottom: \"10px\" }}>\n        <Button\n          type=\"primary\"\n          onClick={() => {\n            setAddVisible(true);\n          }}\n        >\n          添加数据源\n        </Button>\n      </Row>\n      <Row>\n        <Table\n          pagination={false}\n          style={{ width: \"100%\" }}\n          dataSource={dataSource}\n          columns={column}\n        ></Table>\n      </Row>\n      {addVisible && (\n        <Modal\n          visible={addVisible}\n          title={\"添加数据源\"}\n          onCancel={() => {\n            setAddVisible(false);\n            form.resetFields();\n          }}\n          onOk={() => {\n            form.validateFields().then((res) => {\n              formSubmit(res);\n            });\n          }}\n          okText={replaceLocale(\"yes\", \"确定\", config)}\n          cancelText={replaceLocale(\"no\", \"取消\", config)}\n        >\n          <div>\n            <Form form={form} {...formItemLayout}>\n              <Form.Item\n                label=\"key\"\n                name={\"key\"}\n                rules={[\n                  { required: true, message: \"Please input your key\" },\n                  () => ({\n                    validator(_, value) {\n                      if (!keys.includes(value)) {\n                        return Promise.resolve();\n                      }\n                      return Promise.reject(new Error(\"Duplicate  keys!\"));\n                    },\n                  }),\n                  () => ({\n                    validator(_, value) {\n                      if (!reg.exec(value)) {\n                        return Promise.resolve();\n                      }\n                      return Promise.reject(new Error(\"invalid key\"));\n                    },\n                  }),\n                ]}\n              >\n                <Input></Input>\n              </Form.Item>\n              <Form.Item\n                label=\"value\"\n                name={\"value\"}\n                extra={\n                  <Text type=\"warning\">\n                    支持字符串、数字、JSON对象格式，直接输入内容即可\n                  </Text>\n                }\n                rules={[{ required: true, message: \"Please input your value\" }]}\n              >\n                <Input.TextArea></Input.TextArea>\n              </Form.Item>\n            </Form>\n          </div>\n        </Modal>\n      )}\n      {editVisible && (\n        <Modal\n          visible={editVisible}\n          title={\"修改数据源\"}\n          onCancel={() => {\n            setEditVisible(false);\n            editForm.resetFields();\n          }}\n          onOk={() => {\n            editForm.validateFields().then((res) => {\n              let value: string = res.value;\n              value = value.replace(\"/s\", \"\").replace(\"↵\", \"\");\n              if (value.startsWith(\"{\")) {\n                try {\n                  const json = JSON.parse(value);\n                  const newObj = { [current.key]: json };\n                  dataCenter.staticSetToMap(\n                    { ...dataMap, ...newObj },\n                    props.config\n                  );\n                  setEditVisible(false);\n                  editForm.resetFields();\n                } catch (error) {\n                  message.error(\"json格式转换失败\");\n                }\n              } else {\n                const newObj = { [current.key]: value };\n                dataCenter.staticSetToMap(\n                  { ...dataMap, ...newObj },\n                  props.config\n                );\n                setEditVisible(false);\n                editForm.resetFields();\n              }\n            });\n          }}\n          okText={replaceLocale(\"yes\", \"确定\", config)}\n          cancelText={replaceLocale(\"no\", \"取消\", config)}\n        >\n          <Form form={editForm}>\n            <Form.Item\n              label=\"value\"\n              name={\"value\"}\n              extra={\n                <Text type=\"warning\">\n                  支持字符串、数字、JSON对象格式，直接输入内容即可\n                </Text>\n              }\n              rules={[{ required: true, message: \"Please input your value\" }]}\n            >\n              <Input.TextArea></Input.TextArea>\n            </Form.Item>\n          </Form>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default LeftDataPannel;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: chentianshang\n * @LastEditTime: 2021-07-06 09:53:29\n * @FilePath: /DooringV2/packages/dooring-v2-lib/src/core/components/formComponentRegister.ts\n */\n\nimport { ComponentClass, FunctionComponent } from \"react\";\nimport { CreateOptionsRes } from \"./formTypes\";\nexport interface ContainerConfigItem {\n  type: string;\n  option: CreateOptionsRes<any, any>;\n}\nexport const formComponentRegisterFn = (\n  formComponent: FormComponentRegister,\n  modules: Record<string, FunctionComponent<any> | ComponentClass<any, any>>\n) => {\n  Object.keys(modules).forEach((v) => {\n    formComponent.register(v, modules[v]);\n  });\n};\n\n/**\n *\n * 拿到form组件地址和状态\n * 获取配置container配置项和普通组件配置项\n * @export\n * @class FormComponentRegister\n */\nexport class FormComponentRegister {\n  constructor(\n    public formMap: Record<\n      string,\n      FunctionComponent<any> | ComponentClass<any, any>\n    > = {},\n    public listener: Function[] = [],\n    public eventMap: Record<string, Function[]> = {},\n    public containerConfig: Array<ContainerConfigItem> = []\n  ) {}\n  getMap() {\n    return this.formMap;\n  }\n  getComp(name: string) {\n    return this.formMap[name];\n  }\n  getConfig() {\n    return this.containerConfig;\n  }\n  setConfig(config: Array<ContainerConfigItem>) {\n    this.containerConfig = config;\n  }\n  /**\n   *\n   *  同步注册方法\n   * @memberof FormComponentRegister\n   */\n  register(\n    name: string,\n    ele: FunctionComponent<any> | ComponentClass<any, any>\n  ) {\n    this.formMap[name] = ele;\n  }\n\n  emit() {\n    this.listener.forEach((v) => v());\n  }\n\n  on(event: string, fn: Function) {\n    if (!this.eventMap[event]) {\n      this.eventMap[event] = [];\n    }\n    this.eventMap[event].push(fn);\n    return () => this.eventMap[event].filter((v) => v !== fn);\n  }\n}\n","/*\n\n * @Date: 2021-04-08 19:59:01\n * @LastEditors: \n * @LastEditTime: 2022-04-24 00:14:25\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\functionCenter\\index.ts\n */\n\nimport UserConfig from \"../../config\";\nimport { EventCenterMapItem, EventCenterUserSelect } from \"../eventCenter\";\nimport Store from \"../store\";\nimport { specialFnList } from \"../utils/special\";\nimport { FunctionConfigType } from \"./config\";\n\n/**\n *\n * ctx可在事件链中传递，函数完成后调用next执行下一个函数\n * @export\n */\nexport type FunctionCenterFunction = (\n  ctx: Record<string, any>,\n  next: Function,\n  config: UserConfig,\n  args: Record<string, any>,\n  eventList: {\n    arr: Array<EventCenterMapItem>;\n    displayName: string;\n    userSelect: Array<EventCenterUserSelect>;\n  },\n  iname: EventCenterMapItem\n) => void;\n\nexport type FunctionCenterValue = {\n  fn: FunctionCenterFunction;\n  config: FunctionConfigType;\n  name: string;\n  componentId: string;\n};\n\nexport type FunctionCenterType = Record<string, FunctionCenterValue>;\n\n/**\n *\n * 初始化时可以加载初始已配好的函数\n * {}\n * @export\n * @class FunctionCenter\n */\nexport class FunctionCenter {\n  /**\n   *\n   * 该map 用于获取函数未获取到时，异步拉取\n   * @memberof FunctionCenter\n   */\n  public asyncMap: Record<string, Function> = {};\n  public configMap: Record<string, FunctionConfigType> = {};\n  public funcitonMap: Record<string, FunctionCenterFunction> = {};\n  public nameMap: Record<string, string> = {}; // id对名字\n  public componentIdMap: Record<string, Set<string>> = {}; // 组件id对函数id\n  constructor(public initConfig: FunctionCenterType = {}) {\n    this.init(initConfig);\n  }\n\n  init(initConfig: FunctionCenterType) {\n    this.reset();\n    this.funcitonMap = Object.keys(initConfig).reduce<\n      Record<string, FunctionCenterFunction>\n    >((prev, next) => {\n      prev[next] = initConfig[next].fn;\n      return prev;\n    }, {});\n    this.configMap = Object.keys(initConfig).reduce<\n      Record<string, FunctionConfigType>\n    >((prev, next) => {\n      prev[next] = initConfig[next].config;\n      return prev;\n    }, {});\n    this.nameMap = Object.keys(initConfig).reduce<Record<string, string>>(\n      (prev, next) => {\n        prev[next] = initConfig[next].name;\n        return prev;\n      },\n      {}\n    );\n    this.componentIdMap = Object.keys(initConfig).reduce<\n      Record<string, Set<string>>\n    >((prev, next) => {\n      const cid = initConfig[next].componentId;\n      if (prev[cid]) {\n        prev[cid].add(next);\n      } else {\n        prev[cid] = new Set([next]);\n      }\n      return prev;\n    }, {});\n  }\n\n  reset() {\n    this.funcitonMap = {};\n    this.configMap = {};\n    this.nameMap = {};\n    this.componentIdMap = {};\n  }\n\n  getFunctionMap() {\n    return this.funcitonMap;\n  }\n  getConfigMap() {\n    return this.configMap;\n  }\n  getNameMap() {\n    return this.nameMap;\n  }\n\n  /**\n   *\n   * 通过name查id\n   * @param {string} name\n   * @return {*}  {(string | undefined)}\n   * @memberof FunctionCenter\n   */\n  nameToKey(name: string): string | undefined {\n    const keys = Object.keys(this.nameMap);\n    const keylen = keys.length;\n    let result: string | undefined;\n    for (let i = 0; i < keylen; i++) {\n      const key = keys[i];\n      if (this.nameMap[key] === name) {\n        result = key;\n        break;\n      }\n    }\n    return result;\n  }\n\n  /**\n   *\n   *\n   * @param {{\n   * \t\tid: string;唯一值 注意！每个组件都要不一样，所以需要带着每个组件的id，这样也方便区分是哪个组件抛出的函数!!\n   * \t\tfn: FunctionCenterFunction;函数体\n   * \t\tconfig: FunctionConfigType;配置项\n   * \t\tname: string;显示名\n   * \t\tcomponentId: string;所属组件id名用于卸载函数\n   * \t}} obj\n   * @returns\n   * @memberof FunctionCenter\n   */\n  register(obj: {\n    id: string;\n    fn: FunctionCenterFunction;\n    config: FunctionConfigType;\n    name: string;\n    componentId: string;\n  }) {\n    const { id, fn, config, name, componentId } = obj;\n    // 注册时，需要通知asyncmap已经拿到\n    this.funcitonMap[id] = fn;\n    this.configMap[id] = config;\n    this.nameMap[id] = name;\n    if (this.componentIdMap[componentId]) {\n      this.componentIdMap[componentId].add(id);\n    } else {\n      this.componentIdMap[componentId] = new Set([id]);\n    }\n    if (this.asyncMap[id]) {\n      this.asyncMap[id]();\n    }\n    return () => {\n      delete this.funcitonMap[id];\n      delete this.configMap[id];\n      delete this.nameMap[id];\n      this.componentIdMap[componentId].delete(id);\n    };\n  }\n\n  /**\n   *\n   * 画布更新时检查所有组件，不存在的组件和其挂载函数则删除，剔除_inner下的\n   * @memberof FunctionCenter\n   */\n  syncFunction(store: Store) {\n    const special = specialFnList;\n    const allId: string[] = [];\n    const data = store.getData();\n    // modalmap上\n    const map = data.modalMap;\n    Object.keys(map).forEach((v) => {\n      map[v].forEach((k) => {\n        allId.push(k.id);\n      });\n    });\n    // block上\n    data.block.forEach((v) => {\n      allId.push(v.id);\n    });\n    if (store.isEdit()) {\n      // 额外origin上\n      if (data.origin)\n        data.origin?.forEach((v) => {\n          allId.push(v.id);\n        });\n    }\n    const needDelete: string[] = [];\n    Object.keys(this.componentIdMap).forEach((v) => {\n      if (!special.includes(v)) {\n        if (!allId.includes(v)) {\n          needDelete.push(v);\n        }\n      }\n    });\n\n    needDelete.forEach((v) => {\n      const ids = this.componentIdMap[v];\n      ids.forEach((id) => {\n        delete this.funcitonMap[id];\n        delete this.configMap[id];\n        delete this.nameMap[id];\n      });\n      delete this.componentIdMap[v];\n    });\n  }\n\n  /**\n   *\n   * 获取函数，包含异步获取函数 注意某些情况执行顺序\n   * @param {string} name\n   * @return {*}  {Promise<FunctionCenterFunction>}\n   * @memberof FunctionCenter\n   */\n  getFunction(name: string): Promise<FunctionCenterFunction> {\n    //如果拿不到，可能是异步，进行监听回调\n    const fn = this.funcitonMap[name];\n    if (fn) {\n      return Promise.resolve(fn);\n    }\n    return new Promise((resolve) => {\n      console.warn(`waiting the function now ${name} `);\n      this.asyncMap[name] = () => {\n        delete this.asyncMap[name];\n        resolve(this.getFunction(name));\n      };\n    });\n  }\n}\n","/*\n\n * @Date: 2021-04-08 20:22:43\n * @LastEditors: \n * @LastEditTime: 2021-06-28 16:08:56\n * @FilePath: \\DooringV2\\packages\\dooring-v2-lib\\src\\core\\eventCenter\\eventQuene.ts\n */\nimport { EventCenterMapItem, EventCenterUserSelect } from \".\";\nimport UserConfig from \"../../config\";\nimport { FunctionCenterFunction } from \"../functionCenter\";\n\nexport class EventQuene {\n  available: number;\n  waiters: Array<{\n    fn: FunctionCenterFunction;\n    args: any;\n    eventList: {\n      arr: Array<EventCenterMapItem>;\n      displayName: string;\n      userSelect: Array<EventCenterUserSelect>;\n    };\n    iname: EventCenterMapItem;\n  }>;\n  context: Record<string, any>;\n  config: UserConfig;\n  constructor(available: number = 1, config: UserConfig, context = {}) {\n    this.available = available;\n    this.waiters = [];\n    this._continue = this._continue.bind(this);\n    this.context = context;\n    this.config = config;\n  }\n  take(\n    task: FunctionCenterFunction,\n    args: Record<string, any>,\n    eventList: {\n      arr: Array<EventCenterMapItem>;\n      displayName: string;\n      userSelect: Array<EventCenterUserSelect>;\n    },\n    iname: EventCenterMapItem\n  ) {\n    if (this.available > 0) {\n      this.available--;\n      task(\n        this.context,\n        this.leave.bind(this),\n        this.config,\n        args,\n        eventList,\n        iname\n      );\n    } else {\n      this.waiters.push({ fn: task, args: args, eventList, iname });\n    }\n  }\n  leave() {\n    this.available++;\n    if (this.waiters.length > 0) {\n      this._continue();\n    }\n  }\n  _continue() {\n    if (this.available > 0) {\n      this.available--;\n      let task = this.waiters.shift();\n      if (task?.fn) {\n        task.fn(\n          this.context,\n          this.leave.bind(this),\n          this.config,\n          task.args,\n          task.eventList,\n          task.iname\n        );\n      }\n    }\n  }\n}\n","/*\n\n * @Date: 2021-04-06 19:33:17\n * @LastEditors: \n * @LastEditTime: 2022-04-24 00:18:18\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\eventCenter\\index.ts\n */\nimport UserConfig from \"../../config\";\nimport { FunctionCenter, FunctionCenterType } from \"../functionCenter\";\nimport { FunctionDataType } from \"../functionCenter/config\";\nimport Store from \"../store\";\nimport { IStoreData } from \"../store/storetype\";\nimport { EventQuene } from \"./eventQuene\";\n\n// 每个组件制作时可以抛出多个事件，事件名为id+自定义name，\n// 每个组件可以抛出多个函数，存在函数中心\n\nexport interface EventCenterMapItem {\n  name: string; // 函数名\n  args: Record<string, any>; // 输入参数都会变成对象传来，\n  data: Record<string, FunctionDataType>; // 用户选的种类 键是每个配置项名\n}\nexport interface EventCenterUserSelect {\n  uid: string;\n  value: string;\n  detail: Record<string, any>;\n}\n\nexport type EventCenterMapType = Record<\n  string,\n  {\n    arr: Array<EventCenterMapItem>;\n    displayName: string;\n    userSelect: Array<EventCenterUserSelect>;\n  }\n>;\n\nexport class EventCenter {\n  /**\n   * 该map需要存入store,值为函数的key的数组\n   * @param {Record<string, Array<string>>} [eventMap={}]\n   * @memberof EventCenter\n   */\n  public functionCenter: FunctionCenter;\n  constructor(\n    public eventMap: EventCenterMapType = {},\n    configFunction?: FunctionCenterType\n  ) {\n    this.functionCenter = new FunctionCenter(configFunction);\n  }\n\n  getFunctionCenter() {\n    return this.functionCenter;\n  }\n\n  getEventMap() {\n    return this.eventMap;\n  }\n  resetEventMap() {\n    this.eventMap = {};\n  }\n\n  /**\n   *\n   * 重置map进行收集事件 主要就是收集eventMap字段\n   * 这个应该优化在换store情况下。\n   * @param {IStoreData} data\n   * @memberof EventCenter\n   */\n  syncEventMap(data: IStoreData, store: Store) {\n    const sign = store.isEdit();\n    this.eventMap = {};\n    if (sign) {\n      // 收集源block数据\n      if (data.origin) {\n        data.origin.forEach((v) => {\n          this.eventMap = Object.assign(this.eventMap, v.eventMap);\n        });\n      }\n      //收集源modal数据\n      Object.keys(data.modalMap).forEach((v) => {\n        data.modalMap[v].forEach((k) => {\n          this.eventMap = Object.assign(this.eventMap, k.eventMap);\n        });\n      });\n      //收集当前modal数据\n      data.block.forEach((v) => {\n        this.eventMap = Object.assign(this.eventMap, v.eventMap);\n      });\n    } else {\n      data.block.forEach((v) => {\n        this.eventMap = Object.assign(this.eventMap, v.eventMap);\n      });\n      Object.keys(data.modalMap).forEach((v) => {\n        data.modalMap[v].forEach((k) => {\n          this.eventMap = Object.assign(this.eventMap, k.eventMap);\n        });\n      });\n    }\n  }\n\n  /**\n   *\n   * 手动更新状态eventMap\n   * @param {string} name\n   * @memberof EventCenter\n   */\n  manualUpdateMap(\n    name: string,\n    displayName: string,\n    arr?: Array<EventCenterMapItem>\n  ) {\n    if (!this.eventMap[name]) {\n      this.eventMap[name] = {\n        arr: [],\n        displayName: displayName,\n        userSelect: [],\n      };\n    }\n    if (arr && this.eventMap[name].displayName) {\n      this.eventMap[name].arr = arr;\n    } else if (arr && this.eventMap[name]) {\n      this.eventMap[name] = {\n        displayName,\n        arr,\n        userSelect: [],\n      };\n    }\n  }\n\n  /**\n   *\n   * 执行事件链\n   * @param {string} name\n   * @memberof EventCenter\n   */\n  async runEventQueue(name: string, config: UserConfig) {\n    const eventList = this.eventMap[name];\n    if (!eventList) {\n      console.error(`未查询到该事件${name}`);\n      return;\n    }\n    const arr = new EventQuene(1, config);\n    //如果组件异步加载，那么函数会过段时间载入，等同于异步函数\n    // 函数中心需要处理未找到时的异步处理情况\n    if (Array.isArray(eventList.arr)) {\n      for (let i of eventList.arr) {\n        const fn = await this.functionCenter.getFunction(i.name);\n        arr.take(fn, i.args, eventList, i);\n      }\n    }\n  }\n}\n","/*\n\n * @Date: 2021-04-13 11:20:55\n * @LastEditors: \n * @LastEditTime: 2022-04-23 17:54:22\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\dataCenter\\index.ts\n */\n\nimport UserConfig from \"../../config\";\nimport { IStoreData } from \"../store/storetype\";\n\n/**\n *\n * 用来管理页面数据，包括全局数据，做全局设置变量时可以加上\n * 使用Record<string,any>结构，每个组件的数据需要抛出并设定键进行通信。\n * @export\n * @class DataCenter\n */\nexport class DataCenter {\n  public asyncMap: Record<string, Function> = {};\n  constructor(public dataMap: Record<string, any> = {}) {}\n\n  /**\n   *\n   * 拿到map\n   * @return {*}\n   * @memberof DataCenter\n   */\n  getDataMap() {\n    return this.dataMap;\n  }\n\n  /**\n   *\n   * 用于设置map数据\n   * 在异步注册时会触发get的回调，动态不需要持久化\n   * @memberof DataCenter\n   */\n  setToMap(data: Record<string, any>) {\n    this.dataMap = Object.assign(this.dataMap, data);\n    Object.keys(data).forEach((v) => {\n      if (this.asyncMap[v]) {\n        this.asyncMap[v]();\n        delete this.asyncMap[v];\n      }\n    });\n  }\n\n  /**\n   *\n   * 静态设置map 和异步无关 静态需要持久化，datacenter存入store\n   * 该更新不放在redo undo处\n   * @param {Record<string, any>} data\n   * @memberof DataCenter\n   */\n  staticSetToMap(data: Record<string, any>, config: UserConfig) {\n    this.dataMap = data;\n    const store = config.getStore();\n    const storeCurrentData = store.getData();\n    storeCurrentData.dataSource = data;\n  }\n\n  /**\n   *\n   * 初始收集使用  -> to datacenter\n   * @param {IStoreData} data\n   * @memberof DataCenter\n   */\n  initAddToDataMap(data: IStoreData) {\n    this.dataMap = data.dataSource;\n  }\n\n  /**\n   *\n   * 获取值可异步\n   * @param {string} name\n   * @memberof DataCenter\n   */\n  getValue(name: string) {\n    const value = this.dataMap[name];\n    if (value) {\n      return Promise.resolve(value);\n    }\n    return new Promise((resolve) => {\n      this.asyncMap[name] = () => {\n        resolve(this.getValue(name));\n      };\n    });\n  }\n\n  /**\n   *\n   * 获取值不可异步\n   * @param {string} name\n   * @memberof DataCenter\n   */\n  get(name: string) {\n    const value = this.dataMap[name];\n    return value;\n  }\n}\n","/*\n\n * @Date: 2021-07-07 10:28:09\n * @LastEditors: \n * @LastEditTime: 2021-07-07 23:16:31\n * @FilePath: \\DooringV2\\packages\\lowcode-lib\\src\\core\\scale\\state.ts\n */\nexport const scaleState = {\n  value: 0.8,\n  maxValue: 1.3,\n  minValue: 0.4,\n};\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-09-28 20:48:17\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\components\\abstract.ts\n */\nimport { ComponentItem } from \"./componentItem\";\n\nexport class ComponentItemFactory implements ComponentItem {\n  constructor(\n    public name: ComponentItem[\"name\"],\n    public display: ComponentItem[\"display\"],\n    public props: ComponentItem[\"props\"],\n    public initData: ComponentItem[\"initData\"],\n    public render: ComponentItem[\"render\"],\n    public resize: ComponentItem[\"resize\"] = true,\n    public needPosition: ComponentItem[\"needPosition\"] = true,\n    public init: ComponentItem[\"init\"] = () => {},\n    public destroy: ComponentItem[\"destroy\"] = () => {},\n    public remoteConfig: ComponentItem[\"remoteConfig\"] = {}\n  ) {}\n}\n","/*\n\n * @Date: 2021-04-04 20:35:11\n * @LastEditors: \n * @LastEditTime: 2022-04-23 18:36:23\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\components\\defaultFormComponents\\modalMask.tsx\n */\nimport { SaveOutlined } from \"@ant-design/icons\";\nimport { Button } from \"antd\";\nimport React from \"react\";\nimport { ComponentItemFactory } from \"../abstract\";\n\nconst MmodalMask = new ComponentItemFactory(\n  \"modalMask\",\n  \"模态框遮罩\",\n  {},\n  {\n    props: {},\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    zIndex: 999,\n    width: \"100%\",\n    height: \"100%\",\n    canDrag: false,\n  },\n  (_, context, store, config) => {\n    const container = store.getData().container;\n    return (\n      <div\n        style={{\n          width: context === \"preview\" ? \"100%\" : container.width,\n          height: context === \"preview\" ? \"100%\" : container.height,\n          backgroundColor: \"#716f6f9e\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        {context === \"edit\" && (\n          <Button\n            type=\"primary\"\n            shape=\"circle\"\n            title=\"save\"\n            style={{ position: \"absolute\", right: \"10px\", top: \"10px\" }}\n            icon={<SaveOutlined></SaveOutlined>}\n            onClick={() => {\n              config.getStore().closeModal();\n            }}\n          ></Button>\n        )}\n      </div>\n    );\n  },\n  true,\n  false\n);\n\nexport default MmodalMask;\n","export default {\n  Cancel: 3,\n  Help: 6,\n  Backspace: 8,\n  Tab: 9,\n  Clear: 12,\n  Enter: 13,\n  Shift: 16,\n  Control: 17,\n  Alt: 18,\n  Pause: 19,\n  CapsLock: 20,\n  Escape: 27,\n  Convert: 28,\n  NonConvert: 29,\n  Accept: 30,\n  ModeChange: 31,\n  \" \": 32,\n  PageUp: 33,\n  PageDown: 34,\n  End: 35,\n  Home: 36,\n  ArrowLeft: 37,\n  ArrowUp: 38,\n  ArrowRight: 39,\n  ArrowDown: 40,\n  Select: 41,\n  Print: 42,\n  Execute: 43,\n  PrintScreen: 44,\n  Insert: 45,\n  Delete: 46,\n  0: 48,\n  \")\": 48,\n  1: 49,\n  \"!\": 49,\n  2: 50,\n  \"@\": 50,\n  3: 51,\n  \"#\": 51,\n  4: 52,\n  $: 52,\n  5: 53,\n  \"%\": 53,\n  6: 54,\n  \"^\": 54,\n  7: 55,\n  \"&\": 55,\n  8: 56,\n  \"*\": 56,\n  9: 57,\n  \"(\": 57,\n  a: 65,\n  A: 65,\n  b: 66,\n  B: 66,\n  c: 67,\n  C: 67,\n  d: 68,\n  D: 68,\n  e: 69,\n  E: 69,\n  f: 70,\n  F: 70,\n  g: 71,\n  G: 71,\n  h: 72,\n  H: 72,\n  i: 73,\n  I: 73,\n  j: 74,\n  J: 74,\n  k: 75,\n  K: 75,\n  l: 76,\n  L: 76,\n  m: 77,\n  M: 77,\n  n: 78,\n  N: 78,\n  o: 79,\n  O: 79,\n  p: 80,\n  P: 80,\n  q: 81,\n  Q: 81,\n  r: 82,\n  R: 82,\n  s: 83,\n  S: 83,\n  t: 84,\n  T: 84,\n  u: 85,\n  U: 85,\n  v: 86,\n  V: 86,\n  w: 87,\n  W: 87,\n  x: 88,\n  X: 88,\n  y: 89,\n  Y: 89,\n  z: 90,\n  Z: 90,\n  OS: 91,\n  ContextMenu: 93,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  F13: 124,\n  F14: 125,\n  F15: 126,\n  F16: 127,\n  F17: 128,\n  F18: 129,\n  F19: 130,\n  F20: 131,\n  F21: 132,\n  F22: 133,\n  F23: 134,\n  F24: 135,\n  NumLock: 144,\n  ScrollLock: 145,\n  VolumeMute: 181,\n  VolumeDown: 182,\n  VolumeUp: 183,\n  \";\": 186,\n  \":\": 186,\n  \"=\": 187,\n  \"+\": 187,\n  \",\": 188,\n  \"<\": 188,\n  \"-\": 189,\n  _: 189,\n  \".\": 190,\n  \">\": 190,\n  \"/\": 191,\n  \"?\": 191,\n  \"`\": 192,\n  \"~\": 192,\n  \"[\": 219,\n  \"{\": 219,\n  \"\\\\\": 220,\n  \"|\": 220,\n  \"]\": 221,\n  \"}\": 221,\n  \"'\": 222,\n  '\"': 222,\n  Meta: 224,\n  AltGraph: 225,\n  Attn: 246,\n  CrSel: 247,\n  ExSel: 248,\n  EraseEof: 249,\n  Play: 250,\n  ZoomOut: 251,\n};\n\nconst keymap: Record<string, string> = {\n  a: \"a\",\n  A: \"a\",\n  b: \"b\",\n  B: \"b\",\n  c: \"c\",\n  C: \"c\",\n  d: \"d\",\n  D: \"d\",\n  e: \"e\",\n  E: \"e\",\n  f: \"f\",\n  F: \"f\",\n  g: \"g\",\n  G: \"g\",\n  h: \"h\",\n  H: \"h\",\n  i: \"i\",\n  I: \"i\",\n  j: \"j\",\n  J: \"j\",\n  k: \"k\",\n  K: \"k\",\n  l: \"l\",\n  L: \"l\",\n  m: \"m\",\n  M: \"m\",\n  n: \"n\",\n  N: \"n\",\n  o: \"o\",\n  O: \"o\",\n  p: \"p\",\n  P: \"p\",\n  q: \"q\",\n  Q: \"q\",\n  r: \"r\",\n  R: \"r\",\n  s: \"s\",\n  S: \"s\",\n  t: \"t\",\n  T: \"t\",\n  u: \"u\",\n  U: \"u\",\n  v: \"v\",\n  V: \"v\",\n  w: \"w\",\n  W: \"w\",\n  x: \"x\",\n  X: \"x\",\n  y: \"y\",\n  Y: \"y\",\n  z: \"z\",\n  Z: \"z\",\n};\n\nexport const keycodeFilter = (key: string) => {\n  return keymap[key];\n};\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-07-12 14:52:28\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\command\\index.ts\n */\nimport UserConfig from \"../../config\";\nimport Store from \"../store\";\nimport { CommanderItem } from \"./commanderType\";\nimport { keycodeFilter } from \"./keycode\";\n\nclass CommanderWrapper {\n  constructor(\n    public store: Store,\n    public commandMap: Record<string, CommanderItem> = {},\n    public config: UserConfig\n  ) {}\n  getList() {\n    return this.commandMap;\n  }\n  register(item: CommanderItem) {\n    item.init();\n    if (this.commandMap[item.name]) {\n      // console.error(`${item.name} commander has registed`);\n      return;\n    }\n    this.commandMap[item.name] = item;\n    //注册快捷键，快捷键执行调用excute\n    const remove = this.registerKeyBoard(item);\n    //改写销毁方法\n    const origindestroy = item.destroy;\n    const newdestroy = () => {\n      remove();\n      origindestroy();\n    };\n    item.destroy = newdestroy;\n  }\n\n  registerKeyBoard(current: CommanderItem) {\n    if (current.keyboard.length === 0) {\n      return () => {};\n    }\n    const onKeydown = (e: KeyboardEvent) => {\n      if (\n        document.activeElement !== document.body &&\n        e.target !== document.body\n      ) {\n        return;\n      }\n      const { shiftKey, altKey, ctrlKey, metaKey, key } = e;\n      const keyString: string[] = [];\n      if (ctrlKey || metaKey) keyString.push(\"Control\");\n      if (shiftKey) keyString.push(\"Shift\");\n      if (altKey) keyString.push(\"Alt\");\n      if (key !== \"Control\" && key !== \"Shift\" && key !== \"Alt\") {\n        const res = keycodeFilter(key);\n        if (res !== undefined) {\n          keyString.push(res);\n        } else {\n          keyString.push(key);\n        }\n      }\n      const keyname = keyString.join(\"+\");\n      if (current.keyboard === keyname) {\n        current.excute(this.store, this.config);\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    };\n    window.addEventListener(\"keydown\", onKeydown);\n    return () => window.removeEventListener(\"keydown\", onKeydown);\n  }\n\n  unRegister(name: string) {\n    if (!this.commandMap[name]) {\n      console.error(`${name} commander not found`);\n      return;\n    }\n    const item = this.commandMap[name];\n    item.destroy();\n    delete this.commandMap[item.name];\n  }\n  exec(name: string, options?: any) {\n    if (!this.commandMap[name]) {\n      console.error(`${name} commander not found`);\n      return;\n    }\n    this.commandMap[name].excute(this.store, this.config, options);\n  }\n}\nexport default CommanderWrapper;\n","/*\n\n * @Date: 2021-03-14 12:06:20\n * @LastEditors: \n * @LastEditTime: 2021-03-14 12:06:50\n * @FilePath: \\dooring-v2\\src\\core\\focusHandler\\state.ts\n */\nimport { IBlockType } from \"../store/storetype\";\nexport interface FocusStateType {\n  blocks: IBlockType[];\n}\nexport const focusState: FocusStateType = {\n  blocks: [],\n};\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2022-04-06 22:21:00\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\components\\index.ts\n */\nimport { ComponentItemFactory } from \"./abstract\";\nimport { ComponentItem } from \"./componentItem\";\n\n/**\n *\n * 注册组件需要异步的，由注册时效果决定。\n * 主要是存放所有已注册组件。可以在其render时提供对应context\n * @class ComponentRegister\n */\nclass ComponentRegister {\n  constructor(\n    public componentMap: Record<string, ComponentItem> = {},\n    public componentList: ComponentItem[] = [],\n    public listener: Function[] = [],\n    public eventMap: Record<string, Function[]> = {}\n  ) {}\n  getMap() {\n    return this.componentMap;\n  }\n  getList() {\n    return this.componentList;\n  }\n  getComp(name: string) {\n    return this.componentMap[name];\n  }\n\n  subscribe(fn: Function) {\n    this.listener.push(fn);\n    return () => this.listener.filter((v) => v !== fn);\n  }\n\n  emit() {\n    this.listener.forEach((v) => v());\n  }\n\n  on(event: string, fn: Function) {\n    if (!this.eventMap[event]) {\n      this.eventMap[event] = [];\n    }\n    this.eventMap[event].push(fn);\n    return () => this.eventMap[event].filter((v) => v !== fn);\n  }\n  emitEvent(event: string) {\n    if (!this.eventMap[event]) {\n      return;\n    }\n    this.eventMap[event].forEach((v) => v());\n  }\n\n  register(item: ComponentItem) {\n    if (this.componentMap[item.name]) {\n      // console.error(`${item.name} component has registed`);\n      return;\n    }\n    if (!(item instanceof ComponentItemFactory)) {\n      console.error(item, \"may be a problem in register\");\n    }\n\n    this.componentMap[item.name] = item;\n    this.componentList.push(item);\n    this.emit();\n    item.init();\n  }\n\n  unRegister(name: string) {\n    if (!this.componentMap[name]) {\n      console.error(`${name} component not found`);\n      return;\n    }\n    const item = this.componentMap[name];\n    item.destroy();\n    this.emit();\n    this.componentList = this.componentList.filter((v) => v !== item);\n    delete this.componentMap[item.name];\n  }\n}\nexport default ComponentRegister;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2022-04-23 18:53:36\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\store\\index.ts\n */\nimport deepcopy from \"deepcopy\";\nimport { createDefaultModalBlock } from \"./createModal\";\nimport { IBlockType, IStoreData } from \"./storetype\";\n\nexport const initialData: IStoreData = {\n  container: {\n    width: 375,\n    height: 667,\n    isMinwx: true,\n  },\n  block: [],\n  modalMap: {},\n  dataSource: {},\n  globalState: {},\n  modalConfig: {},\n  origin: null,\n  modalEditName: \"\",\n};\n\nclass Store {\n  static instance: Store;\n  constructor(\n    public storeDataList: IStoreData[] = [initialData],\n    public listeners: Array<Function> = [],\n    public current: number = 0,\n    public forceupdate: Function = () => {}\n  ) {}\n\n  getData() {\n    return this.storeDataList[this.current];\n  }\n  getStoreList() {\n    return this.storeDataList;\n  }\n\n  getListeners() {\n    return this.listeners;\n  }\n\n  getIndex() {\n    return this.current;\n  }\n  getOriginBlock() {\n    if (this.isEdit()) {\n      return this.getData().origin as IBlockType[];\n    } else {\n      return this.getData().block;\n    }\n  }\n\n  /**\n   *\n   * 编辑状态转普通\n   * @param {IStoreData} data\n   * @returns\n   * @memberof Store\n   */\n  changeModaltoNormal(data: IStoreData) {\n    if (data.modalEditName === \"\") {\n      return;\n    }\n    const tmp = data.origin || [];\n    data.modalMap = { ...data.modalMap, [data.modalEditName]: data.block };\n    data.block = tmp;\n    data.modalEditName = \"\";\n    data.origin = null;\n    return {};\n  }\n  /**\n   *\n   * 非编辑转编辑且已有弹窗\n   * @param {IStoreData} data\n   * @returns\n   * @memberof Store\n   */\n  changeNormalToModal(data: IStoreData, name: string) {\n    if (data.modalEditName !== \"\") {\n      return {\n        success: false,\n        sign: 0,\n      };\n    }\n    const sign2 = this.isInModalMap(name);\n    if (!sign2) {\n      return {\n        success: false,\n        sign: 1,\n        param: name,\n      };\n    }\n    const tmp = data.block || [];\n    const modalBlock = data.modalMap[name];\n    data.block = modalBlock;\n    data.modalEditName = name;\n    data.origin = tmp;\n    return { success: true, sign: -1 };\n  }\n  /**\n   *\n   * 非编辑状态新增\n   * @param {IStoreData} data\n   * @returns\n   * @memberof Store\n   */\n  newModaltoNormal(data: IStoreData, name: string) {\n    if (data.modalEditName !== \"\") {\n      return;\n    }\n    const tmp = data.block || [];\n    const modalBlock = createDefaultModalBlock();\n    data.modalMap = { ...data.modalMap, [name]: modalBlock };\n    data.block = modalBlock;\n    data.modalEditName = name;\n    data.origin = tmp;\n  }\n\n  /**\n   *\n   * 判断是否编辑\n   * @returns\n   * @memberof Store\n   */\n  isEdit() {\n    if (this.getData().modalEditName !== \"\") {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   *\n   *  判断有没有这个弹窗\n   * @param {Store} store\n   * @param {string} name\n   * @returns\n   * @memberof Store\n   */\n  isInModalMap(name: string) {\n    const modalNameList = Object.keys(this.getData().modalMap);\n    if (modalNameList.includes(name)) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   *\n   * 保存现阶段store，将store替换为新modal数据\n   */\n  newModalMap(name: string) {\n    const sign = this.isEdit();\n    if (sign) {\n      return {\n        succeess: false,\n        sign: 0,\n      };\n    }\n    //新建modal name不能重名，否则直接报错\n    const sign2 = this.isInModalMap(name);\n    if (sign2) {\n      return {\n        succeess: false,\n        sign: 1,\n        param: name,\n      };\n    }\n    const copyData = deepcopy(this.getData());\n    this.newModaltoNormal(copyData, name);\n    this.setData(copyData);\n    return {\n      succeess: true,\n      sign: -1,\n    };\n  }\n\n  /**\n   *\n   * 存储modal到主store的map中，切换主store\n   * @memberof StoreChanger\n   */\n  closeModal() {\n    const sign = this.isEdit();\n    if (!sign) {\n      return {\n        success: false,\n        sign: 0,\n      };\n    }\n    const data = deepcopy(this.getData());\n    this.changeModaltoNormal(data);\n    this.setData(data);\n    return {\n      success: true,\n      sign: 0,\n    };\n  }\n  /**\n   *\n   * 删除弹窗，不能处于编辑弹窗状态\n   * @param {string} name\n   * @returns\n   */\n  removeModal(name: string) {\n    const sign = this.isEdit();\n    if (sign) {\n      return {\n        success: false,\n        sign: 0,\n      };\n    }\n    const sign2 = this.isInModalMap(name);\n    if (!sign2) {\n      return {\n        success: false,\n        sign: 1,\n        param: name,\n      };\n    }\n    const cloneData: IStoreData = deepcopy(this.getData());\n    delete cloneData.modalMap[name];\n    this.setData(cloneData);\n    return {\n      success: true,\n      sign: -1,\n    };\n  }\n  /**\n   *\n   * 重置需要注册事件\n   * @param {IStoreData[]} initData\n   * @param {boolean} [check=false] 清空编辑弹窗状态\n   * @memberof Store\n   */\n  resetToInitData(initData: IStoreData[], check = false) {\n    this.storeDataList = initData;\n    this.current = 0;\n    const d = this.getData();\n    //如果是编辑模式，需要修改\n    if (d.modalEditName !== \"\" && check) {\n      this.changeModaltoNormal(d);\n    }\n    this.emit();\n  }\n  /**\n   *\n   * 注意重置需要注册事件\n   * @param {IStoreData[]} initData\n   * @param {number} current\n   * @param {boolean} [check=false]\n   * @memberof Store\n   */\n  resetToCustomData(initData: IStoreData[], current: number, check = false) {\n    this.storeDataList = initData;\n    this.current = current;\n    //如果是编辑模式，需要修改\n    const d = this.getData();\n    if (d.modalEditName !== \"\" && check) {\n      this.changeModaltoNormal(d);\n    }\n    this.emit();\n  }\n  resetListeners() {\n    this.listeners = [];\n  }\n\n  replaceList(list: IStoreData[]) {\n    this.storeDataList = list;\n  }\n\n  setForceUpdate(fn: Function) {\n    this.forceupdate = fn;\n  }\n  forceUpdate() {\n    this.forceupdate();\n  }\n\n  setIndex(num: number) {\n    this.current = num;\n  }\n\n  redo() {\n    const maxLength = this.storeDataList.length;\n    if (this.current + 1 < maxLength) {\n      this.current = this.current + 1;\n      this.emit();\n    }\n  }\n\n  undo() {\n    if (this.current > 0) {\n      this.current = this.current - 1;\n      this.emit();\n    }\n  }\n\n  cleanRedundant(index: number) {\n    this.storeDataList = this.storeDataList.slice(0, index + 1);\n  }\n\n  setData(data: IStoreData) {\n    // 如果current不是最后那个，说明后面的被undo过的，如果要新增，那么需要清除之前的\n    let flag = true;\n    if (this.current + 1 !== this.storeDataList.length) {\n      this.cleanRedundant(this.current);\n      flag = false;\n    }\n    this.current = this.current + 1;\n    this.storeDataList[this.current] = data;\n    if (flag && this.current + 1 !== this.storeDataList.length) {\n      this.storeDataList.length = this.current + 1;\n    }\n\n    this.emit();\n  }\n\n  cleanLast() {\n    if (this.current <= 1) {\n      return;\n    }\n    const removeIndex = this.current - 1;\n    this.storeDataList.splice(removeIndex, 1);\n    this.current = this.current - 1;\n  }\n\n  emit() {\n    this.listeners.forEach((fn) => {\n      fn(this.getData());\n    });\n  }\n\n  subscribe(listener: Function) {\n    this.listeners.push(listener);\n    return () =>\n      (this.listeners = this.listeners.filter((v) => v !== listener));\n  }\n}\n\nexport default Store;\n","/*\n\n * @Date: 2022-04-23 17:03:36\n * @LastEditors: \n * @LastEditTime: 2022-04-23 17:03:37\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\core\\store\\createModal.ts\n */\nimport { createUid } from \"../utils\";\nimport { IStoreData } from \"./storetype\";\n\nexport function createDefaultModalBlock(): IStoreData[\"block\"] {\n  return [\n    {\n      id: createUid(\"modal-mask\"),\n      name: \"modalMask\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      zIndex: 0,\n      props: {},\n      resize: true,\n      focus: false,\n      canSee: true,\n      position: \"absolute\",\n      display: \"block\",\n      syncList: [],\n      canDrag: false,\n      eventMap: {},\n      functionList: [],\n      animate: [],\n      fixed: true,\n      rotate: {\n        value: 0,\n        canRotate: false,\n      },\n    },\n  ];\n}\n","import UserConfig from \"../../config\";\nimport {\n  CustomAnimateObj,\n  IMainStoreData,\n  IStoreData,\n} from \"../store/storetype\";\nimport { deepCopy } from \"../utils\";\n\n/**\n *\n *  opacity: 100\n    percent: 0\n    positionX: 0\n    positionY: 0\n    rotate: 0\n    scale: 100\n * @export 转换使用\n * @interface TransformItemObj\n */\nexport interface TransformItemObj {\n  opacity: number;\n  percent: number;\n  positionX: number;\n  positionY: number;\n  rotate: number;\n  scale: number;\n}\n\n/**\n *\n *\n * @export 用户输入对象\n * @interface TransformItem\n */\nexport interface TransformItem {\n  displayName: string;\n  animateName: string;\n  keyframes: TransformItemObj[];\n}\nexport const styleSheetId = \"dooringx_dynamic_style\";\nexport class AnimateFactory {\n  constructor(public customAnimateName: Array<CustomAnimateObj> = []) {}\n\n  getCustomAnimateName() {\n    return this.customAnimateName;\n  }\n  searchSheet(): null | CSSStyleSheet {\n    let sheet: null | CSSStyleSheet = null;\n    Array.from(document.styleSheets).forEach((v) => {\n      const node = v?.ownerNode as Element;\n      if (node?.id === styleSheetId) {\n        sheet = v;\n      }\n    });\n    return sheet;\n  }\n\n  getStyleSheets() {\n    let sheet = this.searchSheet();\n    if (!sheet) {\n      let style = document.createElement(\"style\");\n      style.id = styleSheetId;\n      style.appendChild(document.createTextNode(\"\"));\n      document.head.appendChild(style);\n    }\n    sheet = this.searchSheet();\n    return sheet;\n  }\n\n  /**\n   *\n   * 插入动画\n   * @param {string} ruleText\n   * @memberof AnimateFactory\n   */\n  inserKeyframeAnimate(ruleText: string) {\n    const sheet = this.getStyleSheets();\n    if (sheet) sheet.insertRule(ruleText, sheet.cssRules.length);\n  }\n\n  /**\n   *\n   * 删除keyframe\n   * @param {string} animateName\n   * @returns\n   * @memberof AnimateFactory\n   */\n  deleteKeyFrameAnimate(animateName: string) {\n    const sheets = this.getStyleSheets();\n    if (!sheets) {\n      return;\n    }\n    const len = sheets.cssRules.length;\n    let ss = null;\n    for (let i = 0; i < len; i++) {\n      const rule = sheets.cssRules[i] as CSSKeyframesRule;\n      const name = rule?.name;\n      if (name && name === animateName) {\n        ss = i;\n      }\n    }\n    if (ss !== null) {\n      sheets.deleteRule(ss);\n    }\n  }\n\n  /**\n   *\n   * 配置时使用\n   * @param {Array<CustomAnimateObj>} [customAnimateNameArr=[]]\n   * @memberof AnimateFactory\n   */\n  addCustomAnimate(customAnimateNameArr: Array<CustomAnimateObj> = []) {\n    this.customAnimateName = [\n      ...this.customAnimateName,\n      ...customAnimateNameArr,\n    ];\n  }\n\n  /**\n   *\n   * 删除使用animateName 防止displayName重名 用完需要同步store\n   * @param {string} animateName\n   * @memberof AnimateFactory\n   */\n  deleteCustomAnimate(animateName: string) {\n    this.customAnimateName = this.customAnimateName.filter(\n      (v) => v.animateName !== animateName\n    );\n  }\n\n  /**\n   *\n   * 从配置项插入动画 导入设置\n   * @memberof AnimateFactory\n   */\n  fromArrInsertKeyFrame(\n    customAnimateName: Array<CustomAnimateObj> = this.customAnimateName\n  ) {\n    customAnimateName.forEach((v) => {\n      this.inserKeyframeAnimate(v.keyframe);\n    });\n  }\n\n  /**\n   *\n   * 将this.customAnimateName写入store\n   * @memberof AnimateFactory\n   */\n  syncToStore(config: UserConfig) {\n    // 先判断global的位置\n    const store = config.getStore();\n    let data = store.getData();\n    const copy = deepCopy(data);\n    const originGlobal = copy.globalState as IMainStoreData[\"globalState\"];\n    originGlobal.customAnimate = [...this.customAnimateName];\n    store.setData(copy);\n  }\n\n  /**\n   *\n   * 将store中的配置写入config\n   * 注意！只在导入新store后使用\n   * @memberof AnimateFactory\n   */\n  syncStoreToConfig(config: UserConfig) {\n    const store = config.getStore();\n    let data: IStoreData;\n    data = store.getData();\n    const dataAnimate = data.globalState?.customAnimate;\n    this.customAnimateName = [...dataAnimate];\n  }\n\n  /**\n   *\n   * 将用户输入转换为新的动画\n   * @param {TransformItem} item\n   * @memberof AnimateFactory\n   */\n  addUserInputIntoCustom(item: TransformItem, config: UserConfig) {\n    // 先转换keyframe\n    const keyframeItem = item.keyframes.map((v) => {\n      return `${v.percent}% {\n            transform:translate(${v.positionX}px, ${v.positionY}px) scale(${(\n        v.scale / 100\n      ).toFixed(2)}) rotate(${v.rotate}deg);\n         }`;\n    });\n    const keyframe = `@keyframes ${item.animateName} {\n      ${keyframeItem.join(\" \")}\n    }`;\n    const customAnimateNameArr: CustomAnimateObj[] = [\n      {\n        displayName: item.displayName,\n        keyframe,\n        animateName: item.animateName,\n      },\n    ];\n    // 添加内置\n    this.addCustomAnimate(customAnimateNameArr);\n    // 插入动画\n    this.inserKeyframeAnimate(keyframe);\n    // 写入store\n    this.syncToStore(config);\n  }\n}\n","/*\n\n * @Date: 2021-02-25 21:16:58\n * @LastEditors: \n * @LastEditTime: 2022-04-29 23:23:42\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\config\\index.tsx\n */\nimport React from \"react\";\nimport {\n  IBlockType,\n  IMainStoreData,\n  IStoreData,\n} from \"../core/store/storetype\";\nimport { ComponentClass, FunctionComponent, ReactNode } from \"react\";\nimport { ComponentItemFactory } from \"../core/components/abstract\";\nimport { marklineConfig } from \"../core/markline/marklineConfig\";\nimport { CommanderItem } from \"../core/command/commanderType\";\nimport { contextMenuState } from \"../core/contextMenu\";\nimport {\n  FormComponentRegister,\n  formComponentRegisterFn,\n} from \"../core/components/formComponentRegister\";\nimport { deepCopy } from \"../core/utils\";\nimport { LeftRegistComponentMapItem } from \"../core/crossDrag\";\nimport { FunctionCenterType } from \"../core/functionCenter\";\nimport { EventCenter } from \"../core/eventCenter\";\nimport { DataCenter } from \"../core/dataCenter\";\nimport { createModal, unmountMap } from \"../components/modalRender\";\nimport { scaleState } from \"../core/scale/state\";\nimport { CommanderItemFactory } from \"../core/command/abstract\";\nimport MmodalMask from \"../core/components/defaultFormComponents/modalMask\";\nimport CommanderWrapper from \"../core/command\";\nimport { focusState } from \"../core/focusHandler/state\";\nimport ComponentRegister from \"../core/components\";\nimport Store from \"../core/store\";\nimport { VerticalAlignMiddleOutlined } from \"@ant-design/icons\";\nimport { wrapperMoveState } from \"../components/wrapperMove/event\";\nimport { wrapperMoveState as iframeWrapperMoveState } from \"../components/IframeWrapperMove/event\";\nimport {\n  TimeLineConfigType,\n  TimeLineNeedleConfigType,\n} from \"../components/timeLine/timeline\";\nimport { AnimateFactory } from \"../core/AnimateFactory\";\n// 组件部分\n\n/**\n *\n * @urlFn 组件异步加载函数\n * @component  组件默认导出\n * @export\n * @interface CacheComponentValueType\n */\nexport interface CacheComponentValueType {\n  component?: ComponentItemFactory;\n}\nexport type CacheComponentType = Record<string, CacheComponentValueType> | {};\nexport type AsyncCacheComponentType = Record<string, () => Promise<any>>;\n\n/**\n *\n *\n * @export 左侧的图标 custom 自定义渲染\n * @interface LeftMapRenderListPropsItemCategory\n */\nexport interface LeftMapRenderListPropsItemCategory {\n  type: string;\n  icon: ReactNode;\n  custom?: boolean;\n  customRender?: (config: UserConfig) => ReactNode;\n  displayName?: string;\n}\n\n/**\n *\n *\n * @export 右侧的图标配置\n * @interface RightMapRenderListPropsItemCategory\n */\nexport interface RightMapRenderListPropsItemCategory {\n  type: string;\n  icon: ReactNode;\n  custom?: boolean;\n  customRender?: (\n    type: string,\n    current: IBlockType,\n    config: UserConfig\n  ) => ReactNode;\n}\n\n// 设置部分\nexport interface InitConfig {\n  /**\n   * 初始化store\n   * @type {IStoreData[]}\n   * @memberof InitConfig\n   */\n  initStoreData: IStoreData[];\n\n  /**\n   *  左边tab页组件渲染包括异步路径  { type: 'basic', component: 'button', img: 'http://xxxx/1.jpg' ,url:'' },\n   * @memberof InitConfig\n   */\n  leftAllRegistMap: LeftRegistComponentMapItem[];\n  /**\n   * 左边tab页图标配置\n   * type icon custom customRender\n   * @memberof InitConfig\n   */\n  leftRenderListCategory: LeftMapRenderListPropsItemCategory[];\n  /**\n   * 右边tab页图标配置\n   * type icon custom customRender\n   * @memberof InitConfig\n   */\n  rightRenderListCategory: RightMapRenderListPropsItemCategory[];\n\n  /**\n   *\n   * 右侧全局自定义\n   * @memberof InitConfig\n   */\n  rightGlobalCustom: ((config: UserConfig) => ReactNode) | null | undefined;\n\n  /**\n   * 组件加载缓存判定，用来设置不异步加载的组件\n   * @memberof InitConfig\n   */\n  initComponentCache: CacheComponentType;\n\n  /**\n   *\n   * 内置函数配置\n   * @memberof InitConfig\n   */\n  initFunctionMap: FunctionCenterType;\n\n  /**\n   *\n   * 内置数据中心配置数据\n   * @memberof InitConfig\n   */\n  initDataCenterMap: Record<string, any>;\n\n  /**\n   *\n   * commander 指令集合\n   * @type {Array<CommanderItemFactory>}\n   * @memberof InitConfig\n   */\n  initCommandModule: Array<CommanderItemFactory>;\n\n  /**\n   *\n   *  右侧配置项\n   * @type {(Record<\n   *   string,\n   *   FunctionComponent<any> | ComponentClass<any, any>\n   * >)}\n   * @memberof InitConfig\n   */\n  initFormComponents: Record<\n    string,\n    FunctionComponent<any> | ComponentClass<any, any>\n  >;\n\n  /**\n   *\n   * 容器拉伸图标\n   * @type {ReactNode}\n   * @memberof InitConfig\n   */\n  containerIcon: ReactNode;\n}\n\nexport const defaultStore: IMainStoreData = {\n  container: {\n    width: 375,\n    height: 667,\n    isMinwx: true,\n  },\n  block: [],\n  modalMap: {},\n  dataSource: {\n    defaultKey: \"defaultValue\",\n  },\n  globalState: {\n    containerColor: \"rgba(255,255,255,1)\",\n    title: \"lowCode\",\n    description:'店铺模板',\n    bodyColor: \"rgba(255,255,255,1)\",\n    script: [],\n    customAnimate: [],\n    lineHeight: 1.575,\n    fontSize: 14,\n  },\n  modalConfig: {},\n  modalEditName: \"\",\n  origin: null,\n};\n\nexport const defaultConfig: InitConfig = {\n  initStoreData: [defaultStore],\n  leftAllRegistMap: [],\n  leftRenderListCategory: [],\n  rightGlobalCustom: null,\n  rightRenderListCategory: [],\n  initComponentCache: {\n    modalMask: { component: MmodalMask }, // 这个组件不配置显示\n  },\n  initFunctionMap: {\n    open_modal: {\n      fn: (_ctx, next, config, args) => {\n        const modalName = args[\"_modal\"];\n        const storeData = config.getStore().getData();\n        createModal(modalName, storeData, config);\n        next();\n      },\n      config: [\n        {\n          name: \"弹窗名称\",\n          data: [\"modal\"],\n          options: {\n            receive: \"_modal\",\n            multi: false,\n          },\n        },\n      ],\n      name: \"打开弹窗函数\",\n      componentId: \"_inner\",\n    },\n    close_modal: {\n      fn: (_ctx, next, _config, args) => {\n        const modalName = args[\"_modal\"];\n        const fn = unmountMap.get(modalName);\n        if (fn) {\n          fn();\n        }\n        next();\n      },\n      config: [\n        {\n          name: \"弹窗名称\",\n          data: [\"modal\"],\n          options: {\n            receive: \"_modal\",\n            multi: false,\n          },\n        },\n      ],\n      name: \"关闭弹窗函数\",\n      componentId: \"_inner\",\n    },\n  },\n  initDataCenterMap: {},\n  initCommandModule: [],\n  initFormComponents: {},\n  containerIcon: <VerticalAlignMiddleOutlined />,\n};\n\n/**\n *\n * 部分无法合并属性如果b传了会以b为准\n * initstore不合并\n * leftallregistmap合并\n * leftRenderListCategory合并\n * rightRenderListCategory合并\n * rightGlobalCustom 不合并\n * initComponentCache合并\n * initFunctionMap合并\n * initDataCenterMap合并\n * initCommandModule合并\n * initFormComponents合并\n * containerIcon不合并\n *\n * @export InitConfig\n */\nexport function userConfigMerge(\n  a: Partial<InitConfig>,\n  b?: Partial<InitConfig>\n): InitConfig {\n  const mergeConfig: InitConfig = {\n    initStoreData: [defaultStore],\n    leftAllRegistMap: [],\n    leftRenderListCategory: [],\n    rightRenderListCategory: [],\n    initComponentCache: {},\n    initFunctionMap: {},\n    initDataCenterMap: {},\n    initCommandModule: [],\n    rightGlobalCustom: null,\n    initFormComponents: {},\n    containerIcon: null,\n  };\n  if (!b) {\n    return userConfigMerge(mergeConfig, a);\n  }\n  mergeConfig.initStoreData = b.initStoreData\n    ? [...b.initStoreData]\n    : a.initStoreData\n    ? [...a.initStoreData]\n    : [defaultStore];\n\n  mergeConfig.containerIcon = b.containerIcon\n    ? b.containerIcon\n    : a.containerIcon;\n\n  mergeConfig.rightGlobalCustom = b.rightGlobalCustom\n    ? b.rightGlobalCustom\n    : a.rightGlobalCustom;\n\n  mergeConfig.leftAllRegistMap = b.leftAllRegistMap\n    ? a.leftAllRegistMap\n      ? [...a.leftAllRegistMap, ...b.leftAllRegistMap]\n      : [...b.leftAllRegistMap]\n    : a.leftAllRegistMap\n    ? [...a.leftAllRegistMap]\n    : [];\n  mergeConfig.leftRenderListCategory = b.leftRenderListCategory\n    ? a.leftRenderListCategory\n      ? [...a.leftRenderListCategory, ...b.leftRenderListCategory]\n      : [...b.leftRenderListCategory]\n    : a.leftRenderListCategory\n    ? [...a.leftRenderListCategory]\n    : [...defaultConfig.leftRenderListCategory];\n  mergeConfig.rightRenderListCategory = b.rightRenderListCategory\n    ? a.rightRenderListCategory\n      ? [...a.rightRenderListCategory, ...b.rightRenderListCategory]\n      : [...b.rightRenderListCategory]\n    : a.rightRenderListCategory\n    ? [...a.rightRenderListCategory]\n    : [...defaultConfig.rightRenderListCategory];\n  mergeConfig.initComponentCache = {\n    ...a.initComponentCache,\n    ...b.initComponentCache,\n  };\n  mergeConfig.initFunctionMap = {\n    ...a.initFunctionMap,\n    ...b.initFunctionMap,\n  };\n  mergeConfig.initFormComponents = {\n    ...a.initFormComponents,\n    ...b.initFormComponents,\n  };\n  mergeConfig.initDataCenterMap = {\n    ...a.initDataCenterMap,\n    ...b.initDataCenterMap,\n  };\n  mergeConfig.initCommandModule = b.initCommandModule\n    ? a.initCommandModule\n      ? [...a.initCommandModule, ...b.initCommandModule]\n      : [...b.initCommandModule]\n    : a.initCommandModule\n    ? [...a.initCommandModule]\n    : [];\n  return mergeConfig;\n}\n\n/**\n *\n *\n * @export 用户配置项\n * @class UserConfig\n */\nexport class UserConfig {\n  public initConfig: InitConfig;\n  public store = new Store();\n  public componentRegister = new ComponentRegister();\n  public formRegister = new FormComponentRegister();\n  public animateFactory = new AnimateFactory();\n  public componentCache = {};\n  public asyncComponentUrlMap = {} as AsyncCacheComponentType;\n  public marklineConfig = marklineConfig;\n  public commanderRegister: CommanderWrapper;\n  public contextMenuState = contextMenuState;\n  public eventCenter: EventCenter;\n  public dataCenter: DataCenter;\n  public scaleState = scaleState;\n  public focusState = focusState;\n  public collapsed = false;\n  public ticker = true;\n  public containerOverFlow = true;\n  public containerForceUpdate = () => {};\n  public timeline = false;\n  public timelineConfig: TimeLineConfigType = {\n    autoFocus: true,\n    scrollDom: null,\n  };\n  public timelineNeedleConfig: TimeLineNeedleConfigType = {\n    status: \"start\",\n    runFunc: () => {},\n    resetFunc: () => {},\n    pauseFunc: () => {},\n    setNeedle: () => {},\n    current: 0,\n    isRefresh: true,\n  };\n  public createdFn: Function[] = [];\n  public created: Function = () => {};\n  public beforeOnMountedFn: Function[] = [];\n  public beforeOnMounted: Function = () => {};\n  public onMountedFn: Function[] = [];\n  public onMounted: Function = () => {};\n  public destroyedFn: Function[] = [];\n  public destroyed: Function = () => {};\n  public blockForceUpdate: Array<Function> = [];\n  public waitAnimate = false;\n  public wrapperMoveState = wrapperMoveState;\n  public iframeWrapperMoveState = iframeWrapperMoveState;\n  public refreshIframe = () => {};\n  public sendParent = (message: any) => {\n    window.parent.postMessage(message, \"*\");\n  };\n  public iframeOrigin = \"\";\n  public iframeId = \"yh-container-iframe\";\n  public i18n = true;\n  public SCRIPTGLOBALNAME = \"DOORINGXPLUGIN\";\n  public scriptLoading = false;\n  public leftForceUpdate = () => {};\n  public customMap: Record<string, any> = {};\n  constructor(initConfig?: Partial<InitConfig>) {\n    const mergeConfig = userConfigMerge(defaultConfig, initConfig);\n    this.initConfig = mergeConfig;\n    this.commanderRegister = new CommanderWrapper(this.store, {}, this);\n    this.eventCenter = new EventCenter({}, mergeConfig.initFunctionMap);\n    this.dataCenter = new DataCenter(mergeConfig.initDataCenterMap);\n    this.init();\n    // 右侧配置项注册 初始注册组件暂时固定\n  }\n\n  toRegist() {\n    const modules = this.initConfig.initFormComponents;\n    formComponentRegisterFn(this.formRegister, modules);\n\n    const cache = this.initConfig.initComponentCache;\n    this.componentCache = cache;\n    // 拿到组件缓存后，先同步加载map上组件\n    Object.values(cache).forEach((v) => {\n      if ((v as CacheComponentValueType).component) {\n        this.registComponent((v as CacheComponentValueType).component!);\n      }\n    });\n    // 异步组件注册地址\n    this.initConfig.leftAllRegistMap.forEach((v) => {\n      if (v.urlFn) {\n        //@ts-ignore\n        this.asyncComponentUrlMap[v.component] = v.urlFn;\n      }\n    });\n    // 注册画布上组件\n    this.store.getData().block.forEach((v) => {\n      this.asyncRegistComponent(v.name);\n    });\n\n    // 注册data\n    this.dataCenter = new DataCenter(this.initConfig.initDataCenterMap);\n    //数据需要加上store上的\n    this.dataCenter.initAddToDataMap(this.store.getData());\n    // 修改事件与数据初始\n    this.eventCenter = new EventCenter({}, this.initConfig.initFunctionMap);\n    // 注册画布事件\n    this.eventCenter.syncEventMap(this.store.getData(), this.store);\n  }\n\n  init() {\n    this.store.resetToInitData(deepCopy(this.initConfig.initStoreData), true);\n    this.toRegist();\n  }\n\n  getCollapse() {\n    return this.collapsed;\n  }\n\n  getStoreJSON() {\n    return JSON.stringify(this.store.getData());\n  }\n\n  parseStoreJson(json: string) {\n    return JSON.parse(json);\n  }\n\n  /**\n   *\n   * 重设store并根据store重设\n   * @param {IStoreData[]} data\n   * @memberof UserConfig\n   */\n  resetData(data: IStoreData[]) {\n    this.store.resetToInitData(data, true);\n    this.toRegist();\n    this.animateFactory.syncStoreToConfig(this);\n  }\n\n  getWrapperMove() {\n    return {\n      data: this.wrapperMoveState,\n      iframe: this.iframeWrapperMoveState,\n    };\n  }\n\n  getFocusState() {\n    return this.focusState;\n  }\n  getScaleState() {\n    return this.scaleState;\n  }\n  getDataCenter() {\n    return this.dataCenter;\n  }\n  getEventCenter() {\n    return this.eventCenter;\n  }\n  getAnimateFactory() {\n    return this.animateFactory;\n  }\n  getConfig() {\n    return this.initConfig;\n  }\n  getStore() {\n    return this.store;\n  }\n  getComponentRegister() {\n    return this.componentRegister;\n  }\n  getContextMenuState() {\n    return this.contextMenuState;\n  }\n  getFormRegister() {\n    return this.formRegister;\n  }\n  getCommanderRegister() {\n    return this.commanderRegister;\n  }\n\n  /**\n   *\n   * 用于获取当前store数据，已判断弹窗编辑 不会储存正在编辑的内容\n   * @returns\n   * @memberof UserConfig\n   */\n  getCurrentData() {\n    return this.store.getData();\n  }\n\n  /**\n   *\n   * 以默认设置重置配置项\n   * @param {Partial<InitConfig>} v\n   * @memberof UserConfig\n   */\n  resetConfig(v: Partial<InitConfig>) {\n    const mergeConfig = userConfigMerge(defaultConfig, v);\n    this.initConfig = mergeConfig;\n    this.init();\n    this.leftForceUpdate();\n    this.store.forceUpdate();\n  }\n  /**\n   *  会重置配置，请修改配置后增加\n   * 异步增加左侧tab页\n   * @memberof UserConfig\n   */\n  addLeftCategory(v: LeftMapRenderListPropsItemCategory[]) {\n    const obj = {} as InitConfig;\n    obj.leftRenderListCategory = v;\n    this.initConfig = userConfigMerge(this.initConfig, obj);\n    this.init();\n    this.leftForceUpdate();\n    this.store.forceUpdate();\n  }\n\n  /**\n   *  会重置配置，请修改配置后增加\n   * 异步增加右侧tab页\n   * @memberof UserConfig\n   */\n  addRightCategory(v: RightMapRenderListPropsItemCategory[]) {\n    const obj = {} as InitConfig;\n    obj.rightRenderListCategory = v;\n    this.initConfig = userConfigMerge(this.initConfig, obj);\n    this.init();\n    this.leftForceUpdate();\n    this.store.forceUpdate();\n  }\n\n  /**\n   * 会重置配置，请修改配置后增加\n   * 异步增加组件map\n   * @memberof UserConfig\n   */\n  addCoRegistMap(v: LeftRegistComponentMapItem) {\n    const obj = {} as InitConfig;\n    obj.leftAllRegistMap = [v];\n    this.initConfig = userConfigMerge(this.initConfig, obj);\n    this.init();\n    this.leftForceUpdate();\n    this.store.forceUpdate();\n  }\n\n  /**\n   *会重置配置，请修改配置后增加\n   * 异步修改config 重置store\n   * @memberof UserConfig\n   */\n  setConfig(v: Partial<InitConfig>) {\n    this.initConfig = userConfigMerge(this.initConfig, v);\n    this.init();\n    this.leftForceUpdate();\n    this.store.forceUpdate();\n  }\n\n  /**\n   *\n   * 同步注册指令\n   * @param {CommanderItem} command\n   * @memberof UserConfig\n   */\n  registCommander(command: CommanderItem) {\n    this.commanderRegister.register(command);\n  }\n\n  /**\n   *\n   * 用于修改markline配置\n   * @returns\n   * @memberof UserConfig\n   */\n  getMarklineConfig() {\n    return this.marklineConfig;\n  }\n\n  getComponentCache() {\n    return this.componentCache;\n  }\n  /**\n   *\n   * 同步注册组件，不会检测缓存是否存在\n   * @param {ComponentItemFactory} item\n   * @memberof UserConfig\n   */\n  registComponent(item: ComponentItemFactory) {\n    this.componentRegister.register(item);\n  }\n  /**\n   *\n   * 异步注册组件，会判定缓存是否存在\n   * @param {string} name\n   * @memberof UserConfig\n   */\n  async asyncRegistComponent(name: string) {\n    //判定缓存\n    if (\n      !(this.componentCache as Record<string, CacheComponentValueType>)[name] &&\n      this.asyncComponentUrlMap[name]\n    ) {\n      const chunk = await this.asyncComponentUrlMap[name]();\n      const chunkDefault = chunk.default;\n      this.componentRegister.register(chunkDefault);\n      (this.componentCache as Record<string, CacheComponentValueType>)[name] = {\n        component: chunkDefault,\n      };\n      this.componentRegister.emitEvent(name);\n    }\n  }\n\n  scriptRegistComponentSingle(\n    item: ComponentItemFactory,\n    leftProps: LeftRegistComponentMapItem\n  ) {\n    this.registComponent(item);\n    this.addCoRegistMap(leftProps);\n  }\n\n  // foreach可能导致问题\n  // scriptRegistComponentMulti(\n  // \titems: ComponentItemFactory[],\n  // \tleftProps: LeftRegistComponentMapItem[]\n  // ) {\n  // \titems.forEach((item) => {\n  // \t\tthis.registComponent(item);\n  // \t});\n  // \tconst obj = {} as InitConfig;\n  // \tobj.leftAllRegistMap = leftProps;\n  // \tthis.initConfig = userConfigMerge(this.initConfig, obj);\n  // \tthis.init();\n  // \tthis.store.forceUpdate();\n  // }\n\n  /**\n   *\n   * 分类信息需要单独存储后加载\n   * @param {string} src  url地址\n   * @param {Partial<LeftRegistComponentMapItem>} leftProps 分类\n   * @param {Function} [callback] 回调\n   * @return {*}\n   * @memberof UserConfig\n   */\n  scriptSingleLoad(\n    src: string,\n    leftProps: Partial<LeftRegistComponentMapItem>,\n    callback?: Function\n  ) {\n    let storeData = this.store.getData();\n    let globalState = storeData.globalState;\n    if (globalState[\"script\"].includes(src)) {\n      console.error(src + \"scripts have been loaded\");\n      return;\n    }\n    if (!this.scriptLoading) {\n      this.scriptLoading = true;\n      const script = document.createElement(\"script\");\n      script.src = src;\n      script.onload = () => {\n        const item = window[\n          this.SCRIPTGLOBALNAME as any\n        ] as unknown as ComponentItemFactory;\n        try {\n          const left = leftProps;\n          left.component = item.name;\n          left.displayName = item.display;\n          this.scriptRegistComponentSingle(\n            item,\n            left as LeftRegistComponentMapItem\n          );\n        } catch (e) {\n          console.error(e);\n        }\n        // 前面加载会重置store 新增组件需要事件初始化\n        setTimeout(() => {\n          window[this.SCRIPTGLOBALNAME as any] = undefined as any;\n          globalState = this.store.getData().globalState;\n          globalState[\"script\"].push(src);\n          storeData.globalState = globalState;\n          this.store.resetToInitData([storeData], true);\n          this.store.forceUpdate();\n          this.scriptLoading = false;\n          if (callback) {\n            callback();\n          }\n        });\n      };\n      document.body.appendChild(script);\n    }\n  }\n}\n\nexport default UserConfig;\n","/*\n\n * @Date: 2021-07-12 15:54:35\n * @LastEditors: \n * @LastEditTime: 2022-01-13 13:41:16\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\IframeWrapperMove\\ticker.tsx\n */\nimport React, { useEffect, useRef, useState } from \"react\";\nimport UserConfig from \"../../config\";\n\nconst width = \"20px\";\nconst indent = 50;\n\nfunction Ticker(props: { config: UserConfig }) {\n  const topRef = useRef<HTMLDivElement>(null);\n  const leftRef = useRef<HTMLDivElement>(null);\n  const [topRender, setTopRender] = useState(0);\n  const [leftRender, setLeftRender] = useState(0);\n\n  const scale = props.config.getScaleState().value;\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (topRef.current) {\n        const width = topRef.current.getBoundingClientRect().width;\n        const renderWidth = Math.ceil(width / 10 / scale);\n        if (renderWidth < 2 ** 32 - 1) {\n          setTopRender(renderWidth);\n        }\n      }\n      // left可以不用放，但为了更新统一\n      if (leftRef.current) {\n        const height = leftRef.current.getBoundingClientRect().height;\n        const renderHeight = Math.ceil(height / 10 / scale);\n        if (renderHeight < 2 ** 32 - 1) {\n          setLeftRender(renderHeight);\n        }\n      }\n    }, 300);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [props.config, props.config.collapsed, scale]);\n\n  return (\n    <>\n      <div\n        ref={topRef}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: indent,\n          width: \"100%\",\n          height: width,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          userSelect: \"none\",\n        }}\n      >\n        {Array(topRender)\n          .fill(1)\n          .map((_, i) => {\n            if (i % 10 === 0) {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"1px\",\n                    height: \"12px\",\n                    position: \"relative\",\n                    userSelect: \"none\",\n                  }}\n                >\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      top: \"20px\",\n                      fontSize: \"10px\",\n                      left: \"-2px\",\n                      userSelect: \"none\",\n                    }}\n                  >\n                    {i}\n                  </div>\n                </div>\n              );\n            } else {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"1px\",\n                    height: \"6px\",\n                  }}\n                ></div>\n              );\n            }\n          })}\n      </div>\n      <div\n        ref={leftRef}\n        style={{\n          position: \"absolute\",\n          top: indent,\n          left: 0,\n          width: width,\n          height: \"100%\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          flexDirection: \"column\",\n          userSelect: \"none\",\n        }}\n      >\n        {Array(leftRender)\n          .fill(1)\n          .map((_, i) => {\n            if (i % 10 === 0) {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"12px\",\n                    height: \"1px\",\n                    position: \"relative\",\n                    userSelect: \"none\",\n                  }}\n                >\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      left: \"20px\",\n                      fontSize: \"10px\",\n                      top: \"-2px\",\n                      userSelect: \"none\",\n                    }}\n                  >\n                    {i}\n                  </div>\n                </div>\n              );\n            } else {\n              return (\n                <div\n                  key={i}\n                  style={{\n                    background: \"rgb(204, 204, 204)\",\n                    width: \"6px\",\n                    height: \"1px\",\n                    userSelect: \"none\",\n                  }}\n                ></div>\n              );\n            }\n          })}\n      </div>\n    </>\n  );\n}\n\nexport default Ticker;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-03-14 04:39:30\n * @FilePath: \\dooring-v2\\src\\core\\command\\abstract.ts\n */\nimport { CommanderItem } from \"./commanderType\";\n\nexport class CommanderItemFactory implements CommanderItem {\n  constructor(\n    public name: CommanderItem[\"name\"],\n    public keyboard: CommanderItem[\"keyboard\"],\n    public excute: CommanderItem[\"excute\"],\n    public display: CommanderItem[\"display\"],\n    public init: CommanderItem[\"init\"] = () => {},\n    public destroy: CommanderItem[\"destroy\"] = () => {}\n  ) {}\n}\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-08-11 16:16:30\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\wrapperMove\\index.tsx\n */\nimport {\n  AllHTMLAttributes,\n  CSSProperties,\n  PropsWithChildren,\n  useRef,\n} from \"react\";\nimport { wrapperEvent } from \"./event\";\nimport { onWheelEvent } from \"../../core/scale\";\nimport React from \"react\";\nimport Ticker from \"./ticker\";\nimport UserConfig from \"../../config\";\nimport TimeLine from \"../timeLine/timeline\";\nimport styles from \"../../index.less\";\n\nexport interface ContainerWrapperProps\n  extends AllHTMLAttributes<HTMLDivElement> {\n  config: UserConfig;\n  classNames?: string;\n  style?: CSSProperties;\n}\n\nfunction ContainerWrapper(props: PropsWithChildren<ContainerWrapperProps>) {\n  const { children, style, classNames, config, ...rest } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  const ticker = props.config.ticker;\n  return (\n    <div\n      className={`ant-menu ${classNames ? classNames : \"\"} ${\n        styles.yh_container_wrapper\n      }`}\n      ref={ref}\n      style={{\n        backgroundColor: \"#f0f0f0\",\n        height: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flex: 1,\n        position: \"relative\",\n        overflow: \"hidden\",\n        userSelect: \"none\",\n        ...style,\n      }}\n      {...wrapperEvent(ref, props.config)}\n      {...onWheelEvent(props.config)}\n      {...rest}\n    >\n      {config.timeline && <TimeLine config={config}></TimeLine>}\n      {children}\n      {ticker && <Ticker config={props.config}></Ticker>}\n    </div>\n  );\n}\nexport default ContainerWrapper;\n","import {\n  // GatewayOutlined,\n  LayoutOutlined,\n  SettingOutlined,\n  SyncOutlined,\n  UnorderedListOutlined,\n  // VideoCameraOutlined,\n} from \"@ant-design/icons\";\nimport {\n  Button,\n  Form,\n  Input,\n  List,\n  message,\n  Modal,\n  Popconfirm,\n  // Popover,\n} from \"antd\";\nimport React, { CSSProperties, PropsWithChildren, useState } from \"react\";\nimport { UserConfig } from \"../..\";\nimport { wrapperMoveState } from \"../wrapperMove/event\";\nimport { replaceLocale } from \"../../locale\";\nimport { mouseUp, moveState } from \"./state\";\nimport SettingsModal from \"./settings\";\nimport deepcopy from \"deepcopy\";\n\nexport interface ControlProps {\n  config: UserConfig;\n  style?: CSSProperties;\n}\n\nexport function Control(props: PropsWithChildren<ControlProps>) {\n  const { style } = props;\n  const [visible, setVisible] = useState(false);\n  const [configVisible, setConfigVisible] = useState(false);\n  const [form] = Form.useForm();\n  const [settingVisible, setSettingVisible] = useState(false);\n  const [api, contextHolder] = message.useMessage();\n  const [xy, setXy] = useState({ x: 0, y: 0 });\n  return (\n    <>\n      <div\n        className=\"ant-menu\"\n        onMouseUp={mouseUp}\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          transform: `translate(${xy.x}px,${xy.y}px)`,\n          ...style,\n        }}\n      >\n        {contextHolder}\n        <Button\n          onMouseDown={(e) => {\n            moveState.startX = e.clientX;\n            moveState.startY = e.clientY;\n            moveState.fn = setXy;\n            moveState.isMove = true;\n          }}\n          type=\"text\"\n          style={{ cursor: \"move\" }}\n          icon={<UnorderedListOutlined />}\n        ></Button>\n        <Button\n          icon={<LayoutOutlined />}\n          onClick={() => {\n            props.config.ticker = !props.config.ticker;\n            props.config.getStore().forceUpdate();\n          }}\n        ></Button>\n        {/* <Popover\n          placement=\"left\"\n          content={\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                alignItems: \"center\",\n                flexDirection: \"column\",\n              }}\n            >\n              <Button\n                block\n                onClick={() => {\n                  setVisible(true);\n                }}\n              >\n                {replaceLocale(\"modal.new\", \"新建弹窗\", props.config)}\n              </Button>\n              <Button\n                block\n                onClick={() => {\n                  setConfigVisible(true);\n                }}\n              >\n                {replaceLocale(\"modal.control\", \"弹窗配置\", props.config)}\n              </Button>\n            </div>\n          }\n        >\n          <Button icon={<GatewayOutlined />}></Button>\n        </Popover> */}\n\n        {/* <Button\n          icon={<VideoCameraOutlined />}\n          onClick={() => {\n            props.config.timeline = !props.config.timeline;\n            props.config.getStore().forceUpdate();\n          }}\n        ></Button> */}\n        <Button\n          icon={<SyncOutlined />}\n          onClick={() => {\n            wrapperMoveState.needX = 0;\n            wrapperMoveState.needY = 0;\n            props.config.getStore().forceUpdate();\n          }}\n        ></Button>\n        <Button\n          icon={<SettingOutlined />}\n          onClick={() => {\n            setSettingVisible(true);\n          }}\n        ></Button>\n      </div>\n\n      <Modal\n        title={replaceLocale(\"modal.control\", \"弹窗配置\", props.config)}\n        visible={configVisible}\n        onOk={() => setConfigVisible(false)}\n        onCancel={() => setConfigVisible(false)}\n        footer={null}\n      >\n        <List>\n          {props.config.getStore().isEdit() && (\n            <div>\n              {replaceLocale(\n                \"modal.popup.exit\",\n                \"请退出编辑弹窗后再打开该配置\",\n                props.config\n              )}\n            </div>\n          )}\n          {!props.config.getStore().isEdit() &&\n            Object.keys(props.config.getStore().getData().modalMap).map((v) => {\n              return (\n                <List.Item\n                  key={v}\n                  // @ts-ignore\n                  actions={[\n                    <Popconfirm\n                      title={replaceLocale(\n                        \"modal.popup.edit\",\n                        \"是否切换至该弹窗并进行编辑?\",\n                        props.config\n                      )}\n                      onConfirm={() => {\n                        const store = props.config.getStore();\n                        const clone = deepcopy(store.getData());\n                        const sign = store.changeNormalToModal(clone, v);\n                        if (!sign.success && sign.sign === 0) {\n                          api.error(\n                            replaceLocale(\n                              \"modal.popup.save\",\n                              \"请保存弹窗后编辑其他弹窗\",\n                              props.config\n                            )\n                          );\n                          return;\n                        }\n                        if (!sign.success && sign.sign === 1) {\n                          api.error(\n                            replaceLocale(\n                              \"modal.popup.notfond\",\n                              `未找到该弹窗 ${sign.param}`,\n                              props.config,\n                              { name: sign.param },\n                              \"未找到该弹窗 {name}\"\n                            )\n                          );\n                          return;\n                        }\n                        setConfigVisible(false);\n                        store.setData(clone);\n                      }}\n                      okText={replaceLocale(\"yes\", \"确定\", props.config)}\n                      cancelText={replaceLocale(\"no\", \"取消\", props.config)}\n                    >\n                      <Button type=\"link\">\n                        {replaceLocale(\"edit\", \"编辑\", props.config)}\n                      </Button>\n                    </Popconfirm>,\n\n                    <Popconfirm\n                      title=\"您确定要删除这个弹窗吗?\"\n                      onConfirm={() => {\n                        const sign = props.config.getStore().removeModal(v);\n                        if (!sign.success && sign.sign === 0) {\n                          api.error(\n                            replaceLocale(\n                              \"modal.popup.save\",\n                              \"请保存弹窗后编辑其他弹窗\",\n                              props.config\n                            )\n                          );\n                        }\n                        if (!sign.success && sign.sign === 1) {\n                          api.error(\n                            replaceLocale(\n                              \"modal.popup.notfond\",\n                              `未找到该弹窗 ${sign.param}`,\n                              props.config,\n                              { name: sign.param },\n                              \"未找到该弹窗 {name}\"\n                            )\n                          );\n                        }\n\n                        setConfigVisible(false);\n                      }}\n                      okText={replaceLocale(\"yes\", \"确定\", props.config)}\n                      cancelText={replaceLocale(\"no\", \"取消\", props.config)}\n                    >\n                      <Button type=\"link\">\n                        {replaceLocale(\"control.delete\", `删除`, props.config)}\n                      </Button>\n                    </Popconfirm>,\n                  ]}\n                >\n                  {v}\n                </List.Item>\n              );\n            })}\n          {!props.config.getStore().isEdit() &&\n            Object.keys(props.config.getStore().getData().modalMap).length ===\n              0 && (\n              <div style={{ textAlign: \"center\" }}>\n                {replaceLocale(\n                  \"modal.popup.nomodal\",\n                  `暂时没有弹窗`,\n                  props.config\n                )}\n              </div>\n            )}\n        </List>\n      </Modal>\n      <Modal\n        okText={replaceLocale(\"yes\", \"确定\", props.config)}\n        cancelText={replaceLocale(\"no\", \"取消\", props.config)}\n        onOk={() => {\n          form\n            .validateFields()\n            .then((values) => {\n              form.resetFields();\n              const modalName = values.modalName;\n              const sign = props.config.getStore().newModalMap(modalName);\n\n              if (!sign.succeess && sign.sign === 0) {\n                api.error(\n                  replaceLocale(\n                    \"modal.popup.save\",\n                    `请保存弹窗后编辑其他弹窗`,\n                    props.config\n                  )\n                );\n              }\n              if (!sign.succeess && sign.sign === 1) {\n                api.error(\n                  replaceLocale(\n                    \"modal.popup.repeat\",\n                    `已有重名弹窗 ${sign.param}`,\n                    props.config,\n                    {\n                      name: sign.param,\n                    },\n                    \"已有重名弹窗 {name}\"\n                  )\n                );\n              }\n              setVisible(false);\n            })\n            .catch((info) => {\n              console.log(\"Validate Failed:\", info);\n            });\n        }}\n        title={replaceLocale(\"modal.new\", \"新增弹窗\", props.config)}\n        onCancel={() => setVisible(false)}\n        visible={visible}\n      >\n        <Form layout=\"vertical\" name=\"basic\" form={form}>\n          <Form.Item\n            label={replaceLocale(\"modal.name\", \"弹窗名称\", props.config)}\n            name=\"modalName\"\n            rules={[\n              {\n                required: true,\n                message: replaceLocale(\n                  \"modal.popup.name\",\n                  \"请输入弹窗名称!\",\n                  props.config\n                ),\n              },\n            ]}\n          >\n            <Input />\n          </Form.Item>\n        </Form>\n      </Modal>\n      <SettingsModal\n        config={props.config}\n        visible={settingVisible}\n        onOk={(v: any) => {\n          props.config.marklineConfig.isAbsorb = v.absorb;\n          props.config.marklineConfig.indent = v.indent;\n          props.config.scaleState.minValue = v.min;\n          props.config.scaleState.maxValue = v.max;\n          props.config.timelineConfig.autoFocus = v.autofocus;\n          setSettingVisible(false);\n        }}\n        onCancel={() => setSettingVisible(false)}\n        message={api}\n      ></SettingsModal>\n    </>\n  );\n}\n\nexport default Control;\n","/*\n\n * @Date: 2021-07-17 10:08:08\n * @LastEditors: \n * @LastEditTime: 2021-07-27 14:42:00\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\iframeContainer.tsx\n */\nimport { containerDragResolve } from \"../core/crossDrag\";\nimport { containerFocusRemove } from \"../core/focusHandler\";\nimport { innerContainerDrag } from \"../core/innerDrag\";\nimport { IStoreData } from \"../core/store/storetype\";\nimport { wrapperMoveState } from \"./IframeWrapperMove/event\";\nimport {\n  CSSProperties,\n  PropsWithChildren,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport Blocks from \"./blocks\";\nimport React from \"react\";\nimport UserConfig, { defaultStore } from \"../config\";\nimport styles from \"../index.less\";\nimport { getRealHeight } from \"../core/transfer\";\nimport { WrapperMoveStateProps } from \"./IframeWrapperMove/event\";\nimport { onWheelEventIframe } from \"../core/scale\";\ninterface ContainerProps {\n  context: \"edit\" | \"preview\";\n  config: UserConfig;\n  editContainerStyle?: CSSProperties;\n  previewContainerStyle?: CSSProperties;\n}\ninterface IframeInnerState {\n  store: IStoreData;\n  scaleState: {\n    value: number;\n    maxValue: number;\n    minValue: number;\n  };\n  isEdit: boolean;\n  origin: null | IStoreData[];\n  wrapperState: {\n    data: any;\n    iframe: WrapperMoveStateProps;\n  };\n}\n\nfunction Container(props: PropsWithChildren<ContainerProps>) {\n  const { editContainerStyle, previewContainerStyle } = props;\n\n  const [message, setMessage] = useState<IframeInnerState>({\n    store: defaultStore,\n    scaleState: {\n      value: 0,\n      maxValue: 0,\n      minValue: 0,\n    },\n    isEdit: false,\n    wrapperState: props.config.getWrapperMove(),\n    origin: null,\n  });\n\n  const state = message.store;\n  const scaleState = message.scaleState;\n  const isEdit = message.isEdit;\n\n  const bgColor = () => {\n    if (isEdit) {\n      return \"rgba(255,255,255,1)\";\n    } else {\n      return state.globalState.containerColor;\n    }\n  };\n\n  const transform = useMemo(() => {\n    if (props.context === \"edit\") {\n      return `scale(${scaleState.value}) translate(${wrapperMoveState.needX}px, ${wrapperMoveState.needY}px)`;\n    } else {\n      return undefined;\n    }\n  }, [props.context, scaleState.value]);\n\n  useEffect(() => {\n    const fn = (e: any) => {\n      if (typeof e.data !== \"object\") {\n        return;\n      }\n      if (!e.data.store) {\n        // 后续通信待定\n        return;\n      }\n\n      const data: IframeInnerState = e.data;\n\n      setMessage(data);\n      props.config.resetData([data.store]);\n      props.config.scaleState = data.scaleState;\n    };\n    window.addEventListener(\"message\", fn);\n    window.parent.postMessage(\"ready\", \"*\");\n    return () => {\n      window.removeEventListener(\"message\", fn);\n    };\n  }, [props.config]);\n\n  return (\n    <>\n      {props.context === \"edit\" && (\n        <>\n          <div\n            style={{\n              display: \"flex\",\n              transform: `scale(${scaleState.value})`,\n              transformOrigin: \"left top\",\n              position: \"absolute\",\n            }}\n            {...onWheelEventIframe(props.config, scaleState)}\n          >\n            <div\n              id=\"yh-container\"\n              className={styles.yh_container}\n              style={{\n                height: `${state.container.height}px`,\n                width: `${state.container.width}px`,\n                backgroundColor: bgColor(),\n                position: \"relative\",\n                overflow: \"hidden\",\n\n                ...editContainerStyle,\n              }}\n              {...(props.context === \"edit\"\n                ? containerDragResolve(props.config)\n                : null)}\n              {...(props.context === \"edit\"\n                ? innerContainerDrag(props.config)\n                : null)}\n              {...(props.context === \"edit\"\n                ? containerFocusRemove(props.config)\n                : null)}\n            >\n              {state.block.map((v) => {\n                return (\n                  <Blocks\n                    config={props.config}\n                    key={v.id}\n                    data={v}\n                    context={props.context}\n                  ></Blocks>\n                );\n              })}\n            </div>\n          </div>\n        </>\n      )}\n      {props.context === \"preview\" && (\n        <div\n          id=\"yh-container-preview\"\n          className={styles.yh_container_preview}\n          style={{\n            height: `${getRealHeight(state.container.height)}px`,\n            width: `100%`,\n            position: \"relative\" as \"absolute\" | \"relative\",\n            overflow: \"hidden\",\n            backgroundColor: bgColor(),\n            transform: transform,\n            ...previewContainerStyle,\n          }}\n        >\n          {state.block.map((v) => {\n            return (\n              <Blocks\n                key={v.id}\n                config={props.config}\n                data={v}\n                context={props.context}\n              ></Blocks>\n            );\n          })}\n        </div>\n      )}\n    </>\n  );\n}\nexport default Container;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-08-11 16:39:24\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\IframeWrapperMove\\index.tsx\n */\nimport {\n  AllHTMLAttributes,\n  CSSProperties,\n  PropsWithChildren,\n  ReactNode,\n  useRef,\n} from \"react\";\nimport { wrapperEvent } from \"./event\";\nimport { onWheelEventIframe } from \"../../core/scale\";\nimport React from \"react\";\nimport Ticker from \"./ticker\";\nimport UserConfig from \"../../config\";\nimport TimeLine from \"../timeLine/timeline\";\n\nexport interface ContainerWrapperProps\n  extends AllHTMLAttributes<HTMLDivElement> {\n  config: UserConfig;\n  classNames?: string;\n  style?: CSSProperties;\n  extra?: ReactNode;\n}\n\nfunction ContainerWrapper(props: PropsWithChildren<ContainerWrapperProps>) {\n  const { children, style, classNames, config, extra, ...rest } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  const ticker = props.config.ticker;\n  const wrapperMoveState = config.getWrapperMove().iframe;\n  const scaleState = config.getScaleState();\n  const state = props.config.getStore().getData();\n\n  return (\n    <div\n      className={`ant-menu ${classNames ? classNames : \"\"}`}\n      ref={ref}\n      style={{\n        backgroundColor: \"#f0f0f0\",\n        height: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flex: 1,\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"hidden\",\n        userSelect: \"none\",\n        ...style,\n      }}\n      {...wrapperEvent(ref, props.config)}\n      {...onWheelEventIframe(props.config, scaleState)}\n      {...rest}\n    >\n      {config.timeline && <TimeLine config={config}></TimeLine>}\n      <div\n        style={{\n          position: \"absolute\",\n          transform: `translate(${wrapperMoveState.needX}px, ${wrapperMoveState.needY}px)`,\n          width: state.container.width * scaleState.value,\n          height: state.container.height * scaleState.value,\n        }}\n      >\n        {children}\n      </div>\n      {extra && extra}\n      {ticker && <Ticker config={props.config}></Ticker>}\n    </div>\n  );\n}\nexport default ContainerWrapper;\n","/*\n\n * @Date: 2021-07-20 10:36:55\n * @LastEditors: \n * @LastEditTime: 2021-07-27 15:13:35\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\iframeTarget.tsx\n */\nimport React from \"react\";\nimport UserConfig from \"../config\";\nimport { containerDragResolve } from \"../core/crossDrag\";\nimport { containerFocusRemove } from \"../core/focusHandler\";\nimport { innerContainerDrag } from \"../core/innerDrag\";\nimport { NormalMarkLineRender } from \"../core/markline\";\nimport { containerResizer } from \"../core/resizeHandler/containerResizer\";\nimport Blocks from \"./blocks\";\n\ninterface IframeTargetProps {\n  config: UserConfig;\n  iframeProps?: React.DetailedHTMLProps<\n    React.IframeHTMLAttributes<HTMLIFrameElement>,\n    HTMLIFrameElement\n  >;\n}\n\nexport function IframeTarget(props: IframeTargetProps) {\n  const scaleState = props.config.getScaleState();\n  const state = props.config.getStore().getData();\n  return (\n    <div\n      style={{\n        width: state.container.width * scaleState.value,\n        height: state.container.height * scaleState.value + 1,\n        position: \"relative\",\n      }}\n    >\n      <div\n        {...containerDragResolve(props.config)}\n        {...innerContainerDrag(props.config)}\n        {...containerFocusRemove(props.config)}\n        style={{\n          width: state.container.width * scaleState.value,\n          height: state.container.height * scaleState.value,\n          position: \"absolute\",\n        }}\n      >\n        <div\n          id=\"yh-container-iframe-mask\"\n          style={{\n            display: \"flex\",\n            transform: `scale(${scaleState.value})`,\n            transformOrigin: \"left top\",\n            position: \"absolute\",\n            width: state.container.width,\n            height: state.container.height,\n          }}\n        >\n          {state.block.map((v) => {\n            return (\n              <Blocks\n                config={props.config}\n                key={v.id}\n                data={v}\n                context={\"edit\"}\n                iframe={true}\n              ></Blocks>\n            );\n          })}\n          {\n            <NormalMarkLineRender\n              config={props.config}\n              iframe={true}\n            ></NormalMarkLineRender>\n          }\n        </div>\n      </div>\n      <iframe\n        title=\"editor\"\n        id=\"yh-container-iframe\"\n        scrolling=\"no\"\n        style={{\n          width: state.container.width * scaleState.value,\n          height: state.container.height * scaleState.value,\n          border: \"none\",\n          userSelect: \"none\",\n        }}\n        {...props.iframeProps}\n      ></iframe>\n      <div\n        style={{\n          height: \"50px\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          transform: `scale(${scaleState.value})`,\n          width: \"100%\",\n          transformOrigin: \"top\",\n        }}\n      >\n        <div\n          style={{\n            fontSize: \"20px\",\n            cursor: \"s-resize\",\n          }}\n          onMouseDown={(e) => containerResizer.onMousedown(e, props.config)}\n        >\n          {props.config.getConfig().containerIcon}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n\n * @Date: 2021-02-04 10:32:45\n * @LastEditors: \n * @LastEditTime: 2022-04-08 01:35:32\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\leftConfig.tsx\n */\nimport React, { ReactNode, useEffect, useMemo, useState } from \"react\";\nimport { Input, Menu } from \"antd\";\nimport {\n  dragEventResolve,\n  LeftRegistComponentMapItem,\n} from \"../core/crossDrag\";\nimport UserConfig from \"../config\";\nimport {\n  DoubleLeftOutlined,\n  DoubleRightOutlined,\n  SearchOutlined,\n} from \"@ant-design/icons\";\n\nimport styles from \"../index.less\";\n\ndeclare type modeType = \"horizontal\" | \"vertical\";\ninterface LeftConfigProps {\n  config: UserConfig;\n  showName?: Boolean;\n  footerConfig?: ReactNode;\n  mode?: modeType;\n}\n\n/**\n *\n * 注册加载左侧组件方法，由于异步拉取，所以要异步加载\n * 不同tab页可以使用不同type区分\n * @param {*} props -LeftConfigProps options可选项：showName:是否显示displayName; mode:'horizontal' | 'vertical' icon与文案展示方向 ;footerConfig:底部功能配置ReactNode类型；\n * @returns\n */\nfunction LeftConfig(props: LeftConfigProps) {\n  const [menuSelect, setMenuSelect] = useState(\"0\");\n  const [leftRender, setLeftRender] = useState<ReactNode | null>(null);\n\n  const [force, setForce] = useState(0);\n  useMemo(() => {\n    props.config.leftForceUpdate = () => {\n      setForce((v) => v + 1);\n    };\n  }, [props.config]);\n\n  const leftMapRenderListCategory = useMemo(() => {\n    return props.config.getConfig().leftRenderListCategory;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.config, force]);\n\n  const [search, setSearch] = useState(\"\");\n\n  useEffect(() => {\n    let cache: LeftRegistComponentMapItem[] = [];\n    const type = leftMapRenderListCategory[parseInt(menuSelect, 10)]?.type;\n    const isCustom =\n      leftMapRenderListCategory[parseInt(menuSelect, 10)]?.custom;\n    if (!isCustom) {\n      const config = props.config.getConfig();\n      cache = config.leftAllRegistMap.filter((k) => k.type === type);\n      cache.forEach((v) => props.config.asyncRegistComponent(v.component));\n      setLeftRender(\n        <div className={`${styles.leftco} yh-leftcomp`}>\n          <div\n            className=\"yh-left-top-wrapper\"\n            style={{\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              padding: \"10px\",\n            }}\n          >\n            <div\n              style={{\n                width: 120,\n                overflow: \"hidden\",\n                textOverflow: \"ellipsis\",\n                whiteSpace: \"nowrap\",\n                height: 32,\n                lineHeight: \"32px\",\n                marginRight: \"10px\",\n                fontSize: \"14px\",\n                fontFamily: \"PingFangSC-Medium, PingFang SC\",\n                fontWeight: 600,\n                userSelect: \"none\",\n              }}\n            >\n              {leftMapRenderListCategory[parseInt(menuSelect, 10)].displayName}\n            </div>\n            <Input\n              className=\"yh-left-top-input\"\n              style={{\n                borderRadius: \"40px\",\n              }}\n              allowClear\n              value={search}\n              onChange={(e) => {\n                setSearch(e.target.value);\n              }}\n              prefix={<SearchOutlined />}\n            />\n          </div>\n          {search &&\n            search !== \"\" &&\n            cache\n              .reduce<LeftRegistComponentMapItem[]>((prev, next) => {\n                //筛选搜索条件，name或者displayName存在即显示\n                if (\n                  next.displayName.includes(search) ||\n                  next.component.includes(search)\n                ) {\n                  prev.push(next);\n                }\n                return prev;\n              }, [])\n              .map((v, index) => (\n                <div\n                  className={`${styles.coitem} yh-left-item-wrap`}\n                  key={index}\n                  {...dragEventResolve(v, props.config)}\n                >\n                  <div className={`${styles.redbox} yh-left-item-img-wrap`}>\n                    {v.imgCustom ? (\n                      v.imgCustom\n                    ) : (\n                      <img\n                        src={v.img}\n                        style={{ width: \"100%\", height: \"100%\" }}\n                        alt=\"component\"\n                      ></img>\n                    )}\n                  </div>\n\n                  <div\n                    style={{\n                      textAlign: \"center\",\n                      lineHeight: \"20px\",\n                      height: \"20px\",\n                      overflow: \"hidden\",\n                    }}\n                  >\n                    {v.displayName}\n                  </div>\n                </div>\n              ))}\n          {(!search || search === \"\") &&\n            cache.map((v, index) => (\n              <div\n                className={`${styles.coitem} yh-left-item-wrap`}\n                key={index}\n                {...dragEventResolve(v, props.config)}\n              >\n                <div className={`${styles.redbox} yh-left-item-img-wrap`}>\n                  {v.imgCustom ? (\n                    v.imgCustom\n                  ) : (\n                    <img\n                      src={v.img}\n                      style={{ width: \"100%\", height: \"100%\" }}\n                      alt=\"component\"\n                    ></img>\n                  )}\n                </div>\n                <div\n                  style={{\n                    textAlign: \"center\",\n                    lineHeight: \"20px\",\n                    height: \"20px\",\n                    overflow: \"hidden\",\n                  }}\n                >\n                  {v.displayName}\n                </div>\n              </div>\n            ))}\n        </div>\n      );\n    } else {\n      const render =\n        leftMapRenderListCategory[parseInt(menuSelect, 10)]?.customRender;\n      setLeftRender(\n        <div className={styles.leftco}>{render && render(props.config)}</div>\n      );\n    }\n  }, [menuSelect, props.config, leftMapRenderListCategory, search]);\n\n  const [isCollapse, setCollapse] = useState(props.config.getCollapse());\n  const [renderCollapse, setRenderCollaspe] = useState(\n    props.config.getCollapse()\n  );\n\n  return (\n    <div style={{ display: \"flex\", height: \"100%\" }}>\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <Menu\n          style={{ flex: 1 }}\n          defaultSelectedKeys={[menuSelect]}\n          mode=\"vertical\"\n          className={`${styles.menuWidth} ${styles.menus} yh-menu`}\n        >\n          {leftMapRenderListCategory.map((v, i) => {\n            return (\n              <Menu.Item\n                key={i}\n                onClick={() => setMenuSelect(i + \"\")}\n                icon={v.icon}\n                className={\n                  props.mode === \"vertical\"\n                    ? `${styles.menuStyle} ${styles.menus} yh-menuitem`\n                    : \"yh-menuitem\"\n                }\n              >\n                {props.showName && v.displayName}\n              </Menu.Item>\n            );\n          })}\n        </Menu>\n        <div\n          className={`${styles.menu_footer} yh-menufooter ant-menu-root ant-menu-vertical`}\n        >\n          {props.footerConfig}\n        </div>\n        <Menu selectedKeys={[]}>\n          <Menu.Item\n            key=\"1\"\n            onClick={() =>\n              setCollapse((pre) => {\n                if (pre) {\n                  setTimeout(() => {\n                    props.config.collapsed = false;\n                    setRenderCollaspe(false);\n                    props.config.getStore().forceUpdate();\n                  }, 300);\n                  return !pre;\n                } else {\n                  props.config.collapsed = true;\n                  setRenderCollaspe(true);\n                  props.config.getStore().forceUpdate();\n                  return !pre;\n                }\n              })\n            }\n            className={styles.menu_footer}\n            icon={isCollapse ? <DoubleRightOutlined /> : <DoubleLeftOutlined />}\n          ></Menu.Item>\n        </Menu>\n      </div>\n      <div\n        className={`${styles.yhLeftrender} ant-menu scrollbar`}\n        style={{\n          width: isCollapse ? 0 : 270,\n          paddingRight: isCollapse ? 0 : 7, // 这个是滚动条宽度\n          overflowX: \"hidden\",\n        }}\n      >\n        {!renderCollapse && leftRender}\n      </div>\n    </div>\n  );\n}\n\nexport default LeftConfig;\n","/*\n\n * @Date: 2021-03-14 05:40:37\n * @LastEditors: \n * @LastEditTime: 2022-04-23 18:01:55\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\components\\preview.tsx\n */\nimport Container from \"./container\";\nimport React, {\n  ReactElement,\n  ReactNode,\n  useEffect,\n  useState,\n  CSSProperties,\n} from \"react\";\nimport UserConfig from \"../config\";\nimport { ComponentItemFactory } from \"..\";\n\nexport interface PreviewProps {\n  config: UserConfig;\n  /**\n   *\n   * loading node\n   * @type {ReactNode}\n   * @memberof PreviewProps\n   */\n  loadText?: ReactNode;\n  /**\n   *\n   * 手动维护状态\n   * @type {boolean}\n   * @memberof PreviewProps\n   */\n  loadingState?: boolean;\n  /**\n   *\n   * 页面链接完后调用\n   * @type {Function}\n   * @memberof PreviewProps\n   */\n  completeFn?: Function;\n  /**\n   *\n   * 预览样式\n   * @type {CSSProperties}\n   * @memberof PreviewProps\n   */\n  previewContainerStyle?: CSSProperties;\n}\n\nfunction Preview(props: PreviewProps): ReactElement {\n  const isEdit = props.config.getStore().isEdit();\n  /// 这里需要在渲染组件之前必须把所有config加载完成，否则会导致先运行的函数无法运行\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const finalFn = () => {\n      props.config.created();\n      props.config.createdFn.forEach((v) => v());\n      setTimeout(() => {\n        // 链接数据\n        props.config\n          .getDataCenter()\n          .initAddToDataMap(props.config.getStore().getData());\n        // 链接事件\n        props.config\n          .getEventCenter()\n          .syncEventMap(\n            props.config.getStore().getData(),\n            props.config.getStore()\n          );\n\n        // 设置全局\n        const global = props.config.getStore().getData().globalState;\n        const bodyColor = global?.bodyColor;\n        const title = global?.title;\n        if (title) {\n          document.title = title;\n        }\n        if (bodyColor) {\n          document.body.style.backgroundColor = bodyColor;\n        }\n        const customAnimate = global?.customAnimate;\n        if (customAnimate && Array.isArray(customAnimate)) {\n          // 插入自定义动画\n          props.config.animateFactory.fromArrInsertKeyFrame(customAnimate);\n        }\n\n        if (props.completeFn) {\n          props.completeFn();\n        }\n        props.config.beforeOnMounted();\n        props.config.beforeOnMountedFn.forEach((v) => v());\n        if (props.loadingState === undefined) {\n          setLoading(false);\n        }\n      });\n    };\n    // 加载 script\n    const scripts = props.config.getStore().getData().globalState[\"script\"];\n    if (scripts && Array.isArray(scripts) && scripts.length > 0) {\n      const fn = async () => {\n        const allp = scripts.map((v) => {\n          return () =>\n            new Promise<number>((res) => {\n              const s = document.createElement(\"script\");\n              s.src = v;\n              document.body.appendChild(s);\n              s.onload = () => {\n                const item = window[\n                  props.config.SCRIPTGLOBALNAME as any\n                ] as unknown as ComponentItemFactory;\n                try {\n                  props.config.registComponent(item);\n                } catch {\n                  console.error(\"read item fail:\", v);\n                }\n                document.body.removeChild(s);\n                res(0);\n              };\n            });\n        });\n        const allplen = allp.length;\n        for (let i = 0; i < allplen; i++) {\n          try {\n            await allp[i]();\n          } catch {\n            console.error(\"script load fail:\", scripts[i]);\n          }\n        }\n        finalFn();\n      };\n      fn();\n    } else {\n      finalFn();\n    }\n  }, [props, props.config]);\n\n  if (isEdit) {\n    // 正常情况不会走这\n    const store = props.config.getStore();\n    const data = store.getData();\n    store.changeModaltoNormal(data);\n    return (\n      <>\n        <Container\n          config={props.config}\n          context=\"preview\"\n          state={store.getData()}\n        ></Container>\n      </>\n    );\n  } else {\n    const loadingNode = (\n      <div>{props.loadText ? props.loadText : \"loading\"}</div>\n    );\n    const container = (\n      <>\n        <Container\n          config={props.config}\n          context=\"preview\"\n          state={props.config.getStore().getData()}\n          previewContainerStyle={props.previewContainerStyle}\n        ></Container>\n      </>\n    );\n    if (props.loadingState === undefined) {\n      if (loading) {\n        return loadingNode;\n      } else {\n        return container;\n      }\n    } else {\n      if (props.loadingState) {\n        return loadingNode;\n      } else {\n        return container;\n      }\n    }\n  }\n}\nexport default Preview;\n","/*\n\n * @Date: 2021-03-14 04:29:09\n * @LastEditors: \n * @LastEditTime: 2021-07-06 23:45:02\n * @FilePath: \\dooringv2\\packages\\dooring-v2-lib\\src\\core\\components\\formTypes.ts\n */\n\nexport interface CreateOptionsResAll {\n  type: string;\n  option: any;\n}\n\nexport interface CreateOptionsRes<T, K extends keyof T> {\n  type: keyof T;\n  option: T[K];\n}\n\nexport function createPannelOptions<T, K extends keyof T>(\n  type: K,\n  option: T[K]\n): CreateOptionsRes<T, K> {\n  return {\n    type,\n    option,\n  };\n}\n","/*\n\n * @Date: 2022-04-27 22:15:24\n * @LastEditors: \n * @LastEditTime: 2022-04-27 22:38:59\n * @FilePath: \\lowcode\\packages\\lowcode-lib\\src\\hooks\\useRegistFunc.ts\n */\n\nimport { useEffect } from \"react\";\n/**\n *\n *\n * @export 用于简化注册函数代码\n * @param {boolean} dep 配置的开关\n * @param {('preview' | 'edit')} context 传递的环境变量\n * @param {Function} registFn 注册的函数\n */\nexport function useRegistFunc(\n  dep: boolean,\n  context: \"preview\" | \"edit\",\n  registFn: Function\n) {\n  useEffect(() => {\n    let unRegist: Function = () => {};\n    if (dep) {\n      unRegist = registFn;\n    }\n    return () => {\n      if (context === \"preview\") {\n        unRegist(); // 必须在预览时注销，否则影响二次点击效果，不在预览注销影响编辑时跨弹窗\n      }\n    };\n  }, [context, dep, registFn]);\n}\n","/*\n\n * @Date: 2021-07-04 14:18:18\n * @LastEditors: \n * @LastEditTime: 2021-07-04 14:21:33\n * @FilePath: \\DooringV2\\packages\\dooring-v2-lib\\src\\core\\command\\runtime.ts\n */\nimport CommanderWrapper from \".\";\nimport { CommanderItemFactory } from \"./abstract\";\n\nexport const registCommandFn = (\n  module: CommanderItemFactory[],\n  commander: CommanderWrapper\n) => {\n  module.forEach((v) => {\n    commander.register(v);\n  });\n};\nexport const unRegistCommandFn = (\n  module: CommanderItemFactory[],\n  commander: CommanderWrapper\n) => {\n  module.forEach((v) => {\n    commander.unRegister(v.name);\n  });\n};\n"],"names":["specialCoList","specialFnList","deepCopy","obj","deepCopys","rgba2Obj","rgba","rgbaObj","r","g","b","a","replace","_m","createUid","name","nanoid","isMac","test","navigator","userAgent","arrayMove","array","from","to","arrayMoveMutate","indexSub","arrLength","toIndex","length","startIndex","endIndex","splice","postMessage","value","src","target","search","iframe","document","querySelector","contentWindow","console","warn","angleToRadian","angle","Math","PI","getContainer","container","binarySearchRemain","arr","attribute","indent","start","end","mid","parseInt","abs","useIframePostMessage","origin","config","sign","store","getStore","fn","useMemo","iframeId","iframeOrigin","getData","scaleState","getScaleState","wrapperState","getWrapperMove","useEffect","unRegister","refreshIframe","subscribe","innerDragState","startX","startY","item","isDrag","ref","current","lastClick","itemX","itemY","substract","x","y","getSides","list","len","res","j","pre","p","push","axis","sqrt","getProjection","min","max","i","l","pro","getOriginPoint","center","left","width","top","height","getCenter","relativePoint","rootPoint","map","v","x0","y0","rx","cos","rotate","sin","ry","selectData","selectDiv","posx","posy","selectRangeMouseMove","ev","style","clientX","clientY","selectRangeMouseUp","e","getBoundingClientRect","scale","wwidth","wheight","Event","typeGuard","nativeEvent","offsetX","offsetY","clonedata","focusState","getFocusState","change","block","forEach","t","w","h","canDrag","select","A","B","resa","resb","sidesa","sidesb","sides","concat","proA","proB","polygonsCollisionTest","Sat","focus","blocks","setData","selectFocus","parentNode","removeChild","ContextMenu","forceUpdate","useState","contextMenuState","React","position","background","onClick","unmountContextMenu","menu","parent","contextMenu","observer","initLeft","initTop","state","disconnect","unmountComponentAtNode","resolveRemove","newBlock","containerFocusRemove","onMouseDown","createElement","className","yhTempDiv","body","appendChild","onmouseup","onmousemove","selectRangeMouseDown","createBlock","ComponentItem","innerRemoveFocus","id","zIndex","initData","props","resize","display","syncList","canSee","eventMap","functionList","animate","fixed","canRotate","currentDrag","resolveDrop","dbclick","componentRegister","getComponentRegister","getComp","component","newblock","fixX","fixY","needPosition","offsetTop","offsetLeft","data","log","dragEventResolve","draggable","onDragStart","onDragOver","preventDefault","onDrop","onDragEnd","onDoubleClick","containerDragResolve","round","offestY","marklineConfig","isAbsorb","mode","gridIndent","resizeIndent","marklineUnfocus","borderColor","borderStyle","directionArr","resizeState","isResize","direction","currentTarget","symmetricPoint","curPosition","getCenterPoint","p1","p2","calculateRotatedPointCoordinate","point","initialAngle","lt","rt","rb","lb","angleToCursor","cursor","mod360","deg","resizerMouseUp","endindex","getIndex","getStoreList","setIndex","BlockResizer","result","lastMatchIndex","cursorMap","angleLimit","render","key","classnames","styles","resizepoint","stopPropagation","curDiv","containerRect","centerX","offsetWidth","centerY","offsetHeight","rect","onMouseUp","moveState","isMove","mouseUp","containerState","minHeight","containerResizer","diff","tmpHeight","diffx","diffy","setXy","controlMouseMove","wrapperMoveState","needX","needY","wrapperRefState","rotateState","isRotate","RotateResizer","title","ReloadOutlined","color","RotateReset","resetResolve","rotatereset","RotateLeftOutlined","marklineState","cache","sortLeft","sortTop","sortRight","sortBottom","uid","currentMoveItemId","resizeMouseDown","TimeLineItemMouseOver","commonCss","transform","square","bgColorCache","TimeLineItem","interval","animationDelay","repeat","animationIterationCount","animationDuration","random","toString","slice","itemHeight","borderRadius","opacity","right","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","en","timeline.name","contorl.popup.absolute","contorl.popup.static","contorl.absolute","contorl.static","control.popup.delete","control.delete","control.focus","control.no-component","modal.new","modal.control","modal.popup.exit","modal.popup.edit","modal.popup.save","modal.popup.notfond","modal.popup.repeat","modal.popup.remove","modal.popup.nomodal","modal.popup.name","modal.name","modal.control.remove","edit","yes","no","right.noprops","right.global","right.containerheight","right.containerwidth","right.containerColor","right.bodyColor","right.fontSize","right.lineHeight","description","system.setting","settings.openabsorb","on","off","settings.absorbindent","settings.min","settings.max","settings.autofocus","error.minmax","settings.marklineColor","settings.marklineStyle","settings.containerOverflow","settings.Layout","zhCN","replaceLocale","msg","param","paramString","i18n","FormattedMessage","defaultMessage","zh-CN","animateTicker","Array","fill","_","DragHandle","SortableHandle","MenuOutlined","WAIT","SortableItem","SortableElement","userSelect","alignItems","clone","deepcopy","includes","overflow","minWidth","borderRight","borderBottom","backgroundColor","getMap","marginLeft","flex","textAlign","paddingRight","marginRight","EyeOutlined","EyeInvisibleOutlined","onConfirm","filter","okText","cancelText","DeleteOutlined","SortableList","SortableContainer","items","index","cacheBlock","timer","needleState","needleMoveEvent","setNeedle","timelineNeedleConfig","onMouseMove","persist","shouldMoveX","widthInterval","status","blockForceUpdate","TimeLine","setState","scrollx","setScrollx","content","distance","useDragHandle","onSortEnd","sort","newblocks","oldIndex","newIndex","isEdit","cloneData","renderData","waitAnimate","useRef","timelineConfig","scrollDom","needle","resetAnimate","setTimeout","cleanLast","refreshBlock","needlePlay","window","clearInterval","_context5","needleReset","isRefresh","setInterval","needResetAnimate","_context6","needlePause","resetFunc","runFunc","pauseFunc","classes","bottom","flexDirection","dom","indexOf","lineHeight","paddingLeft","PauseCircleOutlined","PlayCircleOutlined","_context3","mouseLeft","scrollLeft","needleHeadWidth","transition","willChange","_context","init","needleHeadEvent","pointerEvents","borderLeft","onScroll","scrollTop","f","parseFloat","toFixed","count","f2","TimeLineItemMouseMove","onMouseLeave","innerContainerDrag","lastblock","_innerDragState$item","find","isMulti","moveX","moveY","durX","durY","cloneblock","_resizeState$ref","movePoint","itemRef","itemWH","curPositon","newCenterPoint","newTopLeftPoint","newBottomRightPoint","newWidth","newHeight","calculateTopLeft","curPoint","rotatedcurPositon","rotatedRightMiddlePoint","newCenter","calculateRight","rotatedBottomMiddlePoint","calculateBottom","rotatedLeftMiddlePoint","calculateLeft","rotatedTopMiddlePoint","calculateTop","calculateBottomRight","newTopRightPoint","newBottomLeftPoint","calculateTopRight","calculateBottomLeft","getRect","resizerMouseMove","_rotateState$ref","rotateDegreeBefore","atan2","rotateDegreeAfter","frotate","rotateMouseMove","marklineDisplay","focusStyle","unFocusStyle","lines","dirty","diffY","diffX","dirtyY","dirtyX","newMarklineDisplay","getComponentRotatedStyle","MarklineX","borderTop","MarklineY","NormalMarkLineRender","realStyle","unfocus","indexLeft","indexLeftRight","indexRightLeft","indexTopBottom","indexBottomTop","indexTop","indexRight","indexBottom","rstyle","marklineCalRender","getCurrentMobileInfo","userAgentMatched","match","innerWidth","screen","availHeight","getRealWidth","getRealHeight","H","Blocks","previewState","setPreviewState","unregist","newdata","tmp","innerDragData","shiftKey","blockFocus","autoFocus","findIndex","innerDrag","isFixed","newheight","newwidth","newleft","transfer","addEventListener","removeEventListener","force","animateForce","delay","isPause","configstr","str","animationTimingFunction","animationName","mergeAnimate","animation","animateProps","animationEdit","yh_block_focus","onContextMenu","userConfig","MutationObserver","mutationsList","mutation","curLeft","curTop","diffL","diffT","observe","attributes","ReactDOM","contextMenuEvent","Container","editContainerStyle","previewContainerStyle","bgColor","globalState","containerColor","containerForceUpdate","onMounted","onMountedFn","destroyed","destroyedFn","minWxEle","minwx","class","viewBox","version","xmlns","d","yh_container","containerOverFlow","_props$state$globalSt2","fontSize","_props$state$globalSt4","isMinwx","justifyContent","getConfig","containerIcon","yh_container_preview","border","boxShadow","_props$state$globalSt6","_props$state$globalSt8","ColorPicker","initColor","setColor","colorPickerVisible","setColorPickerVisible","SketchPicker","onChange","c","newcolor","rgb","memo","colStyle","titletStyle","scaleCancelFn","scaleFn","increase","number","maxValue","decrease","minValue","onWheelEventIframe","onWheel","deltaY","sendParent","column","Ticker","topRef","leftRef","topRender","setTopRender","leftRender","setLeftRender","renderWidth","ceil","renderHeight","clearTimeout","collapsed","formItemLayout","labelCol","span","wrapperCol","SettingsModal","form","_Form","useForm","visible","onCancel","onOk","getFieldsValue","message","currentScale","initialValues","absorb","autofocus","Item","label","_Radio","Group","_Select","Option","step","Text","reg","FormComponentRegister","formMap","listener","containerConfig","_proto","setConfig","register","ele","emit","event","_this","FunctionCenter","initConfig","funcitonMap","reduce","configMap","nameMap","componentIdMap","cid","componentId","add","Set","getFunctionMap","getConfigMap","getNameMap","nameToKey","keylen","asyncMap","syncFunction","special","allId","modalMap","k","needDelete","_this2","getFunction","_this3","EventQuene","available","waiters","_continue","bind","take","task","args","eventList","iname","leave","shift","EventCenter","configFunction","functionCenter","getFunctionCenter","getEventMap","resetEventMap","syncEventMap","assign","manualUpdateMap","runEventQueue","isArray","_iterator","DataCenter","dataMap","getDataMap","setToMap","staticSetToMap","dataSource","initAddToDataMap","getValue","get","unmountMap","Map","ModalRender","storeData","z","parentDom","rootDom","modalConfig","unmount","parentElement","set","ComponentItemFactory","destroy","remoteConfig","MmodalMask","shape","icon","SaveOutlined","closeModal","keymap","C","D","E","F","G","I","J","K","L","m","M","n","N","o","O","P","q","Q","R","s","S","T","u","U","V","W","X","Y","Z","CommanderWrapper","commandMap","getList","remove","registerKeyBoard","origindestroy","keyboard","onKeydown","activeElement","altKey","keyString","ctrlKey","metaKey","keycodeFilter","keyname","join","excute","exec","options","ComponentRegister","componentMap","componentList","emitEvent","initialData","modalEditName","Store","storeDataList","listeners","forceupdate","getListeners","getOriginBlock","changeModaltoNormal","changeNormalToModal","success","isInModalMap","newModaltoNormal","modalBlock","newModalMap","succeess","copyData","removeModal","resetToInitData","check","resetToCustomData","resetListeners","replaceList","setForceUpdate","num","redo","undo","cleanRedundant","flag","AnimateFactory","customAnimateName","getCustomAnimateName","searchSheet","sheet","styleSheets","node","ownerNode","getStyleSheets","createTextNode","head","inserKeyframeAnimate","ruleText","insertRule","cssRules","deleteKeyFrameAnimate","animateName","sheets","ss","rule","deleteRule","addCustomAnimate","customAnimateNameArr","deleteCustomAnimate","fromArrInsertKeyFrame","keyframe","syncToStore","copy","customAnimate","syncStoreToConfig","dataAnimate","_data$globalState","addUserInputIntoCustom","keyframeItem","keyframes","percent","positionX","positionY","defaultStore","defaultKey","bodyColor","script","defaultConfig","initStoreData","leftAllRegistMap","leftRenderListCategory","rightGlobalCustom","rightRenderListCategory","initComponentCache","modalMask","initFunctionMap","open_modal","_ctx","cssText","divs","createModal","receive","multi","close_modal","_config","initDataCenterMap","initCommandModule","initFormComponents","VerticalAlignMiddleOutlined","userConfigMerge","mergeConfig","UserConfig","iframeWrapperMoveState","commanderRegister","eventCenter","dataCenter","toRegist","formComponent","modules","formRegister","componentCache","registComponent","urlFn","asyncComponentUrlMap","asyncRegistComponent","getCollapse","getStoreJSON","JSON","stringify","parseStoreJson","json","parse","resetData","animateFactory","getDataCenter","getEventCenter","getAnimateFactory","getContextMenuState","getFormRegister","getCommanderRegister","getCurrentData","resetConfig","leftForceUpdate","addLeftCategory","addRightCategory","addCoRegistMap","registCommander","command","getMarklineConfig","getComponentCache","chunkDefault","scriptRegistComponentSingle","leftProps","scriptSingleLoad","callback","scriptLoading","onload","SCRIPTGLOBALNAME","children","classNames","rest","ticker","yh_container_wrapper","wrapperEvent","onWheelEvent","timeline","setVisible","configVisible","setConfigVisible","settingVisible","setSettingVisible","_message","useMessage","api","contextHolder","xy","UnorderedListOutlined","LayoutOutlined","SyncOutlined","SettingOutlined","footer","_List","actions","validateFields","resetFields","modalName","layout","rules","required","setMessage","transformOrigin","extra","scrolling","iframeProps","menuSelect","setMenuSelect","setForce","leftMapRenderListCategory","setSearch","_leftMapRenderListCat","_leftMapRenderListCat2","custom","_leftMapRenderListCat3","customRender","leftco","padding","textOverflow","whiteSpace","fontFamily","fontWeight","allowClear","prefix","SearchOutlined","coitem","redbox","imgCustom","img","alt","isCollapse","setCollapse","renderCollapse","setRenderCollaspe","defaultSelectedKeys","menuWidth","menus","_Menu","menuStyle","showName","menu_footer","footerConfig","selectedKeys","DoubleRightOutlined","DoubleLeftOutlined","yhLeftrender","overflowX","addVisible","setAddVisible","editVisible","setEditVisible","setCurrent","dataIndex","align","_v","size","editForm","setFieldsValue","newObj","marginBottom","pagination","columns","startsWith","formSubmit","validator","_Input","TextArea","loading","setLoading","finalFn","created","createdFn","global","completeFn","beforeOnMounted","beforeOnMountedFn","loadingState","scripts","allp","allplen","loadingNode","loadText","rightMapRenderListCategory","some","renderList","Component","initTitle","initDescription","setTitle","setDescription","customGlobal","activeKey","_Tabs","TabPane","tab","val","originData","disabled","checked","globalExtra","modalExtra","ctx","userChoose","pr","ne","option","iframeWrapperMove","wrapperMoveMouseUp","rotateMouseUp","indexa","indexb","eventName","storeItem","setIframeReady","fnx","dep","registFn","unRegist","extraFn","everyFn","commandModules","commander","registCommandFn","unRegistCommandFn","fn1","fn2","passive"],"mappings":"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pB,EAAU5lB,KACVwN,GAAcE,SACd,OACAjF,GAAejM,QAEbspB,GACFjB,GACEe,EACAE,EAAU,GACVd,EACArhB,EACAmiB,EAAU,GACVb,EACA,QAGJ,IAAMc,EAAiB1pB,EACrBupB,EAAU5lB,KACVwN,GAAcI,UACd,QACAnF,GAAejM,QAEbupB,GACFlB,GACEe,EACAG,EAAe,GACff,EACArhB,EACAoiB,EAAe,GACfd,EACA,OAGJ,IAAMe,EAAiB3pB,EACrBupB,EAAU1W,MACV1B,GAAcE,SACd,OACAjF,GAAejM,QAEbwpB,GACFnB,GACEe,EACAI,EAAe,GACfhB,EACArhB,EACAqiB,EAAe,GACff,EACA,OAGJ,IAAMgB,EAAiB5pB,EACrBupB,EAAU1lB,IACVsN,GAAcK,WACd,SACApF,GAAejM,QAEbypB,GACFpB,GACEe,EACAK,EAAe,GACfjB,EACArhB,EACAsiB,EAAe,GACfhB,EACA,OAGJ,IAAMiB,EAAiB7pB,EACrBupB,EAAUxF,OACV5S,GAAcG,QACd,MACAlF,GAAejM,QAEb0pB,GACFrB,GACEe,EACAM,EAAe,GACflB,EACArhB,EACAuiB,EAAe,GACfjB,EACA,OAGJ,IAAMkB,EAAW9pB,EACfupB,EAAU1lB,IACVsN,GAAcG,QACd,MACAlF,GAAejM,QAEb2pB,GACFtB,GACEe,EACAO,EAAS,GACTnB,EACArhB,EACAwiB,EAAS,GACTlB,EACA,OAGJ,IAAMmB,EAAa/pB,EACjBupB,EAAU1W,MACV1B,GAAcI,UACd,QACAnF,GAAejM,QAEb4pB,GACFvB,GACEe,EACAQ,EAAW,GACXpB,EACArhB,EACAyiB,EAAW,GACXnB,EACA,SAGJ,IAAMoB,EAAchqB,EAClBupB,EAAUxF,OACV5S,GAAcK,WACd,SACApF,GAAejM,QAEb6pB,GACFxB,GACEe,EACAS,EAAY,GACZrB,EACArhB,EACA0iB,EAAY,GACZpB,EACA,gBAKN,IAAK,IAAItlB,EAAI,EAAGA,EAAIX,EAAKW,IAAK,CAC5B,IAAMa,EAAIqlB,EAAQlmB,GACZC,QAAIY,SAAAA,EAAGR,KACP0C,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"}